User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9a9pre) Gecko/2007101822 Minefield/3.0a9pre
Build Identifier: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9a9pre) Gecko/2007101822 Minefield/3.0a9pre

x86_64 LFS system, glibc-2.6, gcc-4.2.2, no optimizations.

Reproducible: Always

Steps to Reproduce:
1.http://xmlhack.ru/archives/2007/10/000222.html
2. click and drag white field with math formula
Actual Results:  
crash

Expected Results:  
normal work

User-Agent:       Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9a9pre) Gecko/2007101822 Minefield/3.0a9pre
Build Identifier: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9a9pre) Gecko/2007101822 Minefield/3.0a9pre

x86_64 LFS system, glibc-2.6, gcc-4.2.2, no optimizations.

Reproducible: Always

Steps to Reproduce:
1.http://xmlhack.ru/archives/2007/10/000222.html
2. click and drag white field with math formula
Actual Results:  
crash

Expected Results:  
normal work
ะกะก
I can't reproduce it with a Firefox debug build on x86_64 Kubuntu 7.10.
What we need is a stack trace for the crash.

Did you compile your build from source yourself?
If so, please add "ac_add_options --enable-debug" to your .mozconfig
and rebuild everything (don't forget "make clean" first).
If not, try installing the "firefox debug" package for your distro,
see http://kb.mozillazine.org/Getting_a_stacktrace_with_gdb
on how to get a stack trace.  Thanks.
Created attachment 285734
stack trace

crash on http://xmlhack.ru/archives/2007/10/000222.html page
You need to run Firefox from a debugger (gdb) to get a stack trace.
See "Using gdb to get a stacktrace" at
http://kb.mozillazine.org/Getting_a_stacktrace_with_gdb

Here's a link to an example stack trace:
https://bugzilla.mozilla.org/attachment.cgi?id=237381

Sorry for incomprehension.

I've compiled Fx with
bash-3.2$ cat .mozconfig
mk_add_options MOZ_CO_PROJECT=browser
ac_add_options --enable-application=browser
ac_add_options --enable-default-toolkit=cairo-gtk2
ac_add_options --disable-optimize
ac_add_options --enable-debug

And X stops responding after Fx under gdb crash :( Only killing Fx via ssh helps.

I've got coredump of such build, but looks like there isn't debug symbols.
(gdb) core-file core.16218 
Core was generated by `./firefox-bin'.
Program terminated with signal 11, Segmentation fault.
#0  0x00002b9343fd53af in ?? ()

If I'm trying to run gdb via ssh, I'm getting 
(gdb) run
.........................
Program received signal SIGSEGV, Segmentation fault.
Cannot remove breakpoints because program is no longer writable.
It might be running in another process.
Further execution is probably impossible.
0x00002b3900e8d873 in ?? ()
(gdb) backtrace
#0  0x00002b3900e8d873 in ?? ()
#1  0x00002b3900e9363c in ?? ()
#2  0x0000000002aedd70 in ?? ()
#3  0x0000000000000000 in ?? ()

What can I do in such situation?
(In reply to comment #5)
> I've got coredump of such build, but looks like there isn't debug symbols.

Try starting in gdb from the ssh session, something like this:
ssh x.x.x.x
export DISPLAY=:0.0
cd MOZILLA_TOPDIR
./dist/bin/firefox -g -d gdb
handle SIG33 noprint nostop
run
backtrace
backtrace full

The same :(

Program received signal SIGSEGV, Segmentation fault.
Cannot remove breakpoints because program is no longer writable.
It might be running in another process.
Further execution is probably impossible.
0x00002b19db50b873 in ?? ()
(gdb) backtrace
#0  0x00002b19db50b873 in ?? ()
#1  0x00002b19db51163c in ?? ()
#2  0x00000014d4084070 in ?? ()
#3  0x0000000000000000 in ?? ()
(gdb) backtrace full
#0  0x00002b19db50b873 in ?? ()
No symbol table info available.
#1  0x00002b19db51163c in ?? ()
No symbol table info available.
#2  0x00000014d4084070 in ?? ()
No symbol table info available.
#3  0x0000000000000000 in ?? ()
No symbol table info available.

about:buildconfig

Build platform
target
x86_64-unknown-linux-gnu

Build tools
Compiler 	Version 	Compiler flags
gcc 	gcc version 4.2.2 	-Wall -W -Wno-unused -Wpointer-arith -Wcast-align -Wno-long-long -pedantic -pthread -pipe
c++ 	gcc version 4.2.2 	-fno-rtti -fno-exceptions -Wall -Wconversion -Wpointer-arith -Wcast-align -Woverloaded-virtual -Wsynth -Wno-ctor-dtor-privacy -Wno-non-virtual-dtor -Wno-long-long -pedantic -fshort-wchar -pthread -pipe

Configure arguments
--enable-application=browser --enable-default-toolkit=cairo-gtk2 --disable-optimize --enable-debug 
Try adding a "dry run" before crashing it, something like this:
... as above ...
run
... quit Firefox normally with File->Quit ...
run
... crash it, etc ...

Created attachment 285943
real backtrace
Created attachment 285944
backtrace full

It works, thanks for you help
Slava, thanks for your helpful cooperation in diagnosing the problem.
This is the same underlying problem as bug 390898 (v.vector has some negative
values in fbFetchTransformed()).


*** This bug has been marked as a duplicate of bug 390898 ***
Slava, bug 390898 have been fixed now, can you update your tree and verify
that it also fixed your crash?  Thanks.
This bug is also fixed, thanks.


run-mozilla.sh: line 131:  3201 Segmentation fault "$prog" ${1+"$@"}

crash