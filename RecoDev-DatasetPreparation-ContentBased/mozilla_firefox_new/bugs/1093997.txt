17:19:34 INFO - 563 INFO TEST-START | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js
17:19:35 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:35 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:35 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:35 INFO - waitForDocLoadAndStopIt: onStateChange f0001: http://www.mozilla.org/
17:19:35 INFO - waitForDocLoadAndStopIt: Document start: http://www.mozilla.org/
17:19:36 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:36 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:36 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:36 INFO - waitForDocLoadAndStopIt: onStateChange f0001: https://www.google.com/search?q=1234&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:36 INFO - waitForDocLoadAndStopIt: Document start: https://www.google.com/search?q=1234&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange f0001: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:37 INFO - waitForDocLoadAndStopIt: Document start: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange f0001: http://localhost/
17:19:37 INFO - waitForDocLoadAndStopIt: Document start: http://localhost/
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange f0001: http://localhost/
17:19:37 INFO - waitForDocLoadAndStopIt: Document start: http://localhost/
17:19:38 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:38 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:38 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:38 INFO - waitForDocLoadAndStopIt: onStateChange f0001: https://www.google.com/search?q=localhost.&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:38 INFO - waitForDocLoadAndStopIt: Document start: https://www.google.com/search?q=localhost.&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:38 INFO - waitForDocLoadAndStopIt: onStateChange f0001: http://localhost./
17:19:38 INFO - waitForDocLoadAndStopIt: Document start: http://localhost./
17:19:39 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:39 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:39 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:39 INFO - waitForDocLoadAndStopIt: onStateChange f0001: http://localhost./
17:19:39 INFO - waitForDocLoadAndStopIt: Document start: http://localhost./
17:19:40 INFO - WARNING: content window passed to PrivateBrowsingUtils.isWindowPrivate. Use isContentWindowPrivate instead (but only for frame scripts).
17:19:40 INFO - pbu_isWindowPrivate@resource://gre/modules/PrivateBrowsingUtils.jsm:25:14
17:19:40 INFO - @about:privatebrowsing:25:12
17:19:40 INFO - WARNING: content window passed to PrivateBrowsingUtils.isWindowPrivate. Use isContentWindowPrivate instead (but only for frame scripts).
17:19:40 INFO - pbu_isWindowPrivate@resource://gre/modules/PrivateBrowsingUtils.jsm:25:14
17:19:40 INFO - @about:privatebrowsing:50:14
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange f0001: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:41 INFO - waitForDocLoadAndStopIt: Document start: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange f0001: http://localhost/
17:19:41 INFO - waitForDocLoadAndStopIt: Document start: http://localhost/
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange f0001: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:41 INFO - waitForDocLoadAndStopIt: Document start: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:41 INFO - *************************
17:19:41 INFO - A coding exception was thrown in a Promise rejection callback.
17:19:41 INFO - See https://developer.mozilla.org/Mozilla/JavaScript_code_modules/Promise.jsm/Promise
17:19:41 INFO - Full message: TypeError: gBrowser._cancelTabSwitch is not a function
17:19:41 INFO - Full stack: set_selectedIndex/<@chrome://browser/content/tabbrowser.xml:5330:13
17:19:41 INFO - Handler.prototype.process@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:871:21
17:19:41 INFO - this.PromiseWalker.walkerLoop@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:747:7
17:19:41 INFO - *************************
17:19:42 INFO - 564 INFO checking window state
17:19:42 INFO - 565 INFO Entering test test_navigate_full_domain
17:19:42 INFO - 566 INFO waitForDocLoadAndStopIt: Waiting for URL: http://www.mozilla.org/
17:19:42 INFO - 567 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 568 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | We are expecting to not get a notification
17:19:42 INFO - 569 INFO Leaving test test_navigate_full_domain
17:19:42 INFO - 570 INFO Entering test test_navigate_numbers
17:19:42 INFO - 571 INFO waitForDocLoadAndStopIt: Waiting for URL: https://www.google.com/search?q=1234&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:42 INFO - 572 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 573 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | We are expecting to not get a notification
17:19:42 INFO - 574 INFO Leaving test test_navigate_numbers
17:19:42 INFO - 575 INFO Entering test test_navigate_single_host
17:19:42 INFO - 576 INFO waitForDocLoadAndStopIt: Waiting for URL: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:42 INFO - 577 INFO Waiting for keyword-uri-fixup notification
17:19:42 INFO - 578 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 579 INFO Saw the notification
17:19:42 INFO - 580 INFO waitForDocLoadAndStopIt: Waiting for URL: http://localhost/
17:19:42 INFO - 581 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | Pref should have the correct state.
17:19:42 INFO - 582 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 583 INFO waitForDocLoadAndStopIt: Waiting for URL: http://localhost/
17:19:42 INFO - 584 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 585 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | We are expecting to not get a notification
17:19:42 INFO - 586 INFO Leaving test test_navigate_single_host
17:19:42 INFO - 587 INFO Entering test test_navigate_single_host
17:19:42 INFO - 588 INFO waitForDocLoadAndStopIt: Waiting for URL: https://www.google.com/search?q=localhost.&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:42 INFO - 589 INFO Waiting for keyword-uri-fixup notification
17:19:42 INFO - 590 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 591 INFO Saw the notification
17:19:42 INFO - 592 INFO waitForDocLoadAndStopIt: Waiting for URL: http://localhost./
17:19:42 INFO - 593 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | Pref should have the correct state.
17:19:42 INFO - 594 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 595 INFO waitForDocLoadAndStopIt: Waiting for URL: http://localhost./
17:19:42 INFO - 596 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 597 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | We are expecting to not get a notification
17:19:42 INFO - 598 INFO Leaving test test_navigate_single_host
17:19:42 INFO - 599 INFO Entering test test_navigate_single_host
17:19:42 INFO - 600 INFO waitForDocLoadAndStopIt: Waiting for URL: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:42 INFO - 601 INFO Waiting for keyword-uri-fixup notification
17:19:42 INFO - 602 INFO Console message: [JavaScript Warning: "Key event not available on some keyboard layouts: key="c" modifiers="accel,alt"" {file: "chrome://mochikit/content/tests/SimpleTest/specialpowersAPI.js" line: 153}]
17:19:42 INFO - 603 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 604 INFO Saw the notification
17:19:42 INFO - 605 INFO waitForDocLoadAndStopIt: Waiting for URL: http://localhost/
17:19:42 INFO - 606 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | Pref should have the correct state.
17:19:42 INFO - 607 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 608 INFO waitForDocLoadAndStopIt: Waiting for URL: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:42 INFO - 609 INFO Waiting for keyword-uri-fixup notification
17:19:42 INFO - 610 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 611 INFO Saw the notification
17:19:42 INFO - 612 INFO Waiting for private window to close
17:19:42 INFO - 613 INFO Waiting for focus
17:19:42 INFO - 614 INFO must wait for focus
17:19:42 INFO - 615 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | A promise chain failed to handle a rejection: - at chrome://browser/content/tabbrowser.xml:5330 - TypeError: gBrowser._cancelTabSwitch is not a function
17:19:42 INFO - Stack trace:
17:19:42 INFO - set_selectedIndex/<@chrome://browser/content/tabbrowser.xml:5330:13
17:19:42 INFO - Handler.prototype.process@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:871:21
17:19:42 INFO - this.PromiseWalker.walkerLoop@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:747:7
17:19:42 INFO - Tester_execTest@chrome://mochikit/content/browser-test.js:645:9
17:19:42 INFO - Tester.prototype.nextTest</<@chrome://mochikit/content/browser-test.js:571:7
17:19:42 INFO - SimpleTest.waitForFocus/maybeRunTests/<@chrome://mochikit/content/tests/SimpleTest/SimpleTest.js:683:49
17:19:42 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:42 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:42 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:42 INFO - waitForDocLoadAndStopIt: onStateChange f0001: https://www.google.com/search?q=mozilla+is+awesome&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:42 INFO - waitForDocLoadAndStopIt: Document start: https://www.google.com/search?q=mozilla+is+awesome&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:43 INFO - 616 INFO TEST-OK | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | took 8511ms
17:19:43 INFO - 617 INFO TEST-START | chrome://mochitests/content/browser/browser/base/content/test/general/browser_utilityOverlay.js

17:19:34 INFO - 563 INFO TEST-START | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js
17:19:35 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:35 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:35 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:35 INFO - waitForDocLoadAndStopIt: onStateChange f0001: http://www.mozilla.org/
17:19:35 INFO - waitForDocLoadAndStopIt: Document start: http://www.mozilla.org/
17:19:36 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:36 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:36 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:36 INFO - waitForDocLoadAndStopIt: onStateChange f0001: https://www.google.com/search?q=1234&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:36 INFO - waitForDocLoadAndStopIt: Document start: https://www.google.com/search?q=1234&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange f0001: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:37 INFO - waitForDocLoadAndStopIt: Document start: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange f0001: http://localhost/
17:19:37 INFO - waitForDocLoadAndStopIt: Document start: http://localhost/
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:37 INFO - waitForDocLoadAndStopIt: onStateChange f0001: http://localhost/
17:19:37 INFO - waitForDocLoadAndStopIt: Document start: http://localhost/
17:19:38 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:38 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:38 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:38 INFO - waitForDocLoadAndStopIt: onStateChange f0001: https://www.google.com/search?q=localhost.&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:38 INFO - waitForDocLoadAndStopIt: Document start: https://www.google.com/search?q=localhost.&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:38 INFO - waitForDocLoadAndStopIt: onStateChange f0001: http://localhost./
17:19:38 INFO - waitForDocLoadAndStopIt: Document start: http://localhost./
17:19:39 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:39 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:39 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:39 INFO - waitForDocLoadAndStopIt: onStateChange f0001: http://localhost./
17:19:39 INFO - waitForDocLoadAndStopIt: Document start: http://localhost./
17:19:40 INFO - WARNING: content window passed to PrivateBrowsingUtils.isWindowPrivate. Use isContentWindowPrivate instead (but only for frame scripts).
17:19:40 INFO - pbu_isWindowPrivate@resource://gre/modules/PrivateBrowsingUtils.jsm:25:14
17:19:40 INFO - @about:privatebrowsing:25:12
17:19:40 INFO - WARNING: content window passed to PrivateBrowsingUtils.isWindowPrivate. Use isContentWindowPrivate instead (but only for frame scripts).
17:19:40 INFO - pbu_isWindowPrivate@resource://gre/modules/PrivateBrowsingUtils.jsm:25:14
17:19:40 INFO - @about:privatebrowsing:50:14
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange f0001: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:41 INFO - waitForDocLoadAndStopIt: Document start: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange f0001: http://localhost/
17:19:41 INFO - waitForDocLoadAndStopIt: Document start: http://localhost/
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:41 INFO - waitForDocLoadAndStopIt: onStateChange f0001: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:41 INFO - waitForDocLoadAndStopIt: Document start: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:41 INFO - *************************
17:19:41 INFO - A coding exception was thrown in a Promise rejection callback.
17:19:41 INFO - See https://developer.mozilla.org/Mozilla/JavaScript_code_modules/Promise.jsm/Promise
17:19:41 INFO - Full message: TypeError: gBrowser._cancelTabSwitch is not a function
17:19:41 INFO - Full stack: set_selectedIndex/<@chrome://browser/content/tabbrowser.xml:5330:13
17:19:41 INFO - Handler.prototype.process@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:871:21
17:19:41 INFO - this.PromiseWalker.walkerLoop@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:747:7
17:19:41 INFO - *************************
17:19:42 INFO - 564 INFO checking window state
17:19:42 INFO - 565 INFO Entering test test_navigate_full_domain
17:19:42 INFO - 566 INFO waitForDocLoadAndStopIt: Waiting for URL: http://www.mozilla.org/
17:19:42 INFO - 567 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 568 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | We are expecting to not get a notification
17:19:42 INFO - 569 INFO Leaving test test_navigate_full_domain
17:19:42 INFO - 570 INFO Entering test test_navigate_numbers
17:19:42 INFO - 571 INFO waitForDocLoadAndStopIt: Waiting for URL: https://www.google.com/search?q=1234&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:42 INFO - 572 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 573 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | We are expecting to not get a notification
17:19:42 INFO - 574 INFO Leaving test test_navigate_numbers
17:19:42 INFO - 575 INFO Entering test test_navigate_single_host
17:19:42 INFO - 576 INFO waitForDocLoadAndStopIt: Waiting for URL: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:42 INFO - 577 INFO Waiting for keyword-uri-fixup notification
17:19:42 INFO - 578 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 579 INFO Saw the notification
17:19:42 INFO - 580 INFO waitForDocLoadAndStopIt: Waiting for URL: http://localhost/
17:19:42 INFO - 581 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | Pref should have the correct state.
17:19:42 INFO - 582 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 583 INFO waitForDocLoadAndStopIt: Waiting for URL: http://localhost/
17:19:42 INFO - 584 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 585 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | We are expecting to not get a notification
17:19:42 INFO - 586 INFO Leaving test test_navigate_single_host
17:19:42 INFO - 587 INFO Entering test test_navigate_single_host
17:19:42 INFO - 588 INFO waitForDocLoadAndStopIt: Waiting for URL: https://www.google.com/search?q=localhost.&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:42 INFO - 589 INFO Waiting for keyword-uri-fixup notification
17:19:42 INFO - 590 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 591 INFO Saw the notification
17:19:42 INFO - 592 INFO waitForDocLoadAndStopIt: Waiting for URL: http://localhost./
17:19:42 INFO - 593 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | Pref should have the correct state.
17:19:42 INFO - 594 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 595 INFO waitForDocLoadAndStopIt: Waiting for URL: http://localhost./
17:19:42 INFO - 596 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 597 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | We are expecting to not get a notification
17:19:42 INFO - 598 INFO Leaving test test_navigate_single_host
17:19:42 INFO - 599 INFO Entering test test_navigate_single_host
17:19:42 INFO - 600 INFO waitForDocLoadAndStopIt: Waiting for URL: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:42 INFO - 601 INFO Waiting for keyword-uri-fixup notification
17:19:42 INFO - 602 INFO Console message: [JavaScript Warning: "Key event not available on some keyboard layouts: key="c" modifiers="accel,alt"" {file: "chrome://mochikit/content/tests/SimpleTest/specialpowersAPI.js" line: 153}]
17:19:42 INFO - 603 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 604 INFO Saw the notification
17:19:42 INFO - 605 INFO waitForDocLoadAndStopIt: Waiting for URL: http://localhost/
17:19:42 INFO - 606 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | Pref should have the correct state.
17:19:42 INFO - 607 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 608 INFO waitForDocLoadAndStopIt: Waiting for URL: https://www.google.com/search?q=localhost&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:42 INFO - 609 INFO Waiting for keyword-uri-fixup notification
17:19:42 INFO - 610 INFO TEST-PASS | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | waitForDocLoadAndStopIt: The expected URL was loaded
17:19:42 INFO - 611 INFO Saw the notification
17:19:42 INFO - 612 INFO Waiting for private window to close
17:19:42 INFO - 613 INFO Waiting for focus
17:19:42 INFO - 614 INFO must wait for focus
17:19:42 INFO - 615 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | A promise chain failed to handle a rejection: - at chrome://browser/content/tabbrowser.xml:5330 - TypeError: gBrowser._cancelTabSwitch is not a function
17:19:42 INFO - Stack trace:
17:19:42 INFO - set_selectedIndex/<@chrome://browser/content/tabbrowser.xml:5330:13
17:19:42 INFO - Handler.prototype.process@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:871:21
17:19:42 INFO - this.PromiseWalker.walkerLoop@resource://gre/modules/Promise.jsm -> resource://gre/modules/Promise-backend.js:747:7
17:19:42 INFO - Tester_execTest@chrome://mochikit/content/browser-test.js:645:9
17:19:42 INFO - Tester.prototype.nextTest</<@chrome://mochikit/content/browser-test.js:571:7
17:19:42 INFO - SimpleTest.waitForFocus/maybeRunTests/<@chrome://mochikit/content/tests/SimpleTest/SimpleTest.js:683:49
17:19:42 INFO - waitForDocLoadAndStopIt: onStateChange 10010: about:blank
17:19:42 INFO - waitForDocLoadAndStopIt: onStateChange 20010: about:blank
17:19:42 INFO - waitForDocLoadAndStopIt: onStateChange c0010: about:blank
17:19:42 INFO - waitForDocLoadAndStopIt: onStateChange f0001: https://www.google.com/search?q=mozilla+is+awesome&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:42 INFO - waitForDocLoadAndStopIt: Document start: https://www.google.com/search?q=mozilla+is+awesome&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:unofficial&client=firefox-a&channel=fflb
17:19:43 INFO - 616 INFO TEST-OK | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | took 8511ms
17:19:43 INFO - 617 INFO TEST-START | chrome://mochitests/content/browser/browser/base/content/test/general/browser_utilityOverlay.js
submit_timestamp: 2014-11-04T18:45:40
log: https://treeherder.mozilla.org/ui/logviewer.html#?repo=fx-team&job_id=1093323
repository: fx-team
who: wkocher[at]mozilla[dot]com
machine: tst-linux32-spot-1032
buildname: Ubuntu VM 12.04 fx-team opt test mochitest-e10s-browser-chrome-1
revision: 023181d2f84b

615 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | A promise chain failed to handle a rejection:  - at chrome://browser/content/tabbrowser.xml:5330 - TypeError: gBrowser._cancelTabSwitch is not a function
submit_timestamp: 2014-11-04T18:45:59
log: https://treeherder.mozilla.org/ui/logviewer.html#?repo=fx-team&job_id=1093541
repository: fx-team
who: wkocher[at]mozilla[dot]com
machine: tst-linux64-spot-1216
buildname: Ubuntu VM 12.04 x64 fx-team opt test mochitest-e10s-browser-chrome-1
revision: ee0f03650a55

614 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | A promise chain failed to handle a rejection:  - at chrome://browser/content/tabbrowser.xml:5330 - TypeError: gBrowser._cancelTabSwitch is not a function
submit_timestamp: 2014-11-04T18:45:59
log: https://treeherder.mozilla.org/ui/logviewer.html#?repo=fx-team&job_id=1094659
repository: fx-team
who: wkocher[at]mozilla[dot]com
machine: tst-linux64-spot-104
buildname: Ubuntu VM 12.04 x64 fx-team opt test mochitest-e10s-browser-chrome-1
revision: fb9269729f51

630 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_parsable_script.js | Script error reading jar:file:///builds/slave/test/build/application/firefox/browser/omni.ja!/modules/devtools/framework/toolbox-process-window.js: SyntaxError: illegal character -
731 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_parsable_script.js | There should be 0 parsing errors - Got 1, expected 0
submit_timestamp: 2014-11-04T18:45:59
log: https://treeherder.mozilla.org/ui/logviewer.html#?repo=fx-team&job_id=1093991
repository: fx-team
who: wkocher[at]mozilla[dot]com
machine: tst-linux64-spot-068
buildname: Ubuntu VM 12.04 x64 fx-team opt test mochitest-e10s-browser-chrome-1
revision: 6affd0c19f6b

614 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | A promise chain failed to handle a rejection:  - at chrome://browser/content/tabbrowser.xml:5330 - TypeError: gBrowser._cancelTabSwitch is not a function
submit_timestamp: 2014-11-04T18:45:59
log: https://treeherder.mozilla.org/ui/logviewer.html#?repo=fx-team&job_id=1094637
repository: fx-team
who: wkocher[at]mozilla[dot]com
machine: tst-linux32-spot-110
buildname: Ubuntu VM 12.04 fx-team opt test mochitest-e10s-browser-chrome-1
revision: fb9269729f51

630 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_parsable_script.js | Script error reading jar:file:///builds/slave/test/build/application/firefox/browser/omni.ja!/modules/devtools/framework/toolbox-process-window.js: SyntaxError: illegal character -
731 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_parsable_script.js | There should be 0 parsing errors - Got 1, expected 0
Actually, this test was reenabled on e10s in bug 1080801...
submit_timestamp: 2014-11-04T23:10:44
log: https://treeherder.mozilla.org/ui/logviewer.html#?repo=fx-team&job_id=1098116
repository: fx-team
who: tomcat[at]mozilla[dot]com
machine: tst-linux64-spot-1204
buildname: Ubuntu VM 12.04 x64 fx-team opt test mochitest-e10s-browser-chrome-1
revision: 02fd2ca11bfc

615 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_urlbarSearchSingleWordNotification.js | A promise chain failed to handle a rejection:  - at chrome://browser/content/tabbrowser.xml:5330 - TypeError: gBrowser._cancelTabSwitch is not a function
(In reply to Wes Kocher (:KWierso) from comment #6)
> Actually, this test was reenabled on e10s in bug 1080801...

Yup. Looking.
(In reply to TBPL Robot from comment #3)
> submit_timestamp: 2014-11-04T18:45:59
> log:
> https://treeherder.mozilla.org/ui/logviewer.html#?repo=fx-team&job_id=1094659
> repository: fx-team
> who: wkocher[at]mozilla[dot]com
> machine: tst-linux64-spot-104
> buildname: Ubuntu VM 12.04 x64 fx-team opt test
> mochitest-e10s-browser-chrome-1
> revision: fb9269729f51
> 
> 630 INFO TEST-UNEXPECTED-FAIL |
> chrome://mochitests/content/browser/browser/base/content/test/general/
> browser_parsable_script.js | Script error reading
> jar:file:///builds/slave/test/build/application/firefox/browser/omni.ja!/
> modules/devtools/framework/toolbox-process-window.js: SyntaxError: illegal
> character -
> 731 INFO TEST-UNEXPECTED-FAIL |
> chrome://mochitests/content/browser/browser/base/content/test/general/
> browser_parsable_script.js | There should be 0 parsing errors - Got 1,
> expected 0

Mis-star?
Mike, it looks like this code in tabbrowser.xml is just running too late or something:

http://hg.mozilla.org/mozilla-central/annotate/62990ec7ad78/browser/base/content/tabbrowser.xml#l5356

because it looks like we're hitting the error handler there and then that itself produces an error, presumably because the binding on gBrowser has been torn down and so the XBL-defined method on it is now officially dead.

Do we have a way of debugging this? I can't reproduce this locally, am I OK to lump a bit of Cu.reportError in there? Right now the error reported isn't used ( ()=> rather than (err) => /* do something with err), and so it's basically impossible to tell what went wrong...
(re-disabled because this seems to happen fairly frequently and the sherriffs have better things to do)

remote:   https://hg.mozilla.org/integration/fx-team/rev/782f739ec63e


would like to push to investigate this (on try, I guess?) and re-enable, though. :-)

(leaving needinfo because I'd still like input from you, Mike, esp. as a very similar error has caused all of the panorama tests to be disabled, so I think we should figure out what's up here, and am hopeful you have clues!)
https://hg.mozilla.org/mozilla-central/rev/782f739ec63e
(In reply to :Gijs Kruitbosch from comment #11)
> (re-disabled because this seems to happen fairly frequently and the
> sherriffs have better things to do)
> 
> remote:   https://hg.mozilla.org/integration/fx-team/rev/782f739ec63e
> 
> 
> would like to push to investigate this (on try, I guess?) and re-enable,
> though. :-)
> 
> (leaving needinfo because I'd still like input from you, Mike, esp. as a
> very similar error has caused all of the panorama tests to be disabled, so I
> think we should figure out what's up here, and am hopeful you have clues!)

I think you're right - we're tearing down the tabbrowser binding before the MozAfterRemotePaint event or timeout fires.

I wonder if it's as simple as stashing the timeout id for the timeout in _prepareForTabSwitch, and clearing that timeout in the destructor for the binding if it exists?
(In reply to Mike Conley (:mconley) - Needinfo me! from comment #13)
> (In reply to :Gijs Kruitbosch from comment #11)
> > (re-disabled because this seems to happen fairly frequently and the
> > sherriffs have better things to do)
> > 
> > remote:   https://hg.mozilla.org/integration/fx-team/rev/782f739ec63e
> > 
> > 
> > would like to push to investigate this (on try, I guess?) and re-enable,
> > though. :-)
> > 
> > (leaving needinfo because I'd still like input from you, Mike, esp. as a
> > very similar error has caused all of the panorama tests to be disabled, so I
> > think we should figure out what's up here, and am hopeful you have clues!)
> 
> I think you're right - we're tearing down the tabbrowser binding before the
> MozAfterRemotePaint event or timeout fires.
> 
> I wonder if it's as simple as stashing the timeout id for the timeout in
> _prepareForTabSwitch, and clearing that timeout in the destructor for the
> binding if it exists?

SGTM in theory, although in practice XBL destructors may not fire reliably? In any case, it'd need to be an expando rather than a field though, or that'll also go away when we destroy the binding...

Alternatively, we can nullcheck the method when this thing fires and just no-op if it's gone?
(In reply to :Gijs Kruitbosch from comment #14)
> (In reply to Mike Conley (:mconley) - Needinfo me! from comment #13)
> > (In reply to :Gijs Kruitbosch from comment #11)
> > > (re-disabled because this seems to happen fairly frequently and the
> > > sherriffs have better things to do)
> > > 
> > > remote:   https://hg.mozilla.org/integration/fx-team/rev/782f739ec63e
> > > 
> > > 
> > > would like to push to investigate this (on try, I guess?) and re-enable,
> > > though. :-)
> > > 
> > > (leaving needinfo because I'd still like input from you, Mike, esp. as a
> > > very similar error has caused all of the panorama tests to be disabled, so I
> > > think we should figure out what's up here, and am hopeful you have clues!)
> > 
> > I think you're right - we're tearing down the tabbrowser binding before the
> > MozAfterRemotePaint event or timeout fires.
> > 
> > I wonder if it's as simple as stashing the timeout id for the timeout in
> > _prepareForTabSwitch, and clearing that timeout in the destructor for the
> > binding if it exists?
> 
> SGTM in theory, although in practice XBL destructors may not fire reliably?
> In any case, it'd need to be an expando rather than a field though, or
> that'll also go away when we destroy the binding...
> 
> Alternatively, we can nullcheck the method when this thing fires and just
> no-op if it's gone?

Yeah, I think that might be simpler.
Created attachment 8522290
check before cancelling the tab switch,

https://treeherder.mozilla.org/ui/#/jobs?repo=try&revision=04e0410bcfe7
fwiw, try was green even after numerous retriggers.
Comment on attachment 8522290
check before cancelling the tab switch,

Review of attachment 8522290:
-----------------------------------------------------------------

Thanks Gijs!
https://hg.mozilla.org/integration/fx-team/rev/469adc9556c0
https://hg.mozilla.org/mozilla-central/rev/469adc9556c0


Intermittent browser_urlbarSearchSingleWordNotification.js | A promise chain failed to handle a rejection: - at tabbrowser.xml:5330 - TypeError: gBrowser._cancelTabSwitch is not a function

intermittent-failure

Bug 1093997 / bug 1080801 - re-disable browser_urlbarSearchSingleWordNotification.js for intermittently failing in e10s, rs=test-disabling 

Bug 1093997 - check before cancelling the tab switch, r=mconley 