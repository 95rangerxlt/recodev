STR:
- Change MOZ_DEVTOOLS to none in browser/confvars.sh (which would match other hypothetical apps doing the same)

Expected result:
- A successful build.

Actual result:
 0:05.93 make[2]: Entering directory '/home/glandium/build/obj-x86_64-unknown-linux-gnu/ipc/ipdl'
 0:05.93 /home/glandium/build/obj-x86_64-unknown-linux-gnu/_virtualenv/bin/python /home/glandium/gecko/config/pythonpath.py \
 0:05.93   -I/home/glandium/gecko/other-licenses/ply \
 0:05.93   /home/glandium/gecko/ipc/ipdl/ipdl.py \
 0:05.93   --outheaders-dir=_ipdlheaders \
 0:05.93   --outcpp-dir=. \
 0:05.93   -I/home/glandium/gecko/accessible/ipc -I/home/glandium/gecko/dom/asmjscache -I/home/glandium/gecko/dom/bluetooth/ipc -I/home/glandium/gecko/dom/broadcastchannel -I/home/glandium/gecko/dom/cache -I/home/glandium/gecko/dom/cellbroadcast/ipc -I/home/glandium/gecko/dom/devicestorage -I/home/glandium/gecko/dom/fetch -I/home/glandium/gecko/dom/filehandle -I/home/glandium/gecko/dom/filesystem -I/home/glandium/gecko/dom/fmradio/ipc -I/home/glandium/gecko/dom/icc/ipc -I/home/glandium/gecko/dom/indexedDB -I/home/glandium/gecko/dom/ipc -I/home/glandium/gecko/dom/media/gmp -I/home/glandium/gecko/dom/media/systemservices -I/home/glandium/gecko/dom/media/webrtc -I/home/glandium/gecko/dom/media/webspeech/synth/ipc -I/home/glandium/gecko/dom/messagechannel -I/home/glandium/gecko/dom/mobileconnection/ipc -I/home/glandium/gecko/dom/mobilemessage/ipc -I/home/glandium/gecko/dom/network -I/home/glandium/gecko/dom/plugins/ipc -I/home/glandium/gecko/dom/presentation/ipc -I/home/glandium/gecko/dom/storage -I/home/glandium/gecko/dom/telephony/ipc -I/home/glandium/gecko/dom/voicemail/ipc -I/home/glandium/gecko/dom/workers -I/home/glandium/gecko/embedding/components/printingui/ipc -I/home/glandium/gecko/embedding/components/webbrowserpersist -I/home/glandium/gecko/extensions/spellcheck/hunspell/glue -I/home/glandium/gecko/gfx/ipc -I/home/glandium/gecko/gfx/layers/ipc -I/home/glandium/gecko/hal/sandbox -I/home/glandium/gecko/ipc/glue -I/home/glandium/gecko/ipc/testshell -I/home/glandium/gecko/js/ipc -I/home/glandium/gecko/layout/ipc -I/home/glandium/gecko/netwerk/cookie -I/home/glandium/gecko/netwerk/dns -I/home/glandium/gecko/netwerk/ipc -I/home/glandium/gecko/netwerk/protocol/ftp -I/home/glandium/gecko/netwerk/protocol/http -I/home/glandium/gecko/netwerk/protocol/websocket -I/home/glandium/gecko/netwerk/protocol/wyciwyg -I/home/glandium/gecko/security/manager/ssl -I/home/glandium/gecko/uriloader/exthandler -I/home/glandium/gecko/uriloader/prefetch \
 0:05.93   /home/glandium/gecko/accessible/ipc/PDocAccessible.ipdl /home/glandium/gecko/dom/asmjscache/PAsmJSCacheEntry.ipdl /home/glandium/gecko/dom/bluetooth/ipc/BluetoothTypes.ipdlh /home/glandium/gecko/dom/bluetooth/ipc/PBluetooth.ipdl /home/glandium/gecko/dom/bluetooth/ipc/PBluetoothRequest.ipdl /home/glandium/gecko/dom/broadcastchannel/PBroadcastChannel.ipdl /home/glandium/gecko/dom/cache/CacheTypes.ipdlh /home/glandium/gecko/dom/cache/PCache.ipdl /home/glandium/gecko/dom/cache/PCacheOp.ipdl /home/glandium/gecko/dom/cache/PCachePushStream.ipdl /home/glandium/gecko/dom/cache/PCacheStorage.ipdl /home/glandium/gecko/dom/cache/PCacheStreamControl.ipdl /home/glandium/gecko/dom/cellbroadcast/ipc/PCellBroadcast.ipdl /home/glandium/gecko/dom/devicestorage/PDeviceStorageRequest.ipdl /home/glandium/gecko/dom/fetch/ChannelInfo.ipdlh /home/glandium/gecko/dom/filehandle/PBackgroundFileHandle.ipdl /home/glandium/gecko/dom/filehandle/PBackgroundFileRequest.ipdl /home/glandium/gecko/dom/filehandle/PBackgroundMutableFile.ipdl /home/glandium/gecko/dom/filesystem/PFileSystemRequest.ipdl /home/glandium/gecko/dom/fmradio/ipc/PFMRadio.ipdl /home/glandium/gecko/dom/fmradio/ipc/PFMRadioRequest.ipdl /home/glandium/gecko/dom/icc/ipc/PIcc.ipdl /home/glandium/gecko/dom/icc/ipc/PIccRequest.ipdl /home/glandium/gecko/dom/icc/ipc/PIccTypes.ipdlh /home/glandium/gecko/dom/indexedDB/PBackgroundIDBCursor.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBDatabase.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBDatabaseFile.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBDatabaseRequest.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBFactory.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBFactoryRequest.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBRequest.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBSharedTypes.ipdlh /home/glandium/gecko/dom/indexedDB/PBackgroundIDBTransaction.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBVersionChangeTransaction.ipdl /home/glandium/gecko/dom/indexedDB/PIndexedDBPermissionRequest.ipdl /home/glandium/gecko/dom/ipc/BrowserConfiguration.ipdlh /home/glandium/gecko/dom/ipc/DOMTypes.ipdlh /home/glandium/gecko/dom/ipc/PBlob.ipdl /home/glandium/gecko/dom/ipc/PBlobStream.ipdl /home/glandium/gecko/dom/ipc/PBrowser.ipdl /home/glandium/gecko/dom/ipc/PBrowserOrId.ipdlh /home/glandium/gecko/dom/ipc/PColorPicker.ipdl /home/glandium/gecko/dom/ipc/PContent.ipdl /home/glandium/gecko/dom/ipc/PContentBridge.ipdl /home/glandium/gecko/dom/ipc/PContentPermission.ipdlh /home/glandium/gecko/dom/ipc/PContentPermissionRequest.ipdl /home/glandium/gecko/dom/ipc/PCrashReporter.ipdl /home/glandium/gecko/dom/ipc/PCycleCollectWithLogs.ipdl /home/glandium/gecko/dom/ipc/PDocumentRenderer.ipdl /home/glandium/gecko/dom/ipc/PFilePicker.ipdl /home/glandium/gecko/dom/ipc/PMemoryReportRequest.ipdl /home/glandium/gecko/dom/ipc/PNuwa.ipdl /home/glandium/gecko/dom/ipc/PPluginWidget.ipdl /home/glandium/gecko/dom/ipc/PProcessHangMonitor.ipdl /home/glandium/gecko/dom/ipc/PScreenManager.ipdl /home/glandium/gecko/dom/ipc/PTabContext.ipdlh /home/glandium/gecko/dom/media/gmp/GMPTypes.ipdlh /home/glandium/gecko/dom/media/gmp/PGMP.ipdl /home/glandium/gecko/dom/media/gmp/PGMPAudioDecoder.ipdl /home/glandium/gecko/dom/media/gmp/PGMPContent.ipdl /home/glandium/gecko/dom/media/gmp/PGMPDecryptor.ipdl /home/glandium/gecko/dom/media/gmp/PGMPService.ipdl /home/glandium/gecko/dom/media/gmp/PGMPStorage.ipdl /home/glandium/gecko/dom/media/gmp/PGMPTimer.ipdl /home/glandium/gecko/dom/media/gmp/PGMPVideoDecoder.ipdl /home/glandium/gecko/dom/media/gmp/PGMPVideoEncoder.ipdl /home/glandium/gecko/dom/media/systemservices/PCameras.ipdl /home/glandium/gecko/dom/media/systemservices/PMedia.ipdl /home/glandium/gecko/dom/media/systemservices/PMediaSystemResourceManager.ipdl /home/glandium/gecko/dom/media/webrtc/PWebrtcGlobal.ipdl /home/glandium/gecko/dom/media/webspeech/synth/ipc/PSpeechSynthesis.ipdl /home/glandium/gecko/dom/media/webspeech/synth/ipc/PSpeechSynthesisRequest.ipdl /home/glandium/gecko/dom/messagechannel/PMessagePort.ipdl /home/glandium/gecko/dom/mobileconnection/ipc/PMobileConnection.ipdl /home/glandium/gecko/dom/mobileconnection/ipc/PMobileConnectionRequest.ipdl /home/glandium/gecko/dom/mobileconnection/ipc/PMobileConnectionTypes.ipdlh /home/glandium/gecko/dom/mobilemessage/ipc/PMobileMessageCursor.ipdl /home/glandium/gecko/dom/mobilemessage/ipc/PSms.ipdl /home/glandium/gecko/dom/mobilemessage/ipc/PSmsRequest.ipdl /home/glandium/gecko/dom/mobilemessage/ipc/SmsTypes.ipdlh /home/glandium/gecko/dom/network/PTCPServerSocket.ipdl /home/glandium/gecko/dom/network/PTCPSocket.ipdl /home/glandium/gecko/dom/network/PUDPSocket.ipdl /home/glandium/gecko/dom/plugins/ipc/PBrowserStream.ipdl /home/glandium/gecko/dom/plugins/ipc/PPluginBackgroundDestroyer.ipdl /home/glandium/gecko/dom/plugins/ipc/PPluginInstance.ipdl /home/glandium/gecko/dom/plugins/ipc/PPluginModule.ipdl /home/glandium/gecko/dom/plugins/ipc/PPluginScriptableObject.ipdl /home/glandium/gecko/dom/plugins/ipc/PPluginStream.ipdl /home/glandium/gecko/dom/plugins/ipc/PPluginSurface.ipdl /home/glandium/gecko/dom/plugins/ipc/PStreamNotify.ipdl /home/glandium/gecko/dom/plugins/ipc/PluginTypes.ipdlh /home/glandium/gecko/dom/presentation/ipc/PPresentation.ipdl /home/glandium/gecko/dom/presentation/ipc/PPresentationRequest.ipdl /home/glandium/gecko/dom/storage/PStorage.ipdl /home/glandium/gecko/dom/telephony/ipc/PTelephony.ipdl /home/glandium/gecko/dom/telephony/ipc/PTelephonyRequest.ipdl /home/glandium/gecko/dom/telephony/ipc/TelephonyTypes.ipdlh /home/glandium/gecko/dom/voicemail/ipc/PVoicemail.ipdl /home/glandium/gecko/dom/workers/PServiceWorkerManager.ipdl /home/glandium/gecko/dom/workers/ServiceWorkerRegistrarTypes.ipdlh /home/glandium/gecko/embedding/components/printingui/ipc/PPrintProgressDialog.ipdl /home/glandium/gecko/embedding/components/printingui/ipc/PPrintSettingsDialog.ipdl /home/glandium/gecko/embedding/components/printingui/ipc/PPrinting.ipdl /home/glandium/gecko/embedding/components/printingui/ipc/PPrintingTypes.ipdlh /home/glandium/gecko/embedding/components/webbrowserpersist/PWebBrowserPersistDocument.ipdl /home/glandium/gecko/embedding/components/webbrowserpersist/PWebBrowserPersistResources.ipdl /home/glandium/gecko/embedding/components/webbrowserpersist/PWebBrowserPersistSerialize.ipdl /home/glandium/gecko/extensions/spellcheck/hunspell/glue/PRemoteSpellcheckEngine.ipdl /home/glandium/gecko/gfx/ipc/GraphicsMessages.ipdlh /home/glandium/gecko/gfx/layers/ipc/LayersMessages.ipdlh /home/glandium/gecko/gfx/layers/ipc/LayersSurfaces.ipdlh /home/glandium/gecko/gfx/layers/ipc/PCompositable.ipdl /home/glandium/gecko/gfx/layers/ipc/PCompositor.ipdl /home/glandium/gecko/gfx/layers/ipc/PImageBridge.ipdl /home/glandium/gecko/gfx/layers/ipc/PImageContainer.ipdl /home/glandium/gecko/gfx/layers/ipc/PLayer.ipdl /home/glandium/gecko/gfx/layers/ipc/PLayerTransaction.ipdl /home/glandium/gecko/gfx/layers/ipc/PSharedBufferManager.ipdl /home/glandium/gecko/gfx/layers/ipc/PTexture.ipdl /home/glandium/gecko/hal/sandbox/PHal.ipdl /home/glandium/gecko/ipc/glue/InputStreamParams.ipdlh /home/glandium/gecko/ipc/glue/PBackground.ipdl /home/glandium/gecko/ipc/glue/PBackgroundSharedTypes.ipdlh /home/glandium/gecko/ipc/glue/PBackgroundTest.ipdl /home/glandium/gecko/ipc/glue/PFileDescriptorSet.ipdl /home/glandium/gecko/ipc/glue/PProcLoader.ipdl /home/glandium/gecko/ipc/glue/ProtocolTypes.ipdlh /home/glandium/gecko/ipc/glue/URIParams.ipdlh /home/glandium/gecko/ipc/testshell/PTestShell.ipdl /home/glandium/gecko/ipc/testshell/PTestShellCommand.ipdl /home/glandium/gecko/js/ipc/JavaScriptTypes.ipdlh /home/glandium/gecko/js/ipc/PJavaScript.ipdl /home/glandium/gecko/layout/ipc/PRenderFrame.ipdl /home/glandium/gecko/layout/ipc/PVsync.ipdl /home/glandium/gecko/netwerk/cookie/PCookieService.ipdl /home/glandium/gecko/netwerk/dns/PDNSRequest.ipdl /home/glandium/gecko/netwerk/dns/PDNSRequestParams.ipdlh /home/glandium/gecko/netwerk/ipc/NeckoChannelParams.ipdlh /home/glandium/gecko/netwerk/ipc/PChannelDiverter.ipdl /home/glandium/gecko/netwerk/ipc/PDataChannel.ipdl /home/glandium/gecko/netwerk/ipc/PNecko.ipdl /home/glandium/gecko/netwerk/ipc/PRemoteOpenFile.ipdl /home/glandium/gecko/netwerk/ipc/PRtspChannel.ipdl /home/glandium/gecko/netwerk/ipc/PRtspController.ipdl /home/glandium/gecko/netwerk/protocol/ftp/PFTPChannel.ipdl /home/glandium/gecko/netwerk/protocol/http/PHttpChannel.ipdl /home/glandium/gecko/netwerk/protocol/websocket/PWebSocket.ipdl /home/glandium/gecko/netwerk/protocol/wyciwyg/PWyciwygChannel.ipdl /home/glandium/gecko/security/manager/ssl/PPSMContentDownloader.ipdl /home/glandium/gecko/uriloader/exthandler/PExternalHelperApp.ipdl /home/glandium/gecko/uriloader/prefetch/POfflineCacheUpdate.ipdl
 0:08.54   in file included from `/home/glandium/gecko/accessible/ipc/PDocAccessible.ipdl', line 7:
 0:08.54   in file included from `/home/glandium/gecko/ipc/glue/PFileDescriptorSet.ipdl', line 5:
 0:08.54   in file included from `/home/glandium/gecko/ipc/glue/PBackground.ipdl', line 6:
 0:08.54   in file included from `/home/glandium/gecko/dom/indexedDB/PBackgroundIDBFactory.ipdl', line 6:
 0:08.54   in file included from `/home/glandium/gecko/dom/indexedDB/PBackgroundIDBDatabase.ipdl', line 6:
 0:08.54   in file included from `/home/glandium/gecko/dom/indexedDB/PBackgroundIDBDatabaseRequest.ipdl', line 6:
 0:08.54   in file included from `/home/glandium/gecko/dom/filehandle/PBackgroundMutableFile.ipdl', line 5:
 0:08.54   in file included from `/home/glandium/gecko/dom/filehandle/PBackgroundFileHandle.ipdl', line 5:
 0:08.54   in file included from `/home/glandium/gecko/dom/filehandle/PBackgroundFileRequest.ipdl', line 6:
 0:08.54   in file included from `/home/glandium/gecko/dom/ipc/PBlob.ipdl', line 7:
 0:08.54 /home/glandium/gecko/dom/ipc/PContent.ipdl:24: error: can't locate include file `PHeapSnapshotTempFileHelper.ipdl'
 0:09.30 Traceback (most recent call last):
 0:09.30   File "/home/glandium/gecko/config/pythonpath.py", line 56, in <module>
 0:09.30     main(sys.argv[1:])
 0:09.30   File "/home/glandium/gecko/config/pythonpath.py", line 48, in main
 0:09.30     execfile(script, frozenglobals)
 0:09.30   File "/home/glandium/gecko/ipc/ipdl/ipdl.py", line 132, in <module>
 0:09.30     if not ipdl.typecheck(ast):
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/__init__.py", line 35, in typecheck
 0:09.31     return TypeCheck().check(ast, errout)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 616, in check
 0:09.31     if not runpass(GatherDecls(builtinUsing, self.errors)):
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 608, in runpass
 0:09.31     tu.accept(tcheckpass)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.32     inc.tu.accept(self)
 0:09.32   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.32     return visit(self)
 0:09.32   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 731, in visitTranslationUnit
 0:09.32     if inc.tu.filetype == 'header':
 0:09.32 AttributeError: 'NoneType' object has no attribute 'filetype'
 0:09.44 Makefile:24: recipe for target 'export' failed
 0:09.44 make[2]: *** [export] Error 1
 0:09.44 make[2]: Leaving directory '/home/glandium/build/obj-x86_64-unknown-linux-gnu/ipc/ipdl'
 0:09.44 /home/glandium/gecko/config/recurse.mk:79: recipe for target 'ipc/ipdl/export' failed
 0:09.44 make[1]: *** [ipc/ipdl/export] Error 2
 0:09.44 make[1]: Leaving directory '/home/glandium/build/obj-x86_64-unknown-linux-gnu'
 0:09.44 /home/glandium/gecko/config/recurse.mk:32: recipe for target 'export' failed
 0:09.44 make: *** [export] Error 2
 0:09.48 ccache (direct) hit rate: 0.0%; (preprocessed) hit rate: 0.0%; miss rate: 0.0%

Either we should remove the MOZ_DEVTOOLS=none option, or we should make it actually work. Ryan, what do you think?

Note this was noticed on Thunderbird/Seamonkey because they're not including the devtools directory yet, which is equivalent to MOZ_DEVTOOLS=none with the devtools directory included.

STR:
- Change MOZ_DEVTOOLS to none in browser/confvars.sh (which would match other hypothetical apps doing the same)

Expected result:
- A successful build.

Actual result:
 0:05.93 make[2]: Entering directory '/home/glandium/build/obj-x86_64-unknown-linux-gnu/ipc/ipdl'
 0:05.93 /home/glandium/build/obj-x86_64-unknown-linux-gnu/_virtualenv/bin/python /home/glandium/gecko/config/pythonpath.py \
 0:05.93   -I/home/glandium/gecko/other-licenses/ply \
 0:05.93   /home/glandium/gecko/ipc/ipdl/ipdl.py \
 0:05.93   --outheaders-dir=_ipdlheaders \
 0:05.93   --outcpp-dir=. \
 0:05.93   -I/home/glandium/gecko/accessible/ipc -I/home/glandium/gecko/dom/asmjscache -I/home/glandium/gecko/dom/bluetooth/ipc -I/home/glandium/gecko/dom/broadcastchannel -I/home/glandium/gecko/dom/cache -I/home/glandium/gecko/dom/cellbroadcast/ipc -I/home/glandium/gecko/dom/devicestorage -I/home/glandium/gecko/dom/fetch -I/home/glandium/gecko/dom/filehandle -I/home/glandium/gecko/dom/filesystem -I/home/glandium/gecko/dom/fmradio/ipc -I/home/glandium/gecko/dom/icc/ipc -I/home/glandium/gecko/dom/indexedDB -I/home/glandium/gecko/dom/ipc -I/home/glandium/gecko/dom/media/gmp -I/home/glandium/gecko/dom/media/systemservices -I/home/glandium/gecko/dom/media/webrtc -I/home/glandium/gecko/dom/media/webspeech/synth/ipc -I/home/glandium/gecko/dom/messagechannel -I/home/glandium/gecko/dom/mobileconnection/ipc -I/home/glandium/gecko/dom/mobilemessage/ipc -I/home/glandium/gecko/dom/network -I/home/glandium/gecko/dom/plugins/ipc -I/home/glandium/gecko/dom/presentation/ipc -I/home/glandium/gecko/dom/storage -I/home/glandium/gecko/dom/telephony/ipc -I/home/glandium/gecko/dom/voicemail/ipc -I/home/glandium/gecko/dom/workers -I/home/glandium/gecko/embedding/components/printingui/ipc -I/home/glandium/gecko/embedding/components/webbrowserpersist -I/home/glandium/gecko/extensions/spellcheck/hunspell/glue -I/home/glandium/gecko/gfx/ipc -I/home/glandium/gecko/gfx/layers/ipc -I/home/glandium/gecko/hal/sandbox -I/home/glandium/gecko/ipc/glue -I/home/glandium/gecko/ipc/testshell -I/home/glandium/gecko/js/ipc -I/home/glandium/gecko/layout/ipc -I/home/glandium/gecko/netwerk/cookie -I/home/glandium/gecko/netwerk/dns -I/home/glandium/gecko/netwerk/ipc -I/home/glandium/gecko/netwerk/protocol/ftp -I/home/glandium/gecko/netwerk/protocol/http -I/home/glandium/gecko/netwerk/protocol/websocket -I/home/glandium/gecko/netwerk/protocol/wyciwyg -I/home/glandium/gecko/security/manager/ssl -I/home/glandium/gecko/uriloader/exthandler -I/home/glandium/gecko/uriloader/prefetch \
 0:05.93   /home/glandium/gecko/accessible/ipc/PDocAccessible.ipdl /home/glandium/gecko/dom/asmjscache/PAsmJSCacheEntry.ipdl /home/glandium/gecko/dom/bluetooth/ipc/BluetoothTypes.ipdlh /home/glandium/gecko/dom/bluetooth/ipc/PBluetooth.ipdl /home/glandium/gecko/dom/bluetooth/ipc/PBluetoothRequest.ipdl /home/glandium/gecko/dom/broadcastchannel/PBroadcastChannel.ipdl /home/glandium/gecko/dom/cache/CacheTypes.ipdlh /home/glandium/gecko/dom/cache/PCache.ipdl /home/glandium/gecko/dom/cache/PCacheOp.ipdl /home/glandium/gecko/dom/cache/PCachePushStream.ipdl /home/glandium/gecko/dom/cache/PCacheStorage.ipdl /home/glandium/gecko/dom/cache/PCacheStreamControl.ipdl /home/glandium/gecko/dom/cellbroadcast/ipc/PCellBroadcast.ipdl /home/glandium/gecko/dom/devicestorage/PDeviceStorageRequest.ipdl /home/glandium/gecko/dom/fetch/ChannelInfo.ipdlh /home/glandium/gecko/dom/filehandle/PBackgroundFileHandle.ipdl /home/glandium/gecko/dom/filehandle/PBackgroundFileRequest.ipdl /home/glandium/gecko/dom/filehandle/PBackgroundMutableFile.ipdl /home/glandium/gecko/dom/filesystem/PFileSystemRequest.ipdl /home/glandium/gecko/dom/fmradio/ipc/PFMRadio.ipdl /home/glandium/gecko/dom/fmradio/ipc/PFMRadioRequest.ipdl /home/glandium/gecko/dom/icc/ipc/PIcc.ipdl /home/glandium/gecko/dom/icc/ipc/PIccRequest.ipdl /home/glandium/gecko/dom/icc/ipc/PIccTypes.ipdlh /home/glandium/gecko/dom/indexedDB/PBackgroundIDBCursor.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBDatabase.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBDatabaseFile.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBDatabaseRequest.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBFactory.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBFactoryRequest.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBRequest.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBSharedTypes.ipdlh /home/glandium/gecko/dom/indexedDB/PBackgroundIDBTransaction.ipdl /home/glandium/gecko/dom/indexedDB/PBackgroundIDBVersionChangeTransaction.ipdl /home/glandium/gecko/dom/indexedDB/PIndexedDBPermissionRequest.ipdl /home/glandium/gecko/dom/ipc/BrowserConfiguration.ipdlh /home/glandium/gecko/dom/ipc/DOMTypes.ipdlh /home/glandium/gecko/dom/ipc/PBlob.ipdl /home/glandium/gecko/dom/ipc/PBlobStream.ipdl /home/glandium/gecko/dom/ipc/PBrowser.ipdl /home/glandium/gecko/dom/ipc/PBrowserOrId.ipdlh /home/glandium/gecko/dom/ipc/PColorPicker.ipdl /home/glandium/gecko/dom/ipc/PContent.ipdl /home/glandium/gecko/dom/ipc/PContentBridge.ipdl /home/glandium/gecko/dom/ipc/PContentPermission.ipdlh /home/glandium/gecko/dom/ipc/PContentPermissionRequest.ipdl /home/glandium/gecko/dom/ipc/PCrashReporter.ipdl /home/glandium/gecko/dom/ipc/PCycleCollectWithLogs.ipdl /home/glandium/gecko/dom/ipc/PDocumentRenderer.ipdl /home/glandium/gecko/dom/ipc/PFilePicker.ipdl /home/glandium/gecko/dom/ipc/PMemoryReportRequest.ipdl /home/glandium/gecko/dom/ipc/PNuwa.ipdl /home/glandium/gecko/dom/ipc/PPluginWidget.ipdl /home/glandium/gecko/dom/ipc/PProcessHangMonitor.ipdl /home/glandium/gecko/dom/ipc/PScreenManager.ipdl /home/glandium/gecko/dom/ipc/PTabContext.ipdlh /home/glandium/gecko/dom/media/gmp/GMPTypes.ipdlh /home/glandium/gecko/dom/media/gmp/PGMP.ipdl /home/glandium/gecko/dom/media/gmp/PGMPAudioDecoder.ipdl /home/glandium/gecko/dom/media/gmp/PGMPContent.ipdl /home/glandium/gecko/dom/media/gmp/PGMPDecryptor.ipdl /home/glandium/gecko/dom/media/gmp/PGMPService.ipdl /home/glandium/gecko/dom/media/gmp/PGMPStorage.ipdl /home/glandium/gecko/dom/media/gmp/PGMPTimer.ipdl /home/glandium/gecko/dom/media/gmp/PGMPVideoDecoder.ipdl /home/glandium/gecko/dom/media/gmp/PGMPVideoEncoder.ipdl /home/glandium/gecko/dom/media/systemservices/PCameras.ipdl /home/glandium/gecko/dom/media/systemservices/PMedia.ipdl /home/glandium/gecko/dom/media/systemservices/PMediaSystemResourceManager.ipdl /home/glandium/gecko/dom/media/webrtc/PWebrtcGlobal.ipdl /home/glandium/gecko/dom/media/webspeech/synth/ipc/PSpeechSynthesis.ipdl /home/glandium/gecko/dom/media/webspeech/synth/ipc/PSpeechSynthesisRequest.ipdl /home/glandium/gecko/dom/messagechannel/PMessagePort.ipdl /home/glandium/gecko/dom/mobileconnection/ipc/PMobileConnection.ipdl /home/glandium/gecko/dom/mobileconnection/ipc/PMobileConnectionRequest.ipdl /home/glandium/gecko/dom/mobileconnection/ipc/PMobileConnectionTypes.ipdlh /home/glandium/gecko/dom/mobilemessage/ipc/PMobileMessageCursor.ipdl /home/glandium/gecko/dom/mobilemessage/ipc/PSms.ipdl /home/glandium/gecko/dom/mobilemessage/ipc/PSmsRequest.ipdl /home/glandium/gecko/dom/mobilemessage/ipc/SmsTypes.ipdlh /home/glandium/gecko/dom/network/PTCPServerSocket.ipdl /home/glandium/gecko/dom/network/PTCPSocket.ipdl /home/glandium/gecko/dom/network/PUDPSocket.ipdl /home/glandium/gecko/dom/plugins/ipc/PBrowserStream.ipdl /home/glandium/gecko/dom/plugins/ipc/PPluginBackgroundDestroyer.ipdl /home/glandium/gecko/dom/plugins/ipc/PPluginInstance.ipdl /home/glandium/gecko/dom/plugins/ipc/PPluginModule.ipdl /home/glandium/gecko/dom/plugins/ipc/PPluginScriptableObject.ipdl /home/glandium/gecko/dom/plugins/ipc/PPluginStream.ipdl /home/glandium/gecko/dom/plugins/ipc/PPluginSurface.ipdl /home/glandium/gecko/dom/plugins/ipc/PStreamNotify.ipdl /home/glandium/gecko/dom/plugins/ipc/PluginTypes.ipdlh /home/glandium/gecko/dom/presentation/ipc/PPresentation.ipdl /home/glandium/gecko/dom/presentation/ipc/PPresentationRequest.ipdl /home/glandium/gecko/dom/storage/PStorage.ipdl /home/glandium/gecko/dom/telephony/ipc/PTelephony.ipdl /home/glandium/gecko/dom/telephony/ipc/PTelephonyRequest.ipdl /home/glandium/gecko/dom/telephony/ipc/TelephonyTypes.ipdlh /home/glandium/gecko/dom/voicemail/ipc/PVoicemail.ipdl /home/glandium/gecko/dom/workers/PServiceWorkerManager.ipdl /home/glandium/gecko/dom/workers/ServiceWorkerRegistrarTypes.ipdlh /home/glandium/gecko/embedding/components/printingui/ipc/PPrintProgressDialog.ipdl /home/glandium/gecko/embedding/components/printingui/ipc/PPrintSettingsDialog.ipdl /home/glandium/gecko/embedding/components/printingui/ipc/PPrinting.ipdl /home/glandium/gecko/embedding/components/printingui/ipc/PPrintingTypes.ipdlh /home/glandium/gecko/embedding/components/webbrowserpersist/PWebBrowserPersistDocument.ipdl /home/glandium/gecko/embedding/components/webbrowserpersist/PWebBrowserPersistResources.ipdl /home/glandium/gecko/embedding/components/webbrowserpersist/PWebBrowserPersistSerialize.ipdl /home/glandium/gecko/extensions/spellcheck/hunspell/glue/PRemoteSpellcheckEngine.ipdl /home/glandium/gecko/gfx/ipc/GraphicsMessages.ipdlh /home/glandium/gecko/gfx/layers/ipc/LayersMessages.ipdlh /home/glandium/gecko/gfx/layers/ipc/LayersSurfaces.ipdlh /home/glandium/gecko/gfx/layers/ipc/PCompositable.ipdl /home/glandium/gecko/gfx/layers/ipc/PCompositor.ipdl /home/glandium/gecko/gfx/layers/ipc/PImageBridge.ipdl /home/glandium/gecko/gfx/layers/ipc/PImageContainer.ipdl /home/glandium/gecko/gfx/layers/ipc/PLayer.ipdl /home/glandium/gecko/gfx/layers/ipc/PLayerTransaction.ipdl /home/glandium/gecko/gfx/layers/ipc/PSharedBufferManager.ipdl /home/glandium/gecko/gfx/layers/ipc/PTexture.ipdl /home/glandium/gecko/hal/sandbox/PHal.ipdl /home/glandium/gecko/ipc/glue/InputStreamParams.ipdlh /home/glandium/gecko/ipc/glue/PBackground.ipdl /home/glandium/gecko/ipc/glue/PBackgroundSharedTypes.ipdlh /home/glandium/gecko/ipc/glue/PBackgroundTest.ipdl /home/glandium/gecko/ipc/glue/PFileDescriptorSet.ipdl /home/glandium/gecko/ipc/glue/PProcLoader.ipdl /home/glandium/gecko/ipc/glue/ProtocolTypes.ipdlh /home/glandium/gecko/ipc/glue/URIParams.ipdlh /home/glandium/gecko/ipc/testshell/PTestShell.ipdl /home/glandium/gecko/ipc/testshell/PTestShellCommand.ipdl /home/glandium/gecko/js/ipc/JavaScriptTypes.ipdlh /home/glandium/gecko/js/ipc/PJavaScript.ipdl /home/glandium/gecko/layout/ipc/PRenderFrame.ipdl /home/glandium/gecko/layout/ipc/PVsync.ipdl /home/glandium/gecko/netwerk/cookie/PCookieService.ipdl /home/glandium/gecko/netwerk/dns/PDNSRequest.ipdl /home/glandium/gecko/netwerk/dns/PDNSRequestParams.ipdlh /home/glandium/gecko/netwerk/ipc/NeckoChannelParams.ipdlh /home/glandium/gecko/netwerk/ipc/PChannelDiverter.ipdl /home/glandium/gecko/netwerk/ipc/PDataChannel.ipdl /home/glandium/gecko/netwerk/ipc/PNecko.ipdl /home/glandium/gecko/netwerk/ipc/PRemoteOpenFile.ipdl /home/glandium/gecko/netwerk/ipc/PRtspChannel.ipdl /home/glandium/gecko/netwerk/ipc/PRtspController.ipdl /home/glandium/gecko/netwerk/protocol/ftp/PFTPChannel.ipdl /home/glandium/gecko/netwerk/protocol/http/PHttpChannel.ipdl /home/glandium/gecko/netwerk/protocol/websocket/PWebSocket.ipdl /home/glandium/gecko/netwerk/protocol/wyciwyg/PWyciwygChannel.ipdl /home/glandium/gecko/security/manager/ssl/PPSMContentDownloader.ipdl /home/glandium/gecko/uriloader/exthandler/PExternalHelperApp.ipdl /home/glandium/gecko/uriloader/prefetch/POfflineCacheUpdate.ipdl
 0:08.54   in file included from `/home/glandium/gecko/accessible/ipc/PDocAccessible.ipdl', line 7:
 0:08.54   in file included from `/home/glandium/gecko/ipc/glue/PFileDescriptorSet.ipdl', line 5:
 0:08.54   in file included from `/home/glandium/gecko/ipc/glue/PBackground.ipdl', line 6:
 0:08.54   in file included from `/home/glandium/gecko/dom/indexedDB/PBackgroundIDBFactory.ipdl', line 6:
 0:08.54   in file included from `/home/glandium/gecko/dom/indexedDB/PBackgroundIDBDatabase.ipdl', line 6:
 0:08.54   in file included from `/home/glandium/gecko/dom/indexedDB/PBackgroundIDBDatabaseRequest.ipdl', line 6:
 0:08.54   in file included from `/home/glandium/gecko/dom/filehandle/PBackgroundMutableFile.ipdl', line 5:
 0:08.54   in file included from `/home/glandium/gecko/dom/filehandle/PBackgroundFileHandle.ipdl', line 5:
 0:08.54   in file included from `/home/glandium/gecko/dom/filehandle/PBackgroundFileRequest.ipdl', line 6:
 0:08.54   in file included from `/home/glandium/gecko/dom/ipc/PBlob.ipdl', line 7:
 0:08.54 /home/glandium/gecko/dom/ipc/PContent.ipdl:24: error: can't locate include file `PHeapSnapshotTempFileHelper.ipdl'
 0:09.30 Traceback (most recent call last):
 0:09.30   File "/home/glandium/gecko/config/pythonpath.py", line 56, in <module>
 0:09.30     main(sys.argv[1:])
 0:09.30   File "/home/glandium/gecko/config/pythonpath.py", line 48, in main
 0:09.30     execfile(script, frozenglobals)
 0:09.30   File "/home/glandium/gecko/ipc/ipdl/ipdl.py", line 132, in <module>
 0:09.30     if not ipdl.typecheck(ast):
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/__init__.py", line 35, in typecheck
 0:09.31     return TypeCheck().check(ast, errout)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 616, in check
 0:09.31     if not runpass(GatherDecls(builtinUsing, self.errors)):
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 608, in runpass
 0:09.31     tu.accept(tcheckpass)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.31     inc.tu.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 714, in visitTranslationUnit
 0:09.31     pinc.accept(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.31     return visit(self)
 0:09.31   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 778, in visitInclude
 0:09.32     inc.tu.accept(self)
 0:09.32   File "/home/glandium/gecko/ipc/ipdl/ipdl/ast.py", line 139, in accept
 0:09.32     return visit(self)
 0:09.32   File "/home/glandium/gecko/ipc/ipdl/ipdl/type.py", line 731, in visitTranslationUnit
 0:09.32     if inc.tu.filetype == 'header':
 0:09.32 AttributeError: 'NoneType' object has no attribute 'filetype'
 0:09.44 Makefile:24: recipe for target 'export' failed
 0:09.44 make[2]: *** [export] Error 1
 0:09.44 make[2]: Leaving directory '/home/glandium/build/obj-x86_64-unknown-linux-gnu/ipc/ipdl'
 0:09.44 /home/glandium/gecko/config/recurse.mk:79: recipe for target 'ipc/ipdl/export' failed
 0:09.44 make[1]: *** [ipc/ipdl/export] Error 2
 0:09.44 make[1]: Leaving directory '/home/glandium/build/obj-x86_64-unknown-linux-gnu'
 0:09.44 /home/glandium/gecko/config/recurse.mk:32: recipe for target 'export' failed
 0:09.44 make: *** [export] Error 2
 0:09.48 ccache (direct) hit rate: 0.0%; (preprocessed) hit rate: 0.0%; miss rate: 0.0%

Either we should remove the MOZ_DEVTOOLS=none option, or we should make it actually work. Ryan, what do you think?

Note this was noticed on Thunderbird/Seamonkey because they're not including the devtools directory yet, which is equivalent to MOZ_DEVTOOLS=none with the devtools directory included.
Okay, I'll take a look at this.  There's also a bug about this error for each of these apps (bug 1217660, bug 1217661).

I believe Thunderbird does want at least "server" and Seamonkey may want "all" (bug 842942), so at least out of those two, I don't think there is anyone who actually **wants** "none".

That said, I'll see if it's easier to default all apps back to "server" (as it was before bug 1203159) or to make "none" work.
As far as I can tell, there's no way to optionally exclude some *.ipdl files, since there is a central file (PContent.ipdl) that references them, and there seems to be no #ifdef mechanism for such files.

So, it seems like MOZ_DEVTOOLS=none does not make sense at this time and should be removed.
(In reply to J. Ryan Stinnett [:jryans] (use ni?) from comment #1)
> That said, I'll see if it's easier to default all apps back to "server" (as
> it was before bug 1203159) or to make "none" work.

Note the default *is* server, but it requires manually adding DIRS += ['/devtools']

Maybe a reasonable way forward would be to detect the difference between "server" manually set in confvars.sh, and "server" set as the default, and add /devtools from toolkit/ in the latter case like it was before.
(In reply to Mike Hommey [:glandium] from comment #3)
> (In reply to J. Ryan Stinnett [:jryans] (use ni?) from comment #1)
> > That said, I'll see if it's easier to default all apps back to "server" (as
> > it was before bug 1203159) or to make "none" work.
> 
> Note the default *is* server, but it requires manually adding DIRS +=
> ['/devtools']
> 
> Maybe a reasonable way forward would be to detect the difference between
> "server" manually set in confvars.sh, and "server" set as the default, and
> add /devtools from toolkit/ in the latter case like it was before.

Yes, that's pretty similar to what I'm preparing now. :)
Created attachment 8677918
MozReview Request: Bug 1217687 - Revert back to including /devtools via toolkit. r=glandium

Bug 1217687 - Revert back to including /devtools via toolkit. r=glandium
Try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=8952e1802df7
Comment on attachment 8677918
MozReview Request: Bug 1217687 - Revert back to including /devtools via toolkit. r=glandium

https://reviewboard.mozilla.org/r/23053/#review20551

::: toolkit/toolkit.mozbuild:149
(Diff revision 1)
> +# /browser uses DIST_SUBDIR, so for that case we include /devtools elsewhere to
> +# ensure it also has DIST_SUBDIR applied.
> +if CONFIG['MOZ_BUILD_APP'] != 'browser':
> +    DIRS += [
> +        '/devtools',
> +    ]

How about a variant of this, where /devtools is included unconditionally, but /devtools/moz.build contains a condition like the following:

if CONFIG['MOZ_BUILD_APP'] == 'browser':
    DIST_SUBDIR = 'browser'
    export('DIST_SUBDIR')
Also, this doesn't remove MOZ_DEVTOOLS=none :)
https://reviewboard.mozilla.org/r/23053/#review20551

> How about a variant of this, where /devtools is included unconditionally, but /devtools/moz.build contains a condition like the following:
> 
> if CONFIG['MOZ_BUILD_APP'] == 'browser':
>     DIST_SUBDIR = 'browser'
>     export('DIST_SUBDIR')

I also considered that variation. :) Sounds fine to me, I'll update it now.
(In reply to Mike Hommey [:glandium] from comment #8)
> Also, this doesn't remove MOZ_DEVTOOLS=none :)

There's actually nothing to remove: the only mention of it was in the configure option, which you suggested should be removed.  There isn't anything that actually tests for "none", it just happens to be a value that is not "server" or "all", so it has the effect of not including anything.
Mmmm maybe we should add a value check, then. Doing that in moz.build with an error() would be enough.
Comment on attachment 8677918
MozReview Request: Bug 1217687 - Revert back to including /devtools via toolkit. r=glandium

Bug 1217687 - Revert back to including /devtools via toolkit. r=glandium
Try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=25b40facf798
(In reply to Mike Hommey [:glandium] from comment #11)
> Mmmm maybe we should add a value check, then. Doing that in moz.build with
> an error() would be enough.

Ah, okay, I can add that too.
Comment on attachment 8677918
MozReview Request: Bug 1217687 - Revert back to including /devtools via toolkit. r=glandium

Bug 1217687 - Revert back to including /devtools via toolkit. r=glandium
Comment on attachment 8677918
MozReview Request: Bug 1217687 - Revert back to including /devtools via toolkit. r=glandium

https://reviewboard.mozilla.org/r/23053/#review20557
Try: https://treeherder.mozilla.org/#/jobs?repo=try&revision=4eaef32c4277
https://hg.mozilla.org/integration/fx-team/rev/b35a87db5891
https://hg.mozilla.org/integration/fx-team/rev/101030313918
https://hg.mozilla.org/mozilla-central/rev/b35a87db5891
https://hg.mozilla.org/mozilla-central/rev/101030313918


Failure to build with MOZ_DEVTOOLS=none



Bug 1217687 - Revert back to including /devtools via toolkit. r=glandium 

Bug 1217687 - Appease the mozbuild reading test. r=me 