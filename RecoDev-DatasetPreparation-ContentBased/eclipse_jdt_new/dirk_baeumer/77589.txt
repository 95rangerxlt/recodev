I200411022000

Found the following exceptions in the log after moving CUs from package to
package. 1.5 support is enabled, I was testing static imports.

!ENTRY org.eclipse.ltk.ui.refactoring 4 10000 2004-11-03 11:41:06.154
!MESSAGE Internal Error
!STACK 1
org.eclipse.jdt.core.JavaModelException[966]:
org.eclipse.core.internal.resources.ResourceException: Problems encountered
while moving resources.
	at org.eclipse.core.internal.resources.Resource.move(Resource.java:1212)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processCompilationUnitResource(CopyResourceElementsOperation.java:264)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElement(CopyResourceElementsOperation.java:372)
	at
org.eclipse.jdt.internal.core.MultiOperation.processElements(MultiOperation.java:160)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElements(CopyResourceElementsOperation.java:390)
	at
org.eclipse.jdt.internal.core.MultiOperation.executeOperation(MultiOperation.java:90)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:744)
	at org.eclipse.jdt.internal.core.JavaModel.runOperation(JavaModel.java:314)
	at org.eclipse.jdt.internal.core.JavaModel.move(JavaModel.java:275)
	at org.eclipse.jdt.internal.core.CompilationUnit.move(CompilationUnit.java:1001)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.MoveCompilationUnitChange.doPerformReorg(MoveCompilationUnitChange.java:54)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.CompilationUnitReorgChange.perform(CompilationUnitReorgChange.java:55)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3612)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:79)
	at
org.eclipse.jdt.internal.corext.refactoring.reorg.JavaMoveProcessor$1.perform(JavaMoveProcessor.java:200)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:228)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1696)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:273)
	at
org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:86)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:196)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper$Operation.run(RefactoringExecutionHelper.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at
org.eclipse.jdt.internal.ui.actions.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:65)
	at
org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:322)
	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:269)
	at
org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:447)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper.perform(RefactoringExecutionHelper.java:116)
	at
org.eclipse.jdt.internal.ui.refactoring.reorg.ReorgMoveStarter.run(ReorgMoveStarter.java:78)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.handleDropMove(SelectionTransferDropAdapter.java:208)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.drop(SelectionTransferDropAdapter.java:132)
	at
org.eclipse.jdt.internal.ui.dnd.JdtViewerDropAdapter.drop(JdtViewerDropAdapter.java:112)
	at
org.eclipse.jdt.internal.ui.dnd.DelegatingDropAdapter.drop(DelegatingDropAdapter.java:79)
	at org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:824)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:809)
	at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:617)
	at org.eclipse.swt.dnd.DropTarget.notifyListeners(DropTarget.java:511)
	at org.eclipse.swt.dnd.DropTarget.Drop(DropTarget.java:432)
	at org.eclipse.swt.dnd.DropTarget.access$7(DropTarget.java:367)
	at org.eclipse.swt.dnd.DropTarget$3.method6(DropTarget.java:236)
	at org.eclipse.swt.internal.ole.win32.COMObject.callback6(COMObject.java:115)
	at org.eclipse.swt.internal.ole.win32.COM.DoDragDrop(Native Method)
	at org.eclipse.swt.dnd.DragSource.drag(DragSource.java:281)
	at org.eclipse.swt.dnd.DragSource.access$0(DragSource.java:267)
	at org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:161)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2794)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2448)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1527)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1498)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:276)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:185)
	at org.eclipse.core.launcher.Main.run(Main.java:704)
	at org.eclipse.core.launcher.Main.main(Main.java:688)
Caused by: org.eclipse.core.internal.resources.ResourceException: Problems
encountered while moving resources.
	at org.eclipse.core.internal.resources.Resource.move(Resource.java:1212)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processCompilationUnitResource(CopyResourceElementsOperation.java:264)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElement(CopyResourceElementsOperation.java:372)
	at
org.eclipse.jdt.internal.core.MultiOperation.processElements(MultiOperation.java:160)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElements(CopyResourceElementsOperation.java:390)
	at
org.eclipse.jdt.internal.core.MultiOperation.executeOperation(MultiOperation.java:90)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:744)
	at org.eclipse.jdt.internal.core.JavaModel.runOperation(JavaModel.java:314)
	at org.eclipse.jdt.internal.core.JavaModel.move(JavaModel.java:275)
	at org.eclipse.jdt.internal.core.CompilationUnit.move(CompilationUnit.java:1001)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.MoveCompilationUnitChange.doPerformReorg(MoveCompilationUnitChange.java:54)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.CompilationUnitReorgChange.perform(CompilationUnitReorgChange.java:55)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3612)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:79)
	at
org.eclipse.jdt.internal.corext.refactoring.reorg.JavaMoveProcessor$1.perform(JavaMoveProcessor.java:200)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:228)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1696)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:273)
	at
org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:86)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:196)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper$Operation.run(RefactoringExecutionHelper.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at
org.eclipse.jdt.internal.ui.actions.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:65)
	at
org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:322)
	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:269)
	at
org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:447)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper.perform(RefactoringExecutionHelper.java:116)
	at
org.eclipse.jdt.internal.ui.refactoring.reorg.ReorgMoveStarter.run(ReorgMoveStarter.java:78)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.handleDropMove(SelectionTransferDropAdapter.java:208)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.drop(SelectionTransferDropAdapter.java:132)
	at
org.eclipse.jdt.internal.ui.dnd.JdtViewerDropAdapter.drop(JdtViewerDropAdapter.java:112)
	at
org.eclipse.jdt.internal.ui.dnd.DelegatingDropAdapter.drop(DelegatingDropAdapter.java:79)
	at org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:824)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:809)
	at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:617)
	at org.eclipse.swt.dnd.DropTarget.notifyListeners(DropTarget.java:511)
	at org.eclipse.swt.dnd.DropTarget.Drop(DropTarget.java:432)
	at org.eclipse.swt.dnd.DropTarget.access$7(DropTarget.java:367)
	at org.eclipse.swt.dnd.DropTarget$3.method6(DropTarget.java:236)
	at org.eclipse.swt.internal.ole.win32.COMObject.callback6(COMObject.java:115)
	at org.eclipse.swt.internal.ole.win32.COM.DoDragDrop(Native Method)
	at org.eclipse.swt.dnd.DragSource.drag(DragSource.java:281)
	at org.eclipse.swt.dnd.DragSource.access$0(DragSource.java:267)
	at org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:161)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2794)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2448)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1527)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1498)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:276)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:185)
	at org.eclipse.core.launcher.Main.run(Main.java:704)
	at org.eclipse.core.launcher.Main.main(Main.java:688)
!SUBENTRY 1 org.eclipse.jdt.core 4 966 2004-11-03 11:41:06.154
!MESSAGE Problems encountered while moving resources.
!STACK 1
org.eclipse.core.internal.resources.ResourceException: Problems encountered
while moving resources.
	at org.eclipse.core.internal.resources.Resource.move(Resource.java:1212)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processCompilationUnitResource(CopyResourceElementsOperation.java:264)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElement(CopyResourceElementsOperation.java:372)
	at
org.eclipse.jdt.internal.core.MultiOperation.processElements(MultiOperation.java:160)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElements(CopyResourceElementsOperation.java:390)
	at
org.eclipse.jdt.internal.core.MultiOperation.executeOperation(MultiOperation.java:90)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:744)
	at org.eclipse.jdt.internal.core.JavaModel.runOperation(JavaModel.java:314)
	at org.eclipse.jdt.internal.core.JavaModel.move(JavaModel.java:275)
	at org.eclipse.jdt.internal.core.CompilationUnit.move(CompilationUnit.java:1001)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.MoveCompilationUnitChange.doPerformReorg(MoveCompilationUnitChange.java:54)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.CompilationUnitReorgChange.perform(CompilationUnitReorgChange.java:55)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3612)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:79)
	at
org.eclipse.jdt.internal.corext.refactoring.reorg.JavaMoveProcessor$1.perform(JavaMoveProcessor.java:200)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:228)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1696)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:273)
	at
org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:86)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:196)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper$Operation.run(RefactoringExecutionHelper.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at
org.eclipse.jdt.internal.ui.actions.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:65)
	at
org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:322)
	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:269)
	at
org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:447)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper.perform(RefactoringExecutionHelper.java:116)
	at
org.eclipse.jdt.internal.ui.refactoring.reorg.ReorgMoveStarter.run(ReorgMoveStarter.java:78)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.handleDropMove(SelectionTransferDropAdapter.java:208)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.drop(SelectionTransferDropAdapter.java:132)
	at
org.eclipse.jdt.internal.ui.dnd.JdtViewerDropAdapter.drop(JdtViewerDropAdapter.java:112)
	at
org.eclipse.jdt.internal.ui.dnd.DelegatingDropAdapter.drop(DelegatingDropAdapter.java:79)
	at org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:824)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:809)
	at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:617)
	at org.eclipse.swt.dnd.DropTarget.notifyListeners(DropTarget.java:511)
	at org.eclipse.swt.dnd.DropTarget.Drop(DropTarget.java:432)
	at org.eclipse.swt.dnd.DropTarget.access$7(DropTarget.java:367)
	at org.eclipse.swt.dnd.DropTarget$3.method6(DropTarget.java:236)
	at org.eclipse.swt.internal.ole.win32.COMObject.callback6(COMObject.java:115)
	at org.eclipse.swt.internal.ole.win32.COM.DoDragDrop(Native Method)
	at org.eclipse.swt.dnd.DragSource.drag(DragSource.java:281)
	at org.eclipse.swt.dnd.DragSource.access$0(DragSource.java:267)
	at org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:161)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2794)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2448)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1527)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1498)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:276)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:185)
	at org.eclipse.core.launcher.Main.run(Main.java:704)
	at org.eclipse.core.launcher.Main.main(Main.java:688)
!SUBENTRY 2 org.eclipse.core.resources 4 4 2004-11-03 11:41:06.164
!MESSAGE Problems encountered while moving resources.
!SUBENTRY 3 org.eclipse.core.resources 4 273 2004-11-03 11:41:06.164
!MESSAGE Copy successful, but problems occurred removing old resources
!SUBENTRY 4 org.eclipse.core.resources 4 273 2004-11-03 11:41:06.164
!MESSAGE Could not delete:
c:\local\eclipse\workspace\testing\Test\src\StaticImport.java.

!ENTRY org.eclipse.jdt.core 4 966 2004-11-03 11:41:06.174
!MESSAGE Problems encountered while moving resources.
!STACK 1
org.eclipse.core.internal.resources.ResourceException: Problems encountered
while moving resources.
	at org.eclipse.core.internal.resources.Resource.move(Resource.java:1212)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processCompilationUnitResource(CopyResourceElementsOperation.java:264)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElement(CopyResourceElementsOperation.java:372)
	at
org.eclipse.jdt.internal.core.MultiOperation.processElements(MultiOperation.java:160)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElements(CopyResourceElementsOperation.java:390)
	at
org.eclipse.jdt.internal.core.MultiOperation.executeOperation(MultiOperation.java:90)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:744)
	at org.eclipse.jdt.internal.core.JavaModel.runOperation(JavaModel.java:314)
	at org.eclipse.jdt.internal.core.JavaModel.move(JavaModel.java:275)
	at org.eclipse.jdt.internal.core.CompilationUnit.move(CompilationUnit.java:1001)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.MoveCompilationUnitChange.doPerformReorg(MoveCompilationUnitChange.java:54)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.CompilationUnitReorgChange.perform(CompilationUnitReorgChange.java:55)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3612)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:79)
	at
org.eclipse.jdt.internal.corext.refactoring.reorg.JavaMoveProcessor$1.perform(JavaMoveProcessor.java:200)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:228)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1696)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:273)
	at
org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:86)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:196)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper$Operation.run(RefactoringExecutionHelper.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at
org.eclipse.jdt.internal.ui.actions.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:65)
	at
org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:322)
	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:269)
	at
org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:447)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper.perform(RefactoringExecutionHelper.java:116)
	at
org.eclipse.jdt.internal.ui.refactoring.reorg.ReorgMoveStarter.run(ReorgMoveStarter.java:78)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.handleDropMove(SelectionTransferDropAdapter.java:208)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.drop(SelectionTransferDropAdapter.java:132)
	at
org.eclipse.jdt.internal.ui.dnd.JdtViewerDropAdapter.drop(JdtViewerDropAdapter.java:112)
	at
org.eclipse.jdt.internal.ui.dnd.DelegatingDropAdapter.drop(DelegatingDropAdapter.java:79)
	at org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:824)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:809)
	at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:617)
	at org.eclipse.swt.dnd.DropTarget.notifyListeners(DropTarget.java:511)
	at org.eclipse.swt.dnd.DropTarget.Drop(DropTarget.java:432)
	at org.eclipse.swt.dnd.DropTarget.access$7(DropTarget.java:367)
	at org.eclipse.swt.dnd.DropTarget$3.method6(DropTarget.java:236)
	at org.eclipse.swt.internal.ole.win32.COMObject.callback6(COMObject.java:115)
	at org.eclipse.swt.internal.ole.win32.COM.DoDragDrop(Native Method)
	at org.eclipse.swt.dnd.DragSource.drag(DragSource.java:281)
	at org.eclipse.swt.dnd.DragSource.access$0(DragSource.java:267)
	at org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:161)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2794)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2448)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1527)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1498)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:276)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:185)
	at org.eclipse.core.launcher.Main.run(Main.java:704)
	at org.eclipse.core.launcher.Main.main(Main.java:688)
!SUBENTRY 1 org.eclipse.core.resources 4 4 2004-11-03 11:41:06.174
!MESSAGE Problems encountered while moving resources.
!SUBENTRY 2 org.eclipse.core.resources 4 273 2004-11-03 11:41:06.174
!MESSAGE Copy successful, but problems occurred removing old resources
!SUBENTRY 3 org.eclipse.core.resources 4 273 2004-11-03 11:41:06.174
!MESSAGE Could not delete:
c:\local\eclipse\workspace\testing\Test\src\StaticImport.java.

I200411022000

Found the following exceptions in the log after moving CUs from package to
package. 1.5 support is enabled, I was testing static imports.

!ENTRY org.eclipse.ltk.ui.refactoring 4 10000 2004-11-03 11:41:06.154
!MESSAGE Internal Error
!STACK 1
org.eclipse.jdt.core.JavaModelException[966]:
org.eclipse.core.internal.resources.ResourceException: Problems encountered
while moving resources.
	at org.eclipse.core.internal.resources.Resource.move(Resource.java:1212)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processCompilationUnitResource(CopyResourceElementsOperation.java:264)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElement(CopyResourceElementsOperation.java:372)
	at
org.eclipse.jdt.internal.core.MultiOperation.processElements(MultiOperation.java:160)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElements(CopyResourceElementsOperation.java:390)
	at
org.eclipse.jdt.internal.core.MultiOperation.executeOperation(MultiOperation.java:90)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:744)
	at org.eclipse.jdt.internal.core.JavaModel.runOperation(JavaModel.java:314)
	at org.eclipse.jdt.internal.core.JavaModel.move(JavaModel.java:275)
	at org.eclipse.jdt.internal.core.CompilationUnit.move(CompilationUnit.java:1001)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.MoveCompilationUnitChange.doPerformReorg(MoveCompilationUnitChange.java:54)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.CompilationUnitReorgChange.perform(CompilationUnitReorgChange.java:55)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3612)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:79)
	at
org.eclipse.jdt.internal.corext.refactoring.reorg.JavaMoveProcessor$1.perform(JavaMoveProcessor.java:200)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:228)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1696)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:273)
	at
org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:86)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:196)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper$Operation.run(RefactoringExecutionHelper.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at
org.eclipse.jdt.internal.ui.actions.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:65)
	at
org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:322)
	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:269)
	at
org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:447)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper.perform(RefactoringExecutionHelper.java:116)
	at
org.eclipse.jdt.internal.ui.refactoring.reorg.ReorgMoveStarter.run(ReorgMoveStarter.java:78)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.handleDropMove(SelectionTransferDropAdapter.java:208)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.drop(SelectionTransferDropAdapter.java:132)
	at
org.eclipse.jdt.internal.ui.dnd.JdtViewerDropAdapter.drop(JdtViewerDropAdapter.java:112)
	at
org.eclipse.jdt.internal.ui.dnd.DelegatingDropAdapter.drop(DelegatingDropAdapter.java:79)
	at org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:824)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:809)
	at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:617)
	at org.eclipse.swt.dnd.DropTarget.notifyListeners(DropTarget.java:511)
	at org.eclipse.swt.dnd.DropTarget.Drop(DropTarget.java:432)
	at org.eclipse.swt.dnd.DropTarget.access$7(DropTarget.java:367)
	at org.eclipse.swt.dnd.DropTarget$3.method6(DropTarget.java:236)
	at org.eclipse.swt.internal.ole.win32.COMObject.callback6(COMObject.java:115)
	at org.eclipse.swt.internal.ole.win32.COM.DoDragDrop(Native Method)
	at org.eclipse.swt.dnd.DragSource.drag(DragSource.java:281)
	at org.eclipse.swt.dnd.DragSource.access$0(DragSource.java:267)
	at org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:161)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2794)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2448)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1527)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1498)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:276)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:185)
	at org.eclipse.core.launcher.Main.run(Main.java:704)
	at org.eclipse.core.launcher.Main.main(Main.java:688)
Caused by: org.eclipse.core.internal.resources.ResourceException: Problems
encountered while moving resources.
	at org.eclipse.core.internal.resources.Resource.move(Resource.java:1212)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processCompilationUnitResource(CopyResourceElementsOperation.java:264)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElement(CopyResourceElementsOperation.java:372)
	at
org.eclipse.jdt.internal.core.MultiOperation.processElements(MultiOperation.java:160)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElements(CopyResourceElementsOperation.java:390)
	at
org.eclipse.jdt.internal.core.MultiOperation.executeOperation(MultiOperation.java:90)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:744)
	at org.eclipse.jdt.internal.core.JavaModel.runOperation(JavaModel.java:314)
	at org.eclipse.jdt.internal.core.JavaModel.move(JavaModel.java:275)
	at org.eclipse.jdt.internal.core.CompilationUnit.move(CompilationUnit.java:1001)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.MoveCompilationUnitChange.doPerformReorg(MoveCompilationUnitChange.java:54)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.CompilationUnitReorgChange.perform(CompilationUnitReorgChange.java:55)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3612)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:79)
	at
org.eclipse.jdt.internal.corext.refactoring.reorg.JavaMoveProcessor$1.perform(JavaMoveProcessor.java:200)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:228)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1696)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:273)
	at
org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:86)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:196)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper$Operation.run(RefactoringExecutionHelper.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at
org.eclipse.jdt.internal.ui.actions.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:65)
	at
org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:322)
	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:269)
	at
org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:447)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper.perform(RefactoringExecutionHelper.java:116)
	at
org.eclipse.jdt.internal.ui.refactoring.reorg.ReorgMoveStarter.run(ReorgMoveStarter.java:78)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.handleDropMove(SelectionTransferDropAdapter.java:208)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.drop(SelectionTransferDropAdapter.java:132)
	at
org.eclipse.jdt.internal.ui.dnd.JdtViewerDropAdapter.drop(JdtViewerDropAdapter.java:112)
	at
org.eclipse.jdt.internal.ui.dnd.DelegatingDropAdapter.drop(DelegatingDropAdapter.java:79)
	at org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:824)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:809)
	at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:617)
	at org.eclipse.swt.dnd.DropTarget.notifyListeners(DropTarget.java:511)
	at org.eclipse.swt.dnd.DropTarget.Drop(DropTarget.java:432)
	at org.eclipse.swt.dnd.DropTarget.access$7(DropTarget.java:367)
	at org.eclipse.swt.dnd.DropTarget$3.method6(DropTarget.java:236)
	at org.eclipse.swt.internal.ole.win32.COMObject.callback6(COMObject.java:115)
	at org.eclipse.swt.internal.ole.win32.COM.DoDragDrop(Native Method)
	at org.eclipse.swt.dnd.DragSource.drag(DragSource.java:281)
	at org.eclipse.swt.dnd.DragSource.access$0(DragSource.java:267)
	at org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:161)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2794)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2448)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1527)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1498)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:276)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:185)
	at org.eclipse.core.launcher.Main.run(Main.java:704)
	at org.eclipse.core.launcher.Main.main(Main.java:688)
!SUBENTRY 1 org.eclipse.jdt.core 4 966 2004-11-03 11:41:06.154
!MESSAGE Problems encountered while moving resources.
!STACK 1
org.eclipse.core.internal.resources.ResourceException: Problems encountered
while moving resources.
	at org.eclipse.core.internal.resources.Resource.move(Resource.java:1212)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processCompilationUnitResource(CopyResourceElementsOperation.java:264)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElement(CopyResourceElementsOperation.java:372)
	at
org.eclipse.jdt.internal.core.MultiOperation.processElements(MultiOperation.java:160)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElements(CopyResourceElementsOperation.java:390)
	at
org.eclipse.jdt.internal.core.MultiOperation.executeOperation(MultiOperation.java:90)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:744)
	at org.eclipse.jdt.internal.core.JavaModel.runOperation(JavaModel.java:314)
	at org.eclipse.jdt.internal.core.JavaModel.move(JavaModel.java:275)
	at org.eclipse.jdt.internal.core.CompilationUnit.move(CompilationUnit.java:1001)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.MoveCompilationUnitChange.doPerformReorg(MoveCompilationUnitChange.java:54)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.CompilationUnitReorgChange.perform(CompilationUnitReorgChange.java:55)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3612)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:79)
	at
org.eclipse.jdt.internal.corext.refactoring.reorg.JavaMoveProcessor$1.perform(JavaMoveProcessor.java:200)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:228)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1696)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:273)
	at
org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:86)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:196)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper$Operation.run(RefactoringExecutionHelper.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at
org.eclipse.jdt.internal.ui.actions.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:65)
	at
org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:322)
	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:269)
	at
org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:447)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper.perform(RefactoringExecutionHelper.java:116)
	at
org.eclipse.jdt.internal.ui.refactoring.reorg.ReorgMoveStarter.run(ReorgMoveStarter.java:78)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.handleDropMove(SelectionTransferDropAdapter.java:208)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.drop(SelectionTransferDropAdapter.java:132)
	at
org.eclipse.jdt.internal.ui.dnd.JdtViewerDropAdapter.drop(JdtViewerDropAdapter.java:112)
	at
org.eclipse.jdt.internal.ui.dnd.DelegatingDropAdapter.drop(DelegatingDropAdapter.java:79)
	at org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:824)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:809)
	at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:617)
	at org.eclipse.swt.dnd.DropTarget.notifyListeners(DropTarget.java:511)
	at org.eclipse.swt.dnd.DropTarget.Drop(DropTarget.java:432)
	at org.eclipse.swt.dnd.DropTarget.access$7(DropTarget.java:367)
	at org.eclipse.swt.dnd.DropTarget$3.method6(DropTarget.java:236)
	at org.eclipse.swt.internal.ole.win32.COMObject.callback6(COMObject.java:115)
	at org.eclipse.swt.internal.ole.win32.COM.DoDragDrop(Native Method)
	at org.eclipse.swt.dnd.DragSource.drag(DragSource.java:281)
	at org.eclipse.swt.dnd.DragSource.access$0(DragSource.java:267)
	at org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:161)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2794)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2448)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1527)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1498)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:276)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:185)
	at org.eclipse.core.launcher.Main.run(Main.java:704)
	at org.eclipse.core.launcher.Main.main(Main.java:688)
!SUBENTRY 2 org.eclipse.core.resources 4 4 2004-11-03 11:41:06.164
!MESSAGE Problems encountered while moving resources.
!SUBENTRY 3 org.eclipse.core.resources 4 273 2004-11-03 11:41:06.164
!MESSAGE Copy successful, but problems occurred removing old resources
!SUBENTRY 4 org.eclipse.core.resources 4 273 2004-11-03 11:41:06.164
!MESSAGE Could not delete:
c:\local\eclipse\workspace\testing\Test\src\StaticImport.java.

!ENTRY org.eclipse.jdt.core 4 966 2004-11-03 11:41:06.174
!MESSAGE Problems encountered while moving resources.
!STACK 1
org.eclipse.core.internal.resources.ResourceException: Problems encountered
while moving resources.
	at org.eclipse.core.internal.resources.Resource.move(Resource.java:1212)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processCompilationUnitResource(CopyResourceElementsOperation.java:264)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElement(CopyResourceElementsOperation.java:372)
	at
org.eclipse.jdt.internal.core.MultiOperation.processElements(MultiOperation.java:160)
	at
org.eclipse.jdt.internal.core.CopyResourceElementsOperation.processElements(CopyResourceElementsOperation.java:390)
	at
org.eclipse.jdt.internal.core.MultiOperation.executeOperation(MultiOperation.java:90)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.runOperation(JavaModelOperation.java:744)
	at org.eclipse.jdt.internal.core.JavaModel.runOperation(JavaModel.java:314)
	at org.eclipse.jdt.internal.core.JavaModel.move(JavaModel.java:275)
	at org.eclipse.jdt.internal.core.CompilationUnit.move(CompilationUnit.java:1001)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.MoveCompilationUnitChange.doPerformReorg(MoveCompilationUnitChange.java:54)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.CompilationUnitReorgChange.perform(CompilationUnitReorgChange.java:55)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.access$0(DynamicValidationStateChange.java:1)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange$1.run(DynamicValidationStateChange.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3612)
	at
org.eclipse.jdt.internal.corext.refactoring.changes.DynamicValidationStateChange.perform(DynamicValidationStateChange.java:79)
	at
org.eclipse.jdt.internal.corext.refactoring.reorg.JavaMoveProcessor$1.perform(JavaMoveProcessor.java:200)
	at
org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:262)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:228)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1696)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:273)
	at
org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:86)
	at
org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:196)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper$Operation.run(RefactoringExecutionHelper.java:76)
	at
org.eclipse.jdt.internal.core.BatchOperation.executeOperation(BatchOperation.java:34)
	at
org.eclipse.jdt.internal.core.JavaModelOperation.run(JavaModelOperation.java:700)
	at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1676)
	at org.eclipse.jdt.core.JavaCore.run(JavaCore.java:3655)
	at
org.eclipse.jdt.internal.ui.actions.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:65)
	at
org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:322)
	at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:269)
	at
org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:447)
	at
org.eclipse.jdt.internal.ui.refactoring.RefactoringExecutionHelper.perform(RefactoringExecutionHelper.java:116)
	at
org.eclipse.jdt.internal.ui.refactoring.reorg.ReorgMoveStarter.run(ReorgMoveStarter.java:78)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.handleDropMove(SelectionTransferDropAdapter.java:208)
	at
org.eclipse.jdt.internal.ui.packageview.SelectionTransferDropAdapter.drop(SelectionTransferDropAdapter.java:132)
	at
org.eclipse.jdt.internal.ui.dnd.JdtViewerDropAdapter.drop(JdtViewerDropAdapter.java:112)
	at
org.eclipse.jdt.internal.ui.dnd.DelegatingDropAdapter.drop(DelegatingDropAdapter.java:79)
	at org.eclipse.swt.dnd.DNDListener.handleEvent(DNDListener.java:65)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:824)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:809)
	at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:617)
	at org.eclipse.swt.dnd.DropTarget.notifyListeners(DropTarget.java:511)
	at org.eclipse.swt.dnd.DropTarget.Drop(DropTarget.java:432)
	at org.eclipse.swt.dnd.DropTarget.access$7(DropTarget.java:367)
	at org.eclipse.swt.dnd.DropTarget$3.method6(DropTarget.java:236)
	at org.eclipse.swt.internal.ole.win32.COMObject.callback6(COMObject.java:115)
	at org.eclipse.swt.internal.ole.win32.COM.DoDragDrop(Native Method)
	at org.eclipse.swt.dnd.DragSource.drag(DragSource.java:281)
	at org.eclipse.swt.dnd.DragSource.access$0(DragSource.java:267)
	at org.eclipse.swt.dnd.DragSource$1.handleEvent(DragSource.java:161)
	at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
	at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:800)
	at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2794)
	at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2448)
	at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1527)
	at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1498)
	at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:276)
	at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)
	at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)
	at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:335)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)
	at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:324)
	at org.eclipse.core.launcher.Main.basicRun(Main.java:185)
	at org.eclipse.core.launcher.Main.run(Main.java:704)
	at org.eclipse.core.launcher.Main.main(Main.java:688)
!SUBENTRY 1 org.eclipse.core.resources 4 4 2004-11-03 11:41:06.174
!MESSAGE Problems encountered while moving resources.
!SUBENTRY 2 org.eclipse.core.resources 4 273 2004-11-03 11:41:06.174
!MESSAGE Copy successful, but problems occurred removing old resources
!SUBENTRY 3 org.eclipse.core.resources 4 273 2004-11-03 11:41:06.174
!MESSAGE Could not delete:
c:\local\eclipse\workspace\testing\Test\src\StaticImport.java.
The underlying problem is found at the end of the log:

!MESSAGE Could not delete:
c:\local\eclipse\workspace\testing\Test\src\StaticImport.java.

Some process is likely holding an open file handle on that file, preventing it
from being deleted. Steps to reproduce would be useful.
I was able to reproduce it by:
- start with new workspace
- create a JavaProject Test
- create packages test1 and test2
- create CUs A and B in the default package:
public class A {
	private B b;
}
public class B {
	private A a;
}
- move A by drag and drop between the default, test1 and test2 packages multiple
times until the exception occurs

I have been trying to reproduce using the provided steps using build I20041123
and I have not been successful. The only error I got after several minutes was
the following, which did not contain a resource exception:

Java Model Exception: Java Model Status [A.java [in test1 [in <project root> [in
Test]]] does not exist]
at
org.eclipse.jdt.internal.core.JavaElement.newJavaModelException(JavaElement.java:540)
at
org.eclipse.jdt.internal.core.CompilationUnit.buildStructure(CompilationUnit.java:85)
at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:203)
at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.java:553)
at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:291)
at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.java:277)
at org.eclipse.jdt.internal.core.JavaElement.getChildren(JavaElement.java:232)
at org.eclipse.jdt.internal.core.JavaElement.getChildrenOfType(JavaElement.java:246)
at org.eclipse.jdt.internal.core.CompilationUnit.getTypes(CompilationUnit.java:828)
at
org.eclipse.jdt.internal.corext.refactoring.util.JavaElementUtil.getMainType(JavaElementUtil.java:85)
at
org.eclipse.jdt.ui.actions.ExtractInterfaceAction.getSingleSelectedType(ExtractInterfaceAction.java:119)
at
org.eclipse.jdt.ui.actions.ExtractInterfaceAction.canEnable(ExtractInterfaceAction.java:108)
at
org.eclipse.jdt.ui.actions.ExtractInterfaceAction.selectionChanged(ExtractInterfaceAction.java:86)
at
org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchSelectionChanged(SelectionDispatchAction.java:200)
at
org.eclipse.jdt.ui.actions.SelectionDispatchAction.selectionChanged(SelectionDispatchAction.java:195)
at org.eclipse.jface.viewers.Viewer$2.run(Viewer.java:163)
at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatform.java:616)
at org.eclipse.core.runtime.Platform.run(Platform.java:747)
at org.eclipse.jface.viewers.Viewer.fireSelectionChanged(Viewer.java:161)
at
org.eclipse.jface.viewers.StructuredViewer.updateSelection(StructuredViewer.java:1622)
at
org.eclipse.jface.viewers.StructuredViewer.handleDoubleSelect(StructuredViewer.java:812)
at
org.eclipse.jface.viewers.StructuredViewer$4.widgetDefaultSelected(StructuredViewer.java:920)
at
org.eclipse.jface.util.OpenStrategy.fireDefaultSelectionEvent(OpenStrategy.java:219)
at org.eclipse.jface.util.OpenStrategy.access$0(OpenStrategy.java:216)
at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:275)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:814)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:2803)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2448)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1579)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1550)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:282)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:144)
at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:102)
at
org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformActivator.java:220)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:273)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:129)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:85)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:58)
at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:60)
at java.lang.reflect.Method.invoke(Method.java:391)
at org.eclipse.core.launcher.Main.basicRun(Main.java:185)
at org.eclipse.core.launcher.Main.run(Main.java:710)
at org.eclipse.core.launcher.Main.main(Main.java:694)

Created attachment 16095
Log file from I200411231600

Log file after moving A from the default package to package test1 to package
test2 and back to the default package. The last move did not succeed.

I was using a new workspace with the default preferences and all default
settings when creating the project.

Bug 72633 and bug 76078 might be related.

Still reproducible after disabling autobuild.
This is a regression of bug 44667.

The important detail missing from Christof's steps is that the editors on A.java
and B.java must be left open. If the editors are closed, it never fails. 
Running in a debugger, I set an exception breakpoint on ResourceException and
instructed it to halt the VM in that situation.  It shows the "ReadJob" from
LastSaveReferenceProvider has an open file handle on the file (opened in
LastSaveReferenceProvider#readDocument) at the time of the deletion. Windows
does not allow deletion when there is an open file handle on the file.

The solution suggested and implemented in bug 44667 was to use a scheduling rule
on the file in the Quick diff job that needs to access the file contents. This
rules seems to no longer be used.
Investigating...

We do still obtain the rule *if* the given IStorage is a scheduling rule or
adapts to one. Only if the storage does not provide one, we cannot lock
anything. But this is clearly not the case in this scenario.
John, to me it seems that the job manager is letting the ReadJob in, even though
it should not. I did as follows: 

- In the given scenario, I put a breakpoint on ReadJob.run to suspend the VM
- "main" was in the middle of moving the CU as shown by the stacktrace excerpt
below. The scheduling rule held inside Workspace.run was the WorkspaceRoot.

Thread [main] (Suspended)
	[...]
	MoveResourceElementsOperation(MultiOperation).executeOperation() line: 90
	MoveResourceElementsOperation(JavaModelOperation).run(IProgressMonitor) line: 700
	Workspace.run(IWorkspaceRunnable, ISchedulingRule, int, IProgressMonitor) line:
1676
	MoveResourceElementsOperation(JavaModelOperation).runOperation(IProgressMonitor)
line: 744
	JavaModel.runOperation(MultiOperation, IJavaElement[], IJavaElement[],
String[], IProgressMonitor) line: 314
	JavaModel.move(IJavaElement[], IJavaElement[], IJavaElement[], String[],
boolean, IProgressMonitor) line: 275
	[...]

- I stepped the ReadJob worker thread through
LastSaveReferenceProvider.lockDocument which called beginRule for
L/PR77589/B.java (which should conflict with the WorkspaceRoot scheduling rule
held by "main"). beginRule did not suspend the thread, however and I was able to
continue.
You're right, it is.  Refactoring "suspends" scheduling rules so that it can
manipulate resources from several threads at once (for complicated reasons).
This is allowing the QuickDiff to proceed even when it shouldn't be. If the
quick diff job had the file as the job's scheduling rule, this would work.
However, beginRule/endRule still works when a rule is suspended (by design).

How did Dirk ever talk me into adding suspend/resume? <g>
Grrr. I could in some cases (the ReadJob is one) know the rule in advance of
scheduling the job, but not always (not when the reference document is requested
by the LineDiffer, which happens already inside a job).

Any ideas on how to solve this?
I'm leaning towards deprecating/removing support for suspend/resume.  I know
many components (particularly in certain large Eclipse-based products) are
starting to use scheduling rules as a thread-safety mechanism in their code. The
ability to turn off scheduling rule enforcement leaves a big hole in their
thread safety and can lead to concurrency problems that are very hard to detect.
Deprecating suspend/resume will simply put the problems onto the clients (and
they even don't have the chance to solve the problem). 

So before we deprecated the methods we need a solution for the problem
refactoring solved with suspend/resume. So I will outline the refactoring
problem to find another solution:

- refactoring starts in the UI thread and must make sure that (when started)
  no one is manipulating the workspace anymore.

- refactoring takes place in n steps and between these steps user interaction
  must be possible.

- each step executes either in a modal context thread or in the UI thread.
  The modal context thread is used the allow cancelation and progress feedback.

So the refactoring problem is that a lock aquired in the UI thread must be
handed over the the modal context thread. As said the modal context thread is
created from the UI thread for the n steps and while it is running there isn't
any manipulation taking place in the UI thread.

So another solution would be that I am allowed to hand over the lock to another
newly created thread and that the lock "comes back" when the thread has finished.
This is just a thought from someone without in-depht knowledge of the Jobs API,
but here we go anyway:

Would it not be possible to create a set of distinct ISchedulingRules with the
following properties:

- the rules would comprise any resource-based scheduling rule you need and thus
give you exclusive access
- the rules would be compatible (i.e. not conflict) with each other, such that
you can e.g. acquire a rule in the modal thread while the UI thread is still
holding another. You would have to make sure you don't step on your own toes,
but that seems doable.
This will not work as long as the scheduling rule is static. Here a scenario

- I implement a refactoring rule that contains all resource rules
- I aquire the rule in the UI thread
- I start a modal context thread
- this does some manipulation by calling JDT/Core methods. This method 
  call IWorkspace#run which tries to aquire the workspace rule. Since the rule
  conflicts with the refactoring rule the modal context thread stops.

However, if the refactoring rule is dynamic (e.g thread based) we could
implement handing over rules to different threads.

John, are the properties contains and isConflicting static or can the answers
different results based on some additional state. 
I think I understand what you are suggesting, Tom.  Essentially we need a
mechanism that allows the refactoring operations in several threads to modify
resources, but NOT allow other arbitrary threads (such as quick diff) to access
those rules.  I think you are suggesting some kind of context-aware rule that
would allow certain other threads to gain access but not others. However, it is
difficult to pass this "context awareness" throughout the call stack that needs
to use scheduling rules. 

I think I prefer Dirk's suggestion of a mechanism that allows handing over a
scheduling rule to another thread atomically.  That allows me to maintain the
1-1 relationship between threads and scheduling rules that is a very important
part of the scheduling rule implementation.  I have entered bug 79698 against
platform runtime to investigate this. If such a mechanism was introduced and
used by refactoring, I believe this particular bug will go away without any
changes from the text component.

Moving to jdt-ui then.
Todays Ibuild contains API to transfer rules. I will look at it.
*** Bug 80479 has been marked as a duplicate of this bug. ***
John and I are working on support for transferring rules between threads. But
this support will not make it into M4. Moving milestone to M5.
*** Bug 81110 has been marked as a duplicate of this bug. ***
Fixed by using the new transferRule API.


ResourceException while moving CUs



[77589] ResourceException while moving CUs 