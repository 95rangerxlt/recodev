using this code:

package foo;

import java.util.ArrayList;

public class foo 
{
        public foo(int x)
        {
        		String[] tmp = new String[10];
        		ArrayList al = new ArrayList();
        		tmp = (String[])al.toArray(tmp);
        }
}

then after the Array cast (String[])
code completion doesn't work anymore

I am using version:

Version: 3.1.0
Build id: 200408031300

but i also now that this also happens in 3.0 code.

using this code:

package foo;

import java.util.ArrayList;

public class foo 
{
        public foo(int x)
        {
        		String[] tmp = new String[10];
        		ArrayList al = new ArrayList();
        		tmp = (String[])al.toArray(tmp);
        }
}

then after the Array cast (String[])
code completion doesn't work anymore

I am using version:

Version: 3.1.0
Build id: 200408031300

but i also now that this also happens in 3.0 code.
Works in 3.0. Doesn't work in 200408031300.

Moving to core since codeComplete(int offset, ICompletionRequestor requestor)
doesn't report any completions.
Fixed and tests added
  CompletionParserTest2#test0143() -> test0146()
  GenericsCompletionParserTest#test0171() -> test0176


code completion doesn't work anymore after Array cast.



bug 71702 