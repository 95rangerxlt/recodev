Not sure what's going on here but it looks like the places utils API doesn't return the right thing here for some reason.

Failure looks like:

34 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js | Bookmark got a good default title. - Got null, expected Dummy test page
Stack trace:
chrome://mochikit/content/browser-test.js:test_is:828
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:checkBookmark:83
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest:45
self-hosted:next:913
chrome://mochikit/content/browser-test.js:test_nextStep:876
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest/<:33
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.dispatch:485
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.receiveMessage:457
null:null:0
35 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js | Bookmark got a good default title. - Got null, expected test data: url
Stack trace:
chrome://mochikit/content/browser-test.js:test_is:828
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:checkBookmark:83
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest:45
self-hosted:next:913
chrome://mochikit/content/browser-test.js:test_nextStep:876
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest/<:33
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.dispatch:485
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.receiveMessage:457
null:null:0
36 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js | Bookmark got a good default title. - Got null, expected data:application/vnd.mozilla.xul+xml,
Stack trace:
chrome://mochikit/content/browser-test.js:test_is:828
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:checkBookmark:83
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest:45
self-hosted:next:913
chrome://mochikit/content/browser-test.js:test_nextStep:876
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest/<:33
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.dispatch:485
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.receiveMessage:457
null:null:0
37 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js | Bookmark got a good default title. - Got null, expected https://untrusted.example.com/somepage.html
Stack trace:
chrome://mochikit/content/browser-test.js:test_is:828
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:checkBookmark:83
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest:45
self-hosted:next:913
chrome://mochikit/content/browser-test.js:test_nextStep:876
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest/<:33
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.dispatch:485
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.receiveMessage:457
null:null:0
38 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js | Bookmark got a good default title. - Got null, expected Dummy test page
Stack trace:
chrome://mochikit/content/browser-test.js:test_is:828
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:checkBookmark:83
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest:70
self-hosted:next:913
chrome://mochikit/content/browser-test.js:test_nextStep:876
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest/<:33
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.dispatch:485
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.receiveMessage:457
null:null:0
SUITE-END | took 4s

Not sure what's going on here but it looks like the places utils API doesn't return the right thing here for some reason.

Failure looks like:

34 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js | Bookmark got a good default title. - Got null, expected Dummy test page
Stack trace:
chrome://mochikit/content/browser-test.js:test_is:828
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:checkBookmark:83
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest:45
self-hosted:next:913
chrome://mochikit/content/browser-test.js:test_nextStep:876
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest/<:33
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.dispatch:485
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.receiveMessage:457
null:null:0
35 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js | Bookmark got a good default title. - Got null, expected test data: url
Stack trace:
chrome://mochikit/content/browser-test.js:test_is:828
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:checkBookmark:83
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest:45
self-hosted:next:913
chrome://mochikit/content/browser-test.js:test_nextStep:876
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest/<:33
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.dispatch:485
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.receiveMessage:457
null:null:0
36 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js | Bookmark got a good default title. - Got null, expected data:application/vnd.mozilla.xul+xml,
Stack trace:
chrome://mochikit/content/browser-test.js:test_is:828
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:checkBookmark:83
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest:45
self-hosted:next:913
chrome://mochikit/content/browser-test.js:test_nextStep:876
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest/<:33
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.dispatch:485
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.receiveMessage:457
null:null:0
37 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js | Bookmark got a good default title. - Got null, expected https://untrusted.example.com/somepage.html
Stack trace:
chrome://mochikit/content/browser-test.js:test_is:828
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:checkBookmark:83
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest:45
self-hosted:next:913
chrome://mochikit/content/browser-test.js:test_nextStep:876
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest/<:33
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.dispatch:485
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.receiveMessage:457
null:null:0
38 INFO TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js | Bookmark got a good default title. - Got null, expected Dummy test page
Stack trace:
chrome://mochikit/content/browser-test.js:test_is:828
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:checkBookmark:83
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest:70
self-hosted:next:913
chrome://mochikit/content/browser-test.js:test_nextStep:876
chrome://mochitests/content/browser/browser/base/content/test/general/browser_bookmark_titles.js:generatorTest/<:33
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.dispatch:485
resource://gre/modules/RemoteAddonsParent.jsm:EventTargetParent.receiveMessage:457
null:null:0
SUITE-END | took 4s
bug 1067042 maybe?
(In reply to Marco Bonardo [::mak] (needinfo? me) from comment #1)
> bug 1067042 maybe?

seems likely.  and is the only thing blocking me from using e10s (which is sad)
If it is what is causing bug 1067042 then it is dataloss
it's the opposite, this is a test, so bug 1067042 likely causes this failure.
I re-enabled this test in bug 1153340 now that this test works.


Fix browser_bookmark_titles.js to work in e10s

