https://tbpl.mozilla.org/php/getParsedLog.php?id=22068979&tree=Mozilla-Inbound
WINNT 6.2 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-21 05:11:06 PDT for push 1547d8556df7
slave: t-w864-ix-035

06:13:46     INFO -  WARNING: ENSURE_TRUE(weakFrame.IsAlive()) failed: file e:/builds/moz2_slave/m-in-w32-d-0000000000000000000/build/layout/xul/base/src/nsXULPopupManager.cpp, line 935
06:13:46     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | test 9: sent form data
06:13:46     INFO -  ++DOCSHELL 2602FBF0 == 17 [id = 5290]
06:13:46     INFO -  ++DOMWINDOW == 119 (26030398) [serial = 13326] [outer = 00000000]
06:13:46     INFO -  ++DOMWINDOW == 120 (26030868) [serial = 13327] [outer = 26030398]
06:13:46  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | uncaught exception - TypeError: imageNode is null at resource://app/modules/NetworkPanel.jsm:540
06:13:46     INFO -  Stack trace:
06:13:46     INFO -      JS frame :: chrome://mochikit/content/tests/SimpleTest/SimpleTest.js :: simpletestOnerror :: line 1109
06:13:46     INFO -      native frame :: <unknown filename> :: <TOP_LEVEL> :: line 0
06:13:46     INFO -  JavaScript error: resource://app/modules/NetworkPanel.jsm, line 540: TypeError: imageNode is null
06:13:46     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | Console message: [JavaScript Error: "TypeError: imageNode is null" {file: "resource://app/modules/NetworkPanel.jsm" line: 540}]
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | requestBody isVisible=false
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | requestFormData isVisible=true
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | requestCookie isVisible=true
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | responseContainer isVisible=true
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | responseBody isVisible=false
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | responseNoBody isVisible=false
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | responseImage isVisible=false
06:13:46  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | responseImageCached isVisible=true - Got none, expected block
06:13:46     INFO -  Stack trace:
06:13:46     INFO -      JS frame :: chrome://mochikit/content/browser-test.js :: test_is :: line 502
06:13:46     INFO -      JS frame :: chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js :: checkIsVisible :: line 41
06:13:46     INFO -      JS frame :: chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js :: testGen :: line 395
06:13:46     INFO -      JS frame :: chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js :: networkPanel._onUpdate/< :: line 381
06:13:46     INFO -      JS frame :: chrome://mochikit/content/browser-test.js :: test_executeSoon/<.run :: line 531
06:13:46     INFO -      native frame :: <unknown filename> :: <TOP_LEVEL> :: line 0

https://tbpl.mozilla.org/php/getParsedLog.php?id=22068979&tree=Mozilla-Inbound
WINNT 6.2 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-21 05:11:06 PDT for push 1547d8556df7
slave: t-w864-ix-035

06:13:46     INFO -  WARNING: ENSURE_TRUE(weakFrame.IsAlive()) failed: file e:/builds/moz2_slave/m-in-w32-d-0000000000000000000/build/layout/xul/base/src/nsXULPopupManager.cpp, line 935
06:13:46     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | test 9: sent form data
06:13:46     INFO -  ++DOCSHELL 2602FBF0 == 17 [id = 5290]
06:13:46     INFO -  ++DOMWINDOW == 119 (26030398) [serial = 13326] [outer = 00000000]
06:13:46     INFO -  ++DOMWINDOW == 120 (26030868) [serial = 13327] [outer = 26030398]
06:13:46  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | uncaught exception - TypeError: imageNode is null at resource://app/modules/NetworkPanel.jsm:540
06:13:46     INFO -  Stack trace:
06:13:46     INFO -      JS frame :: chrome://mochikit/content/tests/SimpleTest/SimpleTest.js :: simpletestOnerror :: line 1109
06:13:46     INFO -      native frame :: <unknown filename> :: <TOP_LEVEL> :: line 0
06:13:46     INFO -  JavaScript error: resource://app/modules/NetworkPanel.jsm, line 540: TypeError: imageNode is null
06:13:46     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | Console message: [JavaScript Error: "TypeError: imageNode is null" {file: "resource://app/modules/NetworkPanel.jsm" line: 540}]
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | requestBody isVisible=false
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | requestFormData isVisible=true
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | requestCookie isVisible=true
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | responseContainer isVisible=true
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | responseBody isVisible=false
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | responseNoBody isVisible=false
06:13:46     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | responseImage isVisible=false
06:13:46  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | responseImageCached isVisible=true - Got none, expected block
06:13:46     INFO -  Stack trace:
06:13:46     INFO -      JS frame :: chrome://mochikit/content/browser-test.js :: test_is :: line 502
06:13:46     INFO -      JS frame :: chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js :: checkIsVisible :: line 41
06:13:46     INFO -      JS frame :: chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js :: testGen :: line 395
06:13:46     INFO -      JS frame :: chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js :: networkPanel._onUpdate/< :: line 381
06:13:46     INFO -      JS frame :: chrome://mochikit/content/browser-test.js :: test_executeSoon/<.run :: line 531
06:13:46     INFO -      native frame :: <unknown filename> :: <TOP_LEVEL> :: line 0
Ms2ger%gmail.com
https://tbpl.mozilla.org/php/getParsedLog.php?id=24759712&tree=Try
WINNT 6.2 try debug test mochitest-browser-chrome on 2013-06-30 04:51:00
revision: d16eab2937e2
slave: t-w864-ix-098

05:48:07  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | uncaught exception - TypeError: imageNode is null at resource://app/modules/NetworkPanel.jsm:540
05:48:08  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | responseImage isVisible=true - Got none, expected block
05:48:08  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | Displayed image is correct - Got null, expected data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAVRJREFUOI2lk7FLw0AUxr+YpC1CBqcMWfsvCCLdXFzqEJCgDl1EQRGxg9AhSBEJONhFhG52UCuFDjq5dxD8FwoO0qGDOBQkl7vLOeWa2EQDffDBvTu+373Hu1OEEJgntGgxGD6J+7fLXKbt5VNUyhsKAChRBQcPFVFeWskFGH694mZroCQqCLlAwPxcgJBP254CmAD5B7C7dgHLMLF3uzoL4DQEod+Z5sP1FizDxGgyBqfhLID9AahX29J89bwPFgMsSEAQglAf9WobhPpScbPXr4FQHyzIADTsDizDRMPuIOC+zEeTMZo9BwH3EfAMACccbtfGaDKGZZg423yUZrdrg3EqxQlPr0BTdTR7joREN2uqnlBmCwW1hIJagtev4f3zA16/JvfiigMSYyzqJXlw/XKUyOORMUaBor6YavgdjKa8xGOnidadmwtwsnMu18q83/kHSou+bFNDDr4AAAAASUVORK5CYII=
05:48:34  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | Test timed out
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=26673413&tree=Mozilla-Inbound
WINNT 6.2 mozilla-inbound debug test mochitest-browser-chrome on 2013-08-16 20:48:48
revision: ce33bf6e6258
slave: t-w864-ix-047

TypeError: domRules is null
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | uncaught exception - TypeError: imageNode is null at resource://gre/modules/commonjs/toolkit/loader.js -> resource:///modules/devtools/webconsole/network-panel.js:529
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | responseImageCached isVisible=true - Got none, expected block
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_network_panel.js | Displayed image is correct - Got null, expected data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAVRJREFUOI2lk7FLw0AUxr+YpC1CBqcMWfsvCCLdXFzqEJCgDl1EQRGxg9AhSBEJONhFhG52UCuFDjq5dxD8FwoO0qGDOBQkl7vLOeWa2EQDffDBvTu+373Hu1OEEJgntGgxGD6J+7fLXKbt5VNUyhsKAChRBQcPFVFeWskFGH694mZroCQqCLlAwPxcgJBP254CmAD5B7C7dgHLMLF3uzoL4DQEod+Z5sP1FizDxGgyBqfhLID9AahX29J89bwPFgMsSEAQglAf9WobhPpScbPXr4FQHyzIADTsDizDRMPuIOC+zEeTMZo9BwH3EfAMACccbtfGaDKGZZg423yUZrdrg3EqxQlPr0BTdTR7joREN2uqnlBmCwW1hIJagtev4f3zA16/JvfiigMSYyzqJXlw/XKUyOORMUaBor6YavgdjKa8xGOnidadmwtwsnMu18q83/kHSou+bFNDDr4AAAAASUVORK5CYII=
*** Bug 901905 has been marked as a duplicate of this bug. ***
Created attachment 802399
bug-864152-1-fx-team.diff

It seems the network panel code tries to update the iframe document before it is fully loaded. This patch attempts to fix the issue.

r=me (one-line change)

Landed: https://hg.mozilla.org/integration/fx-team/rev/2ea8259f7e39
https://hg.mozilla.org/mozilla-central/rev/2ea8259f7e39
https://hg.mozilla.org/releases/mozilla-aurora/rev/73d17e08f04d
https://hg.mozilla.org/releases/mozilla-beta/rev/0dfa6640c8ae


Intermittent browser_webconsole_network_panel.js | uncaught exception - TypeError: imageNode or elem is null at resource:///modules/devtools/webconsole/network-panel.js

intermittent-failure

Bug 864152 - Fix for intermittent browser_webconsole_network_panel.js | uncaught exception - TypeError: imageNode or elem is null at resource:///modules/devtools/webconsole/network-panel.js; r=me 