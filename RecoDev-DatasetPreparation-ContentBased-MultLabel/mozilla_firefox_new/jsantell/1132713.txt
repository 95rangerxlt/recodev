Whole bunch of 'em on gum, related to lacking an actorID.

 252 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-console.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.

    1005274 Intermittent browser_dbg_addon-console.js | Test timed out followed by 30+ more failures

312 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-modules-unpacked.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.

    1128315 Intermittent browser_dbg_addon-modules-unpacked.js | application crashed [@ nsPurpleBuffer::Block::VisitEntries<RemoveSkippableVisitor>(nsPurpleBuffer&, RemoveSkippableVisitor&)]

379 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-modules.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.
414 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-panels.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.
450 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-sources.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID. 
 252 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-console.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.

    1005274 Intermittent browser_dbg_addon-console.js | Test timed out followed by 30+ more failures

312 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-modules-unpacked.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.

    1128315 Intermittent browser_dbg_addon-modules-unpacked.js | application crashed [@ nsPurpleBuffer::Block::VisitEntries<RemoveSkippableVisitor>(nsPurpleBuffer&, RemoveSkippableVisitor&)]

379 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-modules.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.
414 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-panels.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.
450 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-sources.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.

Whole bunch of 'em on gum, related to lacking an actorID.

 252 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-console.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.

    1005274 Intermittent browser_dbg_addon-console.js | Test timed out followed by 30+ more failures

312 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-modules-unpacked.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.

    1128315 Intermittent browser_dbg_addon-modules-unpacked.js | application crashed [@ nsPurpleBuffer::Block::VisitEntries<RemoveSkippableVisitor>(nsPurpleBuffer&, RemoveSkippableVisitor&)]

379 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-modules.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.
414 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-panels.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.
450 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-sources.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID. 
 252 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-console.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.

    1005274 Intermittent browser_dbg_addon-console.js | Test timed out followed by 30+ more failures

312 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-modules-unpacked.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.

    1128315 Intermittent browser_dbg_addon-modules-unpacked.js | application crashed [@ nsPurpleBuffer::Block::VisitEntries<RemoveSkippableVisitor>(nsPurpleBuffer&, RemoveSkippableVisitor&)]

379 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-modules.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.
414 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-panels.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.
450 INFO TEST-UNEXPECTED-FAIL | browser/devtools/debugger/test/browser_dbg_addon-sources.js | A promise chain failed to handle a rejection: - at resource://gre/modules/commonjs/toolkit/loader.js -> resource://gre/modules/devtools/server/protocol.js:1123 - Error: Can't manage front without an actor ID.
Gonna depend this on bug 1130202.

We need to disable profiler for addons here -- the global profiler is kicking in, running the SharedPerformanceFront, attempting to connect to memory actor which does not exist in this target, but the faulty compatibility test is passing? Either way, looking at this more after bug 1130202 lands.
Also only fails if we run the browser_dbg_aaa_leak_test before any of the addon tests.
Created attachment 8564321
1132713-addon-debugger-fix.patch

This was due to the global profiler kicking in on the addon debugger context, where no profiler/timeline/memory actors exist. While the performance tool does not show for the addon debugger (because profiler actor does not exist), we still attempted to connect to the timeline/memory actors from the global profiler (in gDevTools). The changes in compatibility now works, as we test for both Gecko 38+ features, AND the memory actor existing.

 https://treeherder.mozilla.org/#/jobs?repo=try&revision=bfadeb605a78
FYI tests were failing locally on my gum-ified branch, and now are passing with this patch, so should fix all those debugger issues on gum
Comment on attachment 8564321
1132713-addon-debugger-fix.patch

Review of attachment 8564321:
-----------------------------------------------------------------

Yay less oranges
https://hg.mozilla.org/integration/fx-team/rev/82abcbb019d7

Merged into gum: https://hg.mozilla.org/projects/gum/rev/82abcbb019d7
https://hg.mozilla.org/mozilla-central/rev/82abcbb019d7


Addon Debugger failures from new performance tool



Bug 1132713 - Only enable memory actor when both gecko 38+ and memory actor exists, for addon debugger. r=vp