Smoke for build 20020611

- open type hierarchy for TestCase
- switch to super types
- lock view
- select countTestCase
- open Editor on TestCase and Test
- close editor
Java Model Exception: Java Model Status [run does not exist.]
        at org.eclipse.jdt.internal.core.JavaElement.newNotPresentException(Java
Element.java:500)
        at org.eclipse.jdt.internal.core.JavaElement.openHierarchy(JavaElement.j
ava:529)
        at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.
java:308)
        at org.eclipse.jdt.internal.core.SourceMethod.isConstructor(SourceMethod
.java:140)
        at org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyContentProvide
r.hasFilteredChildren(TypeHierarchyContentProvider.java:204)
        at org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyContentProvide
r.addFilteredTypes(TypeHierarchyContentProvider.java:182)
        at org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyContentProvide
r.getChildren(TypeHierarchyContentProvider.java:126)
        at org.eclipse.jface.viewers.AbstractTreeViewer.getRawChildren(AbstractT
reeViewer.java:571)
        at org.eclipse.jface.viewers.StructuredViewer.getFilteredChildren(Struct
uredViewer.java:346)
        at org.eclipse.jface.viewers.StructuredViewer.getSortedChildren(Structur
edViewer.java:447)
        at org.eclipse.jface.viewers.AbstractTreeViewer.updateChildren(AbstractT
reeViewer.java:1189)
        at org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh(Abstract
TreeViewer.java:839)
        at org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh(Abstract
TreeViewer.java:817)
        at org.eclipse.jface.viewers.StructuredViewer$4.run(StructuredViewer.jav
a:748)
        at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(Struct
uredViewer.java:688)
        at org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.j
ava:746)
        at org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart.doTyp
eHierarchyChangedOnViewers(TypeHierarchyViewPart.java:1171)
        at org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart.acces
s$10(TypeHierarchyViewPart.java:1153)
        at org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart$8.run
(TypeHierarchyViewPart.java:1146)
        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:29)
        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.ja
va:93)
        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:1504)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1292)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1177)
        at org.eclipse.ui.internal.Workbench.run(Workbench.java:1160)
        at org.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoa
der.java:739)
        at org.eclipse.core.boot.BootLoader.run(BootLoader.java:462)
        at java.lang.reflect.Method.invoke(Native Method)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:248)
        at org.eclipse.core.launcher.Main.run(Main.java:697)
        at org.eclipse.core.launcher.Main.main(Main.java:530)

Smoke for build 20020611

- open type hierarchy for TestCase
- switch to super types
- lock view
- select countTestCase
- open Editor on TestCase and Test
- close editor
Java Model Exception: Java Model Status [run does not exist.]
        at org.eclipse.jdt.internal.core.JavaElement.newNotPresentException(Java
Element.java:500)
        at org.eclipse.jdt.internal.core.JavaElement.openHierarchy(JavaElement.j
ava:529)
        at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.
java:308)
        at org.eclipse.jdt.internal.core.SourceMethod.isConstructor(SourceMethod
.java:140)
        at org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyContentProvide
r.hasFilteredChildren(TypeHierarchyContentProvider.java:204)
        at org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyContentProvide
r.addFilteredTypes(TypeHierarchyContentProvider.java:182)
        at org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyContentProvide
r.getChildren(TypeHierarchyContentProvider.java:126)
        at org.eclipse.jface.viewers.AbstractTreeViewer.getRawChildren(AbstractT
reeViewer.java:571)
        at org.eclipse.jface.viewers.StructuredViewer.getFilteredChildren(Struct
uredViewer.java:346)
        at org.eclipse.jface.viewers.StructuredViewer.getSortedChildren(Structur
edViewer.java:447)
        at org.eclipse.jface.viewers.AbstractTreeViewer.updateChildren(AbstractT
reeViewer.java:1189)
        at org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh(Abstract
TreeViewer.java:839)
        at org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh(Abstract
TreeViewer.java:817)
        at org.eclipse.jface.viewers.StructuredViewer$4.run(StructuredViewer.jav
a:748)
        at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(Struct
uredViewer.java:688)
        at org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.j
ava:746)
        at org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart.doTyp
eHierarchyChangedOnViewers(TypeHierarchyViewPart.java:1171)
        at org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart.acces
s$10(TypeHierarchyViewPart.java:1153)
        at org.eclipse.jdt.internal.ui.typehierarchy.TypeHierarchyViewPart$8.run
(TypeHierarchyViewPart.java:1146)
        at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:29)
        at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.ja
va:93)
        at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:1504)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:1292)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1177)
        at org.eclipse.ui.internal.Workbench.run(Workbench.java:1160)
        at org.eclipse.core.internal.boot.InternalBootLoader.run(InternalBootLoa
der.java:739)
        at org.eclipse.core.boot.BootLoader.run(BootLoader.java:462)
        at java.lang.reflect.Method.invoke(Native Method)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:248)
        at org.eclipse.core.launcher.Main.run(Main.java:697)
        at org.eclipse.core.launcher.Main.main(Main.java:530)
The problem is that the content provider uses a method for filtering that is 
from a destroyed working copy.
This is not a regression introduced in F3 fix pass.
Detailed steps to reproduce:

- load JUnit
- open hierarchy on TestCase
- switch to super class view
- lock view on countTestCase
- open TestCase
- open Test
- close Test
- close TestCase

This only happens when in lock mode and if an editor is close which contains 
the element the lock in on.

Should consider if this is a candidate for F4
Consequences if not fixed: No data is lost but exceptions in the log decrease 
the confidence in the system. Marking as F4 candidate
*** Bug 20011 has been marked as a duplicate of this bug. ***
reviewed by Dirk Baeumer & Claude Knaus
