M8

I had just finished synching with head and the autobuilder started running.  I
went to create a new class file (via the new class wizard) while this was
running and I hit "Browse" for superclass.  This took forever, and I hit cancel
to get out of the new class wizard.  I then hit ctrl-shift-T for the open type
dialog.  At this point the workbench hung for a good 5 minutes.  The following
stack dump was taken about a minute before it came back to life.

Full thread dump Java HotSpot(TM) Client VM (1.4.1_01-b01 mixed mode):

"Text Viewer Hover Presenter" daemon prio=2 tid=0x17EACAF0 nid=0x908 runnable [1
863f000..1863fd8c]
        at org.eclipse.core.runtime.Path.computeHashCode(Path.java:322)
        at org.eclipse.core.runtime.Path.<init>(Path.java:83)
        at org.eclipse.core.runtime.Path.removeFirstSegments(Path.java:696)
        at org.eclipse.core.internal.resources.Resource.getProjectRelativePath(R
esource.java:906)
        at org.eclipse.jdt.internal.core.PackageFragment.buildStructure(PackageF
ragment.java:81)
        at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:16
9)
        at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.
java:543)
        at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.
java:280)
        at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.
java:266)
        at org.eclipse.jdt.internal.core.JavaElement.getChildren(JavaElement.jav
a:221)
        at org.eclipse.jdt.internal.core.JavaElement.getChildrenOfType(JavaEleme
nt.java:235)
        at org.eclipse.jdt.internal.core.PackageFragment.getCompilationUnits(Pac
kageFragment.java:210)
        at org.eclipse.jdt.internal.core.NameLookup.seekTypesInSourcePackage(Nam
eLookup.java:618)
        at org.eclipse.jdt.internal.core.NameLookup.seekTypes(NameLookup.java:55
1)
        at org.eclipse.jdt.internal.core.NameLookup.findAllTypes(NameLookup.java
:154)
        at org.eclipse.jdt.internal.core.NameLookup.seekTypes(NameLookup.java:54
0)
        at org.eclipse.jdt.internal.core.SearchableEnvironment.findTypes(Searcha
bleEnvironment.java:287)
        at org.eclipse.jdt.internal.core.SearchableEnvironment.findTypes(Searcha
bleEnvironment.java:263)
        at org.eclipse.jdt.internal.codeassist.SelectionEngine.select(SelectionE
ngine.java:531)
        at org.eclipse.jdt.internal.core.Openable.codeSelect(Openable.java:143)
        at org.eclipse.jdt.internal.core.CompilationUnit.codeSelect(CompilationU
nit.java:282)
        at org.eclipse.jdt.internal.core.CompilationUnit.codeSelect(CompilationU
nit.java:276)
        at org.eclipse.jdt.internal.ui.text.java.hover.AbstractJavaEditorTextHov
er.getHoverInfo(AbstractJavaEditorTextHover.java:109)
        - locked <0591A588> (a org.eclipse.jdt.internal.core.CompilationUnit)
        at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverIn
fo(BestMatchHover.java:102)
        at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.
getHoverInfo(JavaEditorTextHoverProxy.java:69)
        at org.eclipse.jface.text.TextViewerHoverManager$4.run(TextViewerHoverMa
nager.java:161)

"Worker-8" prio=5 tid=0x17E5BCD0 nid=0x89c runnable [1887f000..1887fd8c]
        at java.io.FileOutputStream.close0(Native Method)
        at java.io.FileOutputStream.close(FileOutputStream.java:276)
        at org.eclipse.core.internal.localstore.FileSystemStore.transferStreams(
FileSystemStore.java:356)
        at org.eclipse.core.internal.localstore.FileSystemStore.write(FileSystem
Store.java:373)
        at org.eclipse.core.internal.localstore.FileSystemResourceManager.write(
FileSystemResourceManager.java:738)
        at org.eclipse.core.internal.resources.File.internalSetContents(File.jav
a:277)
        at org.eclipse.core.internal.resources.File.create(File.java:157)
        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.writeClass
FileBytes(AbstractImageBuilder.java:463)
        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.writeClass
File(AbstractImageBuilder.java:446)
        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.acceptResu
lt(AbstractImageBuilder.java:115)
        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:339)

        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(Ab
stractImageBuilder.java:203)
        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(Ab
stractImageBuilder.java:153)
        at org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build(BatchIm
ageBuilder.java:49)
        at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll(JavaBuilde
r.java:213)
        at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBui
lder.java:227)
        at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.j
ava:152)
        at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java
:504)
        at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatfo
rm.java:610)
        at org.eclipse.core.runtime.Platform.run(Platform.java:521)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager
.java:137)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager
.java:224)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager
.java:165)
        at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java
:194)
        at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatfo
rm.java:610)
        at org.eclipse.core.runtime.Platform.run(Platform.java:521)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager
.java:197)
        at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildMan
ager.java:242)
        at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java
:270)
        at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.ja
va:137)
        at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:1
68)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:62)

"All Types Caching" prio=4 tid=0x17235B08 nid=0x4b0 waiting on condition [187bf0
00..187bfd8c]
        at java.lang.Thread.sleep(Native Method)
        at org.eclipse.jdt.internal.core.search.processing.JobManager.performCon
currentJob(JobManager.java:245)
        at org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames(SearchEng
ine.java:848)
        at org.eclipse.jdt.internal.corext.util.AllTypesCache.search(AllTypesCac
he.java:496)
        at org.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.doSearc
hTypes(AllTypesCache.java:180)
        at org.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.run(All
TypesCache.java:149)

"org.eclipse.jdt.internal.ui.text.JavaReconciler" daemon prio=2 tid=0x171D49B8 n
id=0x678 waiting for monitor entry [17adf000..17adfd8c]
        at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconci
le(JavaReconcilingStrategy.java:84)
        - waiting to lock <0591A588> (a org.eclipse.jdt.internal.core.Compilatio
nUnit)
        at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconci
le(JavaReconcilingStrategy.java:118)
        at org.eclipse.jface.text.reconciler.CompositeReconcilingStrategy.reconc
ile(CompositeReconcilingStrategy.java:83)
        at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.rec
oncile(JavaCompositeReconcilingStrategy.java:97)
        at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconcil
er.java:76)
        at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread
.run(AbstractReconciler.java:189)

"Worker-6" prio=5 tid=0x172B3890 nid=0x7fc in Object.wait() [184bf000..184bfd8c]

        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:184)
        - locked <04173230> (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:21
0)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

"Worker-5" prio=5 tid=0x17BE0E80 nid=0x88 in Object.wait() [1847f000..1847fd8c]
        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:184)
        - locked <04173230> (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:21
0)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

"Worker-4" prio=5 tid=0x17327C68 nid=0xcc runnable [1843f000..1843fd8c]
        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.ImplicitJobs$ThreadJob.joinRun(Implici
tJobs.java:118)
        - locked <06BFE650> (a org.eclipse.core.internal.jobs.ImplicitJobs$Threa
dJob)
        at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:2
65)
        at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:1
49)
        at org.eclipse.ui.views.markers.internal.MarkerView.internalRefresh(Mark
erView.java:168)
        at org.eclipse.ui.views.markers.internal.MarkerView.access$2(MarkerView.
java:157)
        at org.eclipse.ui.views.markers.internal.MarkerView$4.run(MarkerView.jav
a:242)
        at org.eclipse.ui.views.markers.internal.RestartableJob$2.run(Restartabl
eJob.java:86)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:62)

"Worker-3" prio=5 tid=0x172B7800 nid=0x7f0 runnable [183ff000..183ffd8c]
        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.ImplicitJobs$ThreadJob.joinRun(Implici
tJobs.java:118)
        - locked <069C4920> (a org.eclipse.core.internal.jobs.ImplicitJobs$Threa
dJob)
        at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:2
65)
        at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:1
49)
        at org.eclipse.team.internal.ccvs.core.syncinfo.ReentrantLock$ThreadInfo
.pushRule(ReentrantLock.java:80)
        at org.eclipse.team.internal.ccvs.core.syncinfo.ReentrantLock.acquire(Re
entrantLock.java:269)
        at org.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.beg
inBatching(EclipseSynchronizer.java:496)
        at org.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.ign
oreFilesChanged(EclipseSynchronizer.java:632)
        at org.eclipse.team.internal.ccvs.core.syncinfo.DeferredResourceChangeHa
ndler.dispatchEvents(DeferredResourceChangeHandler.java:64)
        at org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(B
ackgroundEventHandler.java:278)
        at org.eclipse.team.internal.core.BackgroundEventHandler$1.run(Backgroun
dEventHandler.java:131)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:62)

"Worker-2" prio=5 tid=0x17062328 nid=0x7bc in Object.wait() [17b6f000..17b6fd8c]

        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.Semaphore.acquire(Semaphore.java:36)
        - locked <0957C888> (a org.eclipse.core.internal.jobs.Semaphore)
        at org.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java
:161)
        at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:9
9)
        at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:7
5)
        at org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.j
ava:92)
        at org.eclipse.core.internal.resources.Workspace.prepareOperation(Worksp
ace.java:1521)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1554
)
        at org.eclipse.core.internal.events.NotificationManager$NotifyJob.run(No
tificationManager.java:37)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:62)

"Worker-1" prio=5 tid=0x1703DE60 nid=0xa0 in Object.wait() [17a9f000..17a9fd8c]
        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:184)
        - locked <04173230> (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:21
0)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

"Worker-0" prio=5 tid=0x1702A1C8 nid=0x25c in Object.wait() [17a5f000..17a5fd8c]

        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:184)
        - locked <04173230> (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:21
0)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

"Java indexing" daemon prio=4 tid=0x16FD7240 nid=0x1e4 runnable [17a1f000..17a1f
d8c]
        at java.io.WinNTFileSystem.getBooleanAttributes(Native Method)
        at java.io.File.exists(File.java:679)
        at org.eclipse.core.internal.localstore.FileSystemResourceManager.read(F
ileSystemResourceManager.java:474)
        at org.eclipse.core.internal.resources.File.getContents(File.java:251)
        at org.eclipse.core.internal.resources.File.getContents(File.java:241)
        at org.eclipse.core.internal.resources.File.getCharset(File.java:216)
        at org.eclipse.jdt.internal.core.search.JavaSearchDocument.getEncoding(J
avaSearchDocument.java:71)
        at org.eclipse.jdt.internal.core.search.JavaSearchDocument.getCharConten
ts(JavaSearchDocument.java:58)
        at org.eclipse.jdt.internal.core.search.indexing.SourceIndexer.indexDocu
ment(SourceIndexer.java:67)
        at org.eclipse.jdt.internal.core.search.JavaSearchParticipant.indexDocum
ent(JavaSearchParticipant.java:105)
        at org.eclipse.jdt.internal.core.search.indexing.IndexManager.indexDocum
ent(IndexManager.java:198)
        at org.eclipse.jdt.internal.core.search.indexing.IndexManager$1.execute(
IndexManager.java:508)
        at org.eclipse.jdt.internal.core.search.processing.JobManager.run(JobMan
ager.java:344)
        at java.lang.Thread.run(Thread.java:536)

"Start Level Event Dispatcher" daemon prio=5 tid=0x16D47808 nid=0x140 in Object.
wait() [1736f000..1736fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on <03E67610> (a org.eclipse.osgi.framework.eventmgr.EventThre
ad)
        at java.lang.Object.wait(Object.java:426)
        at org.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThr
ead.java:167)
        - locked <03E67610> (a org.eclipse.osgi.framework.eventmgr.EventThread)
        at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:
118)

"Framework Event Dispatcher" daemon prio=5 tid=0x00A405A8 nid=0x408 in Object.wa
it() [16f2f000..16f2fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on <03E5F648> (a org.eclipse.osgi.framework.eventmgr.EventThre
ad)
        at java.lang.Object.wait(Object.java:426)
        at org.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThr
ead.java:167)
        - locked <03E5F648> (a org.eclipse.osgi.framework.eventmgr.EventThread)
        at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:
118)

"Signal Dispatcher" daemon prio=10 tid=0x009E8098 nid=0x7d8 waiting on condition
 [0..0]

"Finalizer" daemon prio=9 tid=0x0003E790 nid=0x524 in Object.wait() [16bcf000..1
6bcfd8c]
        at java.lang.Object.wait(Native Method)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)
        - locked <03E24A58> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=10 tid=0x0003D360 nid=0x54c in Object.wait() [95
f000..95fd8c]
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:426)
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:113)
        - locked <03E24AC0> (a java.lang.ref.Reference$Lock)

"main" prio=7 tid=0x00034C10 nid=0xc8 waiting for monitor entry [7e000..7fc40]
        at org.eclipse.jdt.internal.corext.util.JavaModelUtil.reconcile(JavaMode
lUtil.java:754)
        - waiting to lock <0591A588> (a org.eclipse.jdt.internal.core.Compilatio
nUnit)
        at org.eclipse.jdt.internal.corext.util.AllTypesCache.forceDeltaComplete
(AllTypesCache.java:315)
        at org.eclipse.jdt.internal.corext.util.AllTypesCache.isCacheUpToDate(Al
lTypesCache.java:305)
        at org.eclipse.jdt.internal.ui.dialogs.TypeSelectionDialog.open(TypeSele
ctionDialog.java:179)
        at org.eclipse.jdt.internal.ui.actions.OpenTypeAction.run(OpenTypeAction
.java:59)
        at org.eclipse.jdt.internal.ui.actions.OpenTypeAction.run(OpenTypeAction
.java:80)
        at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:2
69)
        at org.eclipse.ui.internal.WWinPluginAction.runWithEvent(WWinPluginActio
n.java:207)
        at org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:68)
        at org.eclipse.ui.internal.commands.Command.execute(Command.java:173)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(Workben
chKeyboard.java:463)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboar
d.java:855)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(Workbe
nchKeyboard.java:896)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindi
ngs(WorkbenchKeyboard.java:522)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2(WorkbenchKeyb
oard.java:488)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent(Workbenc
hKeyboard.java:261)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
        at org.eclipse.swt.widgets.Display.filterEvent(Display.java:705)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:768)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:793)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:778)
        at org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1720)
        at org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1716)
        at org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3041)
        at org.eclipse.swt.widgets.Control.windowProc(Control.java:2944)
        at org.eclipse.swt.widgets.Display.windowProc(Display.java:3146)
        at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
        at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1374)
        at org.eclipse.swt.internal.BidiUtil.windowProc(BidiUtil.java:647)
        at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
        at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1450)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2254)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1562)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1536)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.jav
a:257)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90
)
        at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformAct
ivator.java:277)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.ja
va:239)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.ja
va:117)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:324)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:267)
        at org.eclipse.core.launcher.Main.run(Main.java:692)
        at org.eclipse.core.launcher.Main.main(Main.java:676)

"VM Thread" prio=5 tid=0x009E50D0 nid=0x550 runnable

"VM Periodic Task Thread" prio=10 tid=0x009E6D88 nid=0x518 waiting on condition

"Suspend Checker Thread" prio=10 tid=0x009E76D8 nid=0x7cc runnable

M8

I had just finished synching with head and the autobuilder started running.  I
went to create a new class file (via the new class wizard) while this was
running and I hit "Browse" for superclass.  This took forever, and I hit cancel
to get out of the new class wizard.  I then hit ctrl-shift-T for the open type
dialog.  At this point the workbench hung for a good 5 minutes.  The following
stack dump was taken about a minute before it came back to life.

Full thread dump Java HotSpot(TM) Client VM (1.4.1_01-b01 mixed mode):

"Text Viewer Hover Presenter" daemon prio=2 tid=0x17EACAF0 nid=0x908 runnable [1
863f000..1863fd8c]
        at org.eclipse.core.runtime.Path.computeHashCode(Path.java:322)
        at org.eclipse.core.runtime.Path.<init>(Path.java:83)
        at org.eclipse.core.runtime.Path.removeFirstSegments(Path.java:696)
        at org.eclipse.core.internal.resources.Resource.getProjectRelativePath(R
esource.java:906)
        at org.eclipse.jdt.internal.core.PackageFragment.buildStructure(PackageF
ragment.java:81)
        at org.eclipse.jdt.internal.core.Openable.generateInfos(Openable.java:16
9)
        at org.eclipse.jdt.internal.core.JavaElement.openWhenClosed(JavaElement.
java:543)
        at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.
java:280)
        at org.eclipse.jdt.internal.core.JavaElement.getElementInfo(JavaElement.
java:266)
        at org.eclipse.jdt.internal.core.JavaElement.getChildren(JavaElement.jav
a:221)
        at org.eclipse.jdt.internal.core.JavaElement.getChildrenOfType(JavaEleme
nt.java:235)
        at org.eclipse.jdt.internal.core.PackageFragment.getCompilationUnits(Pac
kageFragment.java:210)
        at org.eclipse.jdt.internal.core.NameLookup.seekTypesInSourcePackage(Nam
eLookup.java:618)
        at org.eclipse.jdt.internal.core.NameLookup.seekTypes(NameLookup.java:55
1)
        at org.eclipse.jdt.internal.core.NameLookup.findAllTypes(NameLookup.java
:154)
        at org.eclipse.jdt.internal.core.NameLookup.seekTypes(NameLookup.java:54
0)
        at org.eclipse.jdt.internal.core.SearchableEnvironment.findTypes(Searcha
bleEnvironment.java:287)
        at org.eclipse.jdt.internal.core.SearchableEnvironment.findTypes(Searcha
bleEnvironment.java:263)
        at org.eclipse.jdt.internal.codeassist.SelectionEngine.select(SelectionE
ngine.java:531)
        at org.eclipse.jdt.internal.core.Openable.codeSelect(Openable.java:143)
        at org.eclipse.jdt.internal.core.CompilationUnit.codeSelect(CompilationU
nit.java:282)
        at org.eclipse.jdt.internal.core.CompilationUnit.codeSelect(CompilationU
nit.java:276)
        at org.eclipse.jdt.internal.ui.text.java.hover.AbstractJavaEditorTextHov
er.getHoverInfo(AbstractJavaEditorTextHover.java:109)
        - locked <0591A588> (a org.eclipse.jdt.internal.core.CompilationUnit)
        at org.eclipse.jdt.internal.ui.text.java.hover.BestMatchHover.getHoverIn
fo(BestMatchHover.java:102)
        at org.eclipse.jdt.internal.ui.text.java.hover.JavaEditorTextHoverProxy.
getHoverInfo(JavaEditorTextHoverProxy.java:69)
        at org.eclipse.jface.text.TextViewerHoverManager$4.run(TextViewerHoverMa
nager.java:161)

"Worker-8" prio=5 tid=0x17E5BCD0 nid=0x89c runnable [1887f000..1887fd8c]
        at java.io.FileOutputStream.close0(Native Method)
        at java.io.FileOutputStream.close(FileOutputStream.java:276)
        at org.eclipse.core.internal.localstore.FileSystemStore.transferStreams(
FileSystemStore.java:356)
        at org.eclipse.core.internal.localstore.FileSystemStore.write(FileSystem
Store.java:373)
        at org.eclipse.core.internal.localstore.FileSystemResourceManager.write(
FileSystemResourceManager.java:738)
        at org.eclipse.core.internal.resources.File.internalSetContents(File.jav
a:277)
        at org.eclipse.core.internal.resources.File.create(File.java:157)
        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.writeClass
FileBytes(AbstractImageBuilder.java:463)
        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.writeClass
File(AbstractImageBuilder.java:446)
        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.acceptResu
lt(AbstractImageBuilder.java:115)
        at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:339)

        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(Ab
stractImageBuilder.java:203)
        at org.eclipse.jdt.internal.core.builder.AbstractImageBuilder.compile(Ab
stractImageBuilder.java:153)
        at org.eclipse.jdt.internal.core.builder.BatchImageBuilder.build(BatchIm
ageBuilder.java:49)
        at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildAll(JavaBuilde
r.java:213)
        at org.eclipse.jdt.internal.core.builder.JavaBuilder.buildDeltas(JavaBui
lder.java:227)
        at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.j
ava:152)
        at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java
:504)
        at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatfo
rm.java:610)
        at org.eclipse.core.runtime.Platform.run(Platform.java:521)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager
.java:137)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager
.java:224)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager
.java:165)
        at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java
:194)
        at org.eclipse.core.internal.runtime.InternalPlatform.run(InternalPlatfo
rm.java:610)
        at org.eclipse.core.runtime.Platform.run(Platform.java:521)
        at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager
.java:197)
        at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildMan
ager.java:242)
        at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java
:270)
        at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.ja
va:137)
        at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:1
68)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:62)

"All Types Caching" prio=4 tid=0x17235B08 nid=0x4b0 waiting on condition [187bf0
00..187bfd8c]
        at java.lang.Thread.sleep(Native Method)
        at org.eclipse.jdt.internal.core.search.processing.JobManager.performCon
currentJob(JobManager.java:245)
        at org.eclipse.jdt.core.search.SearchEngine.searchAllTypeNames(SearchEng
ine.java:848)
        at org.eclipse.jdt.internal.corext.util.AllTypesCache.search(AllTypesCac
he.java:496)
        at org.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.doSearc
hTypes(AllTypesCache.java:180)
        at org.eclipse.jdt.internal.corext.util.AllTypesCache$TypeCacher.run(All
TypesCache.java:149)

"org.eclipse.jdt.internal.ui.text.JavaReconciler" daemon prio=2 tid=0x171D49B8 n
id=0x678 waiting for monitor entry [17adf000..17adfd8c]
        at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconci
le(JavaReconcilingStrategy.java:84)
        - waiting to lock <0591A588> (a org.eclipse.jdt.internal.core.Compilatio
nUnit)
        at org.eclipse.jdt.internal.ui.text.java.JavaReconcilingStrategy.reconci
le(JavaReconcilingStrategy.java:118)
        at org.eclipse.jface.text.reconciler.CompositeReconcilingStrategy.reconc
ile(CompositeReconcilingStrategy.java:83)
        at org.eclipse.jdt.internal.ui.text.JavaCompositeReconcilingStrategy.rec
oncile(JavaCompositeReconcilingStrategy.java:97)
        at org.eclipse.jface.text.reconciler.MonoReconciler.process(MonoReconcil
er.java:76)
        at org.eclipse.jface.text.reconciler.AbstractReconciler$BackgroundThread
.run(AbstractReconciler.java:189)

"Worker-6" prio=5 tid=0x172B3890 nid=0x7fc in Object.wait() [184bf000..184bfd8c]

        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:184)
        - locked <04173230> (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:21
0)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

"Worker-5" prio=5 tid=0x17BE0E80 nid=0x88 in Object.wait() [1847f000..1847fd8c]
        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:184)
        - locked <04173230> (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:21
0)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

"Worker-4" prio=5 tid=0x17327C68 nid=0xcc runnable [1843f000..1843fd8c]
        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.ImplicitJobs$ThreadJob.joinRun(Implici
tJobs.java:118)
        - locked <06BFE650> (a org.eclipse.core.internal.jobs.ImplicitJobs$Threa
dJob)
        at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:2
65)
        at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:1
49)
        at org.eclipse.ui.views.markers.internal.MarkerView.internalRefresh(Mark
erView.java:168)
        at org.eclipse.ui.views.markers.internal.MarkerView.access$2(MarkerView.
java:157)
        at org.eclipse.ui.views.markers.internal.MarkerView$4.run(MarkerView.jav
a:242)
        at org.eclipse.ui.views.markers.internal.RestartableJob$2.run(Restartabl
eJob.java:86)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:62)

"Worker-3" prio=5 tid=0x172B7800 nid=0x7f0 runnable [183ff000..183ffd8c]
        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.ImplicitJobs$ThreadJob.joinRun(Implici
tJobs.java:118)
        - locked <069C4920> (a org.eclipse.core.internal.jobs.ImplicitJobs$Threa
dJob)
        at org.eclipse.core.internal.jobs.ImplicitJobs.begin(ImplicitJobs.java:2
65)
        at org.eclipse.core.internal.jobs.JobManager.beginRule(JobManager.java:1
49)
        at org.eclipse.team.internal.ccvs.core.syncinfo.ReentrantLock$ThreadInfo
.pushRule(ReentrantLock.java:80)
        at org.eclipse.team.internal.ccvs.core.syncinfo.ReentrantLock.acquire(Re
entrantLock.java:269)
        at org.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.beg
inBatching(EclipseSynchronizer.java:496)
        at org.eclipse.team.internal.ccvs.core.resources.EclipseSynchronizer.ign
oreFilesChanged(EclipseSynchronizer.java:632)
        at org.eclipse.team.internal.ccvs.core.syncinfo.DeferredResourceChangeHa
ndler.dispatchEvents(DeferredResourceChangeHandler.java:64)
        at org.eclipse.team.internal.core.BackgroundEventHandler.processEvents(B
ackgroundEventHandler.java:278)
        at org.eclipse.team.internal.core.BackgroundEventHandler$1.run(Backgroun
dEventHandler.java:131)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:62)

"Worker-2" prio=5 tid=0x17062328 nid=0x7bc in Object.wait() [17b6f000..17b6fd8c]

        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.Semaphore.acquire(Semaphore.java:36)
        - locked <0957C888> (a org.eclipse.core.internal.jobs.Semaphore)
        at org.eclipse.core.internal.jobs.OrderedLock.doAcquire(OrderedLock.java
:161)
        at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:9
9)
        at org.eclipse.core.internal.jobs.OrderedLock.acquire(OrderedLock.java:7
5)
        at org.eclipse.core.internal.resources.WorkManager.checkIn(WorkManager.j
ava:92)
        at org.eclipse.core.internal.resources.Workspace.prepareOperation(Worksp
ace.java:1521)
        at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:1554
)
        at org.eclipse.core.internal.events.NotificationManager$NotifyJob.run(No
tificationManager.java:37)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:62)

"Worker-1" prio=5 tid=0x1703DE60 nid=0xa0 in Object.wait() [17a9f000..17a9fd8c]
        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:184)
        - locked <04173230> (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:21
0)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

"Worker-0" prio=5 tid=0x1702A1C8 nid=0x25c in Object.wait() [17a5f000..17a5fd8c]

        at java.lang.Object.wait(Native Method)
        at org.eclipse.core.internal.jobs.WorkerPool.sleep(WorkerPool.java:184)
        - locked <04173230> (a org.eclipse.core.internal.jobs.WorkerPool)
        at org.eclipse.core.internal.jobs.WorkerPool.startJob(WorkerPool.java:21
0)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

"Java indexing" daemon prio=4 tid=0x16FD7240 nid=0x1e4 runnable [17a1f000..17a1f
d8c]
        at java.io.WinNTFileSystem.getBooleanAttributes(Native Method)
        at java.io.File.exists(File.java:679)
        at org.eclipse.core.internal.localstore.FileSystemResourceManager.read(F
ileSystemResourceManager.java:474)
        at org.eclipse.core.internal.resources.File.getContents(File.java:251)
        at org.eclipse.core.internal.resources.File.getContents(File.java:241)
        at org.eclipse.core.internal.resources.File.getCharset(File.java:216)
        at org.eclipse.jdt.internal.core.search.JavaSearchDocument.getEncoding(J
avaSearchDocument.java:71)
        at org.eclipse.jdt.internal.core.search.JavaSearchDocument.getCharConten
ts(JavaSearchDocument.java:58)
        at org.eclipse.jdt.internal.core.search.indexing.SourceIndexer.indexDocu
ment(SourceIndexer.java:67)
        at org.eclipse.jdt.internal.core.search.JavaSearchParticipant.indexDocum
ent(JavaSearchParticipant.java:105)
        at org.eclipse.jdt.internal.core.search.indexing.IndexManager.indexDocum
ent(IndexManager.java:198)
        at org.eclipse.jdt.internal.core.search.indexing.IndexManager$1.execute(
IndexManager.java:508)
        at org.eclipse.jdt.internal.core.search.processing.JobManager.run(JobMan
ager.java:344)
        at java.lang.Thread.run(Thread.java:536)

"Start Level Event Dispatcher" daemon prio=5 tid=0x16D47808 nid=0x140 in Object.
wait() [1736f000..1736fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on <03E67610> (a org.eclipse.osgi.framework.eventmgr.EventThre
ad)
        at java.lang.Object.wait(Object.java:426)
        at org.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThr
ead.java:167)
        - locked <03E67610> (a org.eclipse.osgi.framework.eventmgr.EventThread)
        at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:
118)

"Framework Event Dispatcher" daemon prio=5 tid=0x00A405A8 nid=0x408 in Object.wa
it() [16f2f000..16f2fd8c]
        at java.lang.Object.wait(Native Method)
        - waiting on <03E5F648> (a org.eclipse.osgi.framework.eventmgr.EventThre
ad)
        at java.lang.Object.wait(Object.java:426)
        at org.eclipse.osgi.framework.eventmgr.EventThread.getNextEvent(EventThr
ead.java:167)
        - locked <03E5F648> (a org.eclipse.osgi.framework.eventmgr.EventThread)
        at org.eclipse.osgi.framework.eventmgr.EventThread.run(EventThread.java:
118)

"Signal Dispatcher" daemon prio=10 tid=0x009E8098 nid=0x7d8 waiting on condition
 [0..0]

"Finalizer" daemon prio=9 tid=0x0003E790 nid=0x524 in Object.wait() [16bcf000..1
6bcfd8c]
        at java.lang.Object.wait(Native Method)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:111)
        - locked <03E24A58> (a java.lang.ref.ReferenceQueue$Lock)
        at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:127)
        at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=10 tid=0x0003D360 nid=0x54c in Object.wait() [95
f000..95fd8c]
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:426)
        at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:113)
        - locked <03E24AC0> (a java.lang.ref.Reference$Lock)

"main" prio=7 tid=0x00034C10 nid=0xc8 waiting for monitor entry [7e000..7fc40]
        at org.eclipse.jdt.internal.corext.util.JavaModelUtil.reconcile(JavaMode
lUtil.java:754)
        - waiting to lock <0591A588> (a org.eclipse.jdt.internal.core.Compilatio
nUnit)
        at org.eclipse.jdt.internal.corext.util.AllTypesCache.forceDeltaComplete
(AllTypesCache.java:315)
        at org.eclipse.jdt.internal.corext.util.AllTypesCache.isCacheUpToDate(Al
lTypesCache.java:305)
        at org.eclipse.jdt.internal.ui.dialogs.TypeSelectionDialog.open(TypeSele
ctionDialog.java:179)
        at org.eclipse.jdt.internal.ui.actions.OpenTypeAction.run(OpenTypeAction
.java:59)
        at org.eclipse.jdt.internal.ui.actions.OpenTypeAction.run(OpenTypeAction
.java:80)
        at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:2
69)
        at org.eclipse.ui.internal.WWinPluginAction.runWithEvent(WWinPluginActio
n.java:207)
        at org.eclipse.ui.commands.ActionHandler.execute(ActionHandler.java:68)
        at org.eclipse.ui.internal.commands.Command.execute(Command.java:173)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.executeCommand(Workben
chKeyboard.java:463)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.press(WorkbenchKeyboar
d.java:855)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.processKeyEvent(Workbe
nchKeyboard.java:896)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.filterKeySequenceBindi
ngs(WorkbenchKeyboard.java:522)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard.access$2(WorkbenchKeyb
oard.java:488)
        at org.eclipse.ui.internal.keys.WorkbenchKeyboard$1.handleEvent(Workbenc
hKeyboard.java:261)
        at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:82)
        at org.eclipse.swt.widgets.Display.filterEvent(Display.java:705)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:768)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:793)
        at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:778)
        at org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1720)
        at org.eclipse.swt.widgets.Control.sendKeyEvent(Control.java:1716)
        at org.eclipse.swt.widgets.Control.WM_CHAR(Control.java:3041)
        at org.eclipse.swt.widgets.Control.windowProc(Control.java:2944)
        at org.eclipse.swt.widgets.Display.windowProc(Display.java:3146)
        at org.eclipse.swt.internal.win32.OS.CallWindowProcW(Native Method)
        at org.eclipse.swt.internal.win32.OS.CallWindowProc(OS.java:1374)
        at org.eclipse.swt.internal.BidiUtil.windowProc(BidiUtil.java:647)
        at org.eclipse.swt.internal.win32.OS.DispatchMessageW(Native Method)
        at org.eclipse.swt.internal.win32.OS.DispatchMessage(OS.java:1450)
        at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:2254)
        at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:1562)
        at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:1536)
        at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.jav
a:257)
        at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:139)
        at org.eclipse.ui.internal.ide.IDEApplication.run(IDEApplication.java:90
)
        at org.eclipse.core.internal.runtime.PlatformActivator$1.run(PlatformAct
ivator.java:277)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.ja
va:239)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.ja
va:117)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:324)
        at org.eclipse.core.launcher.Main.basicRun(Main.java:267)
        at org.eclipse.core.launcher.Main.run(Main.java:692)
        at org.eclipse.core.launcher.Main.main(Main.java:676)

"VM Thread" prio=5 tid=0x009E50D0 nid=0x550 runnable

"VM Periodic Task Thread" prio=10 tid=0x009E6D88 nid=0x518 waiting on condition

"Suspend Checker Thread" prio=10 tid=0x009E76D8 nid=0x7cc runnable
- Main thread is blocked waiting for the AllTypesCache to update
- AllTypesCache thread is waiting on a CompilationUnit lock
- "Text Viewer Hover Presenter" owns the CompilationUnit lock and is busy
populating the Java model.
- The reconciler thread is also competing for the CompilationUnit lock
- Worker-8 is in the middle of autobuild.

In short, the system is very busy and nothing appears to be hung. The only
problem I see here is that TypeSelectionDialog.open() is doing a long running
operation (AllTypesCache.isCacheUpToDate) in the UI thread (it requires a lock
that can be held for long periods, and is therefore long running). It looks like
this work should be moved into the IRunnableWithProgress that is running inside
the ProgressMonitorDialog. Moving to JDT UI.
Best would be to use the new IPorgressService#shoiwBusy....This will avoid a 
progress monitor dialog in causes where the check is fast.
The reconciling of dirty CUs is now done in the modal context thread and 
progress is reported. However since we can't escape from a synchronized(...) 
call the user still might end up in a situation where he can't cancel the 
operation. 
