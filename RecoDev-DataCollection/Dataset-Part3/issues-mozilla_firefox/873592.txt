Also add more tests.

Also add more tests.
Fixed bug bug 874821.
