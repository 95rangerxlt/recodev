Created attachment 495371
patch

Created attachment 495371
patch
http://hg.mozilla.org/mozilla-central/rev/efcc5c73f0f4
Also landed a test: http://hg.mozilla.org/mozilla-central/rev/897cca515280
