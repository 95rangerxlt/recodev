+++ This bug was initially created as a clone of Bug #802013 +++

Not sure how long this has been busted, because we've been marking runs with mochitest-chrome failures as green for at least a day, if not since last Saturday.

https://tbpl.mozilla.org/php/getParsedLog.php?id=23622680&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-05-30 19:16:54 PDT for push db7a405f0a45
slave: talos-r4-snow-040

19:33:48     INFO -  31543 INFO TEST-PASS | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | actor: /[a-z]/ matched conn4.obj10
19:33:48     INFO -  --DOMWINDOW == 36 (0x14eadef30) [serial = 3423] [outer = 0x0] [url = http://mochi.test:8888/chrome/toolkit/devtools/server/tests/mochitest/nonchrome_unsafeDereference.html]
19:33:48     INFO -  31544 INFO TEST-PASS | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | expected uncaught exception - TypeError: document.doTheImpossible is not a function at chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html:0
19:33:48     INFO -  JavaScript error: chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html, line 0: document.doTheImpossible is not a function
19:33:48     INFO -  OS Agent Received message {"fun":"writeAtomic","args":[{"string":"/var/folders/Hs/HsDn6a9SG8idoIya6p9mtE+++TI/-Tmp-/tmpICgHKK/sessionstore.js"},{"ptr":"5621127696"},{"tmpPath":{"string":"/var/folders/Hs/HsDn6a9SG8idoIya6p9mtE+++TI/-Tmp-/tmpICgHKK/sessionstore.js.tmp"},"bytes":72167}],"id":266}
19:33:48     INFO -  OS Agent Calling method writeAtomic
19:33:48     INFO -  OS Agent Method writeAtomic succeeded
19:33:48     INFO -  OS Agent Sending positive reply 72167 id is 266
19:33:48     INFO -  WARNING: NS_ENSURE_TRUE(scrollFrame) failed: file ../../../dom/base/nsDOMWindowUtils.cpp, line 1534
19:33:49     INFO -  31545 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2

+++ This bug was initially created as a clone of Bug #802013 +++

Not sure how long this has been busted, because we've been marking runs with mochitest-chrome failures as green for at least a day, if not since last Saturday.

https://tbpl.mozilla.org/php/getParsedLog.php?id=23622680&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-05-30 19:16:54 PDT for push db7a405f0a45
slave: talos-r4-snow-040

19:33:48     INFO -  31543 INFO TEST-PASS | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | actor: /[a-z]/ matched conn4.obj10
19:33:48     INFO -  --DOMWINDOW == 36 (0x14eadef30) [serial = 3423] [outer = 0x0] [url = http://mochi.test:8888/chrome/toolkit/devtools/server/tests/mochitest/nonchrome_unsafeDereference.html]
19:33:48     INFO -  31544 INFO TEST-PASS | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | expected uncaught exception - TypeError: document.doTheImpossible is not a function at chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html:0
19:33:48     INFO -  JavaScript error: chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html, line 0: document.doTheImpossible is not a function
19:33:48     INFO -  OS Agent Received message {"fun":"writeAtomic","args":[{"string":"/var/folders/Hs/HsDn6a9SG8idoIya6p9mtE+++TI/-Tmp-/tmpICgHKK/sessionstore.js"},{"ptr":"5621127696"},{"tmpPath":{"string":"/var/folders/Hs/HsDn6a9SG8idoIya6p9mtE+++TI/-Tmp-/tmpICgHKK/sessionstore.js.tmp"},"bytes":72167}],"id":266}
19:33:48     INFO -  OS Agent Calling method writeAtomic
19:33:48     INFO -  OS Agent Method writeAtomic succeeded
19:33:48     INFO -  OS Agent Sending positive reply 72167 id is 266
19:33:48     INFO -  WARNING: NS_ENSURE_TRUE(scrollFrame) failed: file ../../../dom/base/nsDOMWindowUtils.cpp, line 1534
19:33:49     INFO -  31545 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2
https://tbpl.mozilla.org/php/getParsedLog.php?id=23622941&tree=Mozilla-Central
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=23636097&tree=Mozilla-Central
Rev4 MacOSX Snow Leopard 10.6 mozilla-central debug test mochitest-other on 2013-05-31 09:24:33
slave: talos-r4-snow-066

09:41:26     INFO -  31557 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=23642830&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-05-31 11:37:39
slave: talos-r4-snow-045

11:54:39     INFO -  31559 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23647325&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-05-31 13:07:35
slave: talos-r4-snow-082

13:24:47     INFO -  31557 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23649375&tree=Mozilla-Inbound
WINNT 6.2 mozilla-inbound opt test mochitest-other on 2013-05-31 14:11:02
slave: t-w864-ix-087

14:21:23     INFO -  32790 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23650610&tree=Mozilla-Central
Rev4 MacOSX Lion 10.7 mozilla-central debug test mochitest-other on 2013-05-31 14:17:52
slave: talos-r4-lion-055

14:36:22     INFO -  31537 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23654247&tree=Mozilla-Central
Ubuntu VM 12.04 mozilla-central debug test mochitest-other on 2013-05-31 15:17:51
slave: tst-linux32-ec2-336

15:38:28     INFO -  32099 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 5, expected 2
MattN
https://tbpl.mozilla.org/php/getParsedLog.php?id=23656163&tree=UX
Windows XP 32-bit ux debug test mochitest-other on 2013-05-31 16:18:17
slave: t-xp32-ix-095

17:30:38     INFO -  32786 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23661807&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-05-31 20:29:08
slave: talos-r4-snow-028

20:45:52     INFO -  31550 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23662354&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-05-31 20:46:06
slave: talos-r4-snow-020

21:02:55     INFO -  31558 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23662864&tree=Birch
Ubuntu VM 12.04 birch pgo test mochitest-other on 2013-05-31 21:07:47
slave: tst-linux32-ec2-091

21:18:55     INFO -  32089 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23664085&tree=Mozilla-Inbound
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-other on 2013-05-31 21:45:03
slave: talos-mtnlion-r5-024

21:58:32     INFO -  31542 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 5, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23664143&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-05-31 21:43:52
slave: talos-r4-snow-044

22:00:51     INFO -  31548 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23663935&tree=Mozilla-Inbound
Ubuntu VM 12.04 x64 mozilla-inbound opt test mochitest-other on 2013-05-31 21:47:13
slave: tst-linux64-ec2-037

21:56:28     INFO -  32092 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 3, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23665170&tree=Mozilla-Central
Rev4 MacOSX Snow Leopard 10.6 mozilla-central debug test mochitest-other on 2013-05-31 22:36:07
slave: talos-r4-snow-051

22:53:15     INFO -  31546 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
Ms2ger%gmail.com
https://tbpl.mozilla.org/php/getParsedLog.php?id=23666414&tree=Mozilla-Inbound
Windows 7 32-bit mozilla-inbound debug test mochitest-other on 2013-05-31 23:26:17
slave: t-w732-ix-007

23:41:08     INFO -  32810 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
Gijs
https://tbpl.mozilla.org/php/getParsedLog.php?id=23669441&tree=UX
Ubuntu VM 12.04 x64 ux debug test mochitest-other on 2013-06-01 00:55:20
slave: tst-linux64-ec2-169

01:14:39     INFO -  32092 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
Ms2ger%gmail.com
https://tbpl.mozilla.org/php/getParsedLog.php?id=23672633&tree=Mozilla-Inbound
Windows 7 32-bit mozilla-inbound debug test mochitest-other on 2013-06-01 03:46:49
slave: t-w732-ix-127

04:02:24     INFO -  32810 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23679196&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-01 07:18:15
slave: talos-r4-snow-031

07:35:27     INFO -  31557 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23679331&tree=Mozilla-Inbound
Rev4 MacOSX Lion 10.7 mozilla-inbound debug test mochitest-other on 2013-06-01 07:19:48
slave: talos-r4-lion-067

07:38:16     INFO -  31539 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2
dcamp
https://tbpl.mozilla.org/php/getParsedLog.php?id=23682861&tree=Fx-Team
Rev5 MacOSX Mountain Lion 10.8 fx-team debug test mochitest-other on 2013-06-01 10:15:44
slave: talos-mtnlion-r5-061

10:29:13     INFO -  31552 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 5, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23684033&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-01 11:38:07
slave: talos-r4-snow-037

11:55:01     INFO -  31559 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 9, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23684967&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-01 12:21:24
slave: talos-r4-snow-031

12:38:15     INFO -  31558 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23685036&tree=Mozilla-Inbound
Rev4 MacOSX Lion 10.7 mozilla-inbound debug test mochitest-other on 2013-06-01 12:21:46
slave: talos-r4-lion-089

12:39:57     INFO -  31539 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23686485&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-01 14:18:01
slave: talos-r4-snow-055

14:34:47     INFO -  31558 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23686507&tree=Mozilla-Inbound
Rev4 MacOSX Lion 10.7 mozilla-inbound debug test mochitest-other on 2013-06-01 14:18:06
slave: talos-r4-lion-031

14:36:26     INFO -  31538 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23688570&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-01 20:57:59
slave: talos-r4-snow-020

21:14:36     INFO -  31557 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23688573&tree=Mozilla-Inbound
Rev4 MacOSX Lion 10.7 mozilla-inbound debug test mochitest-other on 2013-06-01 20:54:00
slave: talos-r4-lion-021

21:12:37     INFO -  31540 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
past
https://tbpl.mozilla.org/php/getParsedLog.php?id=23691743&tree=Fx-Team
Rev4 MacOSX Lion 10.7 fx-team debug test mochitest-other on 2013-06-02 01:16:03
slave: talos-r4-lion-062

01:34:31     INFO -  31547 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
ehsan
https://tbpl.mozilla.org/php/getParsedLog.php?id=23696280&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-02 06:51:59
slave: talos-r4-snow-074

07:09:13     INFO -  31557 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 9, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23700519&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-02 09:24:56
slave: talos-r4-snow-009

09:41:56     INFO -  31569 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23703240&tree=Mozilla-Central
Ubuntu VM 12.04 mozilla-central debug test mochitest-other on 2013-06-02 13:11:38
slave: tst-linux32-ec2-081

13:32:50     INFO -  32112 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 3, expected 2
KWierso
https://tbpl.mozilla.org/php/getParsedLog.php?id=23704346&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-02 14:21:59
slave: talos-r4-snow-074

14:38:43     INFO -  31569 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23704346&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-02 14:21:59
slave: talos-r4-snow-074

14:38:43     INFO -  31569 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23705530&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-02 16:45:07
slave: talos-r4-snow-050

17:01:40     INFO -  31568 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23707045&tree=Fx-Team
Ubuntu VM 12.04 x64 fx-team pgo test mochitest-other on 2013-06-02 20:46:57
slave: tst-linux64-ec2-338

20:56:14     INFO -  32106 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
mats
https://tbpl.mozilla.org/php/getParsedLog.php?id=23709589&tree=Try
Rev4 MacOSX Snow Leopard 10.6 try debug test mochitest-other on 2013-06-03 01:28:16
slave: talos-r4-snow-014

01:45:12     INFO -  31568 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 9, expected 2
Was this caused by bug 859756? Can you take a look? :-)
edmorley
https://tbpl.mozilla.org/php/getParsedLog.php?id=23714914&tree=Birch
Ubuntu VM 12.04 x64 birch opt test mochitest-other on 2013-06-03 06:26:39
slave: tst-linux64-ec2-331

06:36:59     INFO -  32100 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 3, expected 2
Gijs
https://tbpl.mozilla.org/php/getParsedLog.php?id=23715366&tree=Mozilla-Inbound
Rev4 MacOSX Lion 10.7 mozilla-inbound debug test mochitest-other on 2013-06-03 06:30:57
slave: talos-r4-lion-088

06:49:26     INFO -  31549 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
edmorley
https://tbpl.mozilla.org/php/getParsedLog.php?id=23717676&tree=Mozilla-Inbound
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-other on 2013-06-03 08:13:58
slave: talos-mtnlion-r5-076

08:27:50     INFO -  31551 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 5, expected 2
(In reply to Ed Morley [:edmorley UTC+1] from comment #38)
> Was this caused by bug 859756? Can you take a look? :-)

I am not sure yet. I had try runs for that patch and they were green...

This bug is in my TODO list to investigate and to write a patch for. I will take a look as soon as possible.
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=23720771&tree=Fx-Team
Rev4 MacOSX Snow Leopard 10.6 fx-team debug test mochitest-other on 2013-06-03 09:38:01
slave: talos-r4-snow-075

09:55:59     INFO -  31567 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=23725141&tree=Mozilla-Inbound
WINNT 6.2 mozilla-inbound debug test mochitest-other on 2013-06-03 11:31:50
slave: t-w864-ix-027

11:47:26     INFO -  32825 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
nalexander
https://tbpl.mozilla.org/php/getParsedLog.php?id=23726280&tree=Services-Central
Windows XP 32-bit services-central opt test mochitest-other on 2013-06-03 12:11:22
slave: t-xp32-ix-060

12:21:15     INFO -  32786 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 5, expected 2
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=23731165&tree=Mozilla-Central
Rev4 MacOSX Snow Leopard 10.6 mozilla-central debug test mochitest-other on 2013-06-03 13:37:25
slave: talos-r4-snow-062

13:54:19     INFO -  31574 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23738925&tree=Mozilla-Inbound
Rev4 MacOSX Lion 10.7 mozilla-inbound debug test mochitest-other on 2013-06-03 15:48:43
slave: talos-r4-lion-034

16:07:09     INFO -  31553 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=23741281&tree=Fx-Team
Rev4 MacOSX Lion 10.7 fx-team debug test mochitest-other on 2013-06-03 16:33:55
slave: talos-r4-lion-049

16:53:17     INFO -  31553 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23745870&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-03 18:45:49
slave: talos-r4-snow-014

19:02:28     INFO -  31573 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23748165&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-03 19:38:44
slave: talos-r4-snow-004

19:55:38     INFO -  31573 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 9, expected 2
tnikkel
https://tbpl.mozilla.org/php/getParsedLog.php?id=23753325&tree=Mozilla-Inbound
WINNT 6.2 mozilla-inbound debug test mochitest-other on 2013-06-03 22:08:50
slave: t-w864-ix-118

22:24:04     INFO -  32824 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
tnikkel
https://tbpl.mozilla.org/php/getParsedLog.php?id=23755455&tree=Mozilla-Inbound
Rev4 MacOSX Lion 10.7 mozilla-inbound debug test mochitest-other on 2013-06-03 23:14:55
slave: talos-r4-lion-071

23:33:35     INFO -  31554 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
(In reply to Mihai Sucan [:msucan] from comment #42)
> This bug is in my TODO list to investigate and to write a patch for. I will
> take a look as soon as possible.

Thank you :-)
ttaubert
https://tbpl.mozilla.org/php/getParsedLog.php?id=23762974&tree=Try
Rev4 MacOSX Lion 10.7 try debug test mochitest-other on 2013-06-04 04:13:11
slave: talos-r4-lion-039

04:31:43     INFO -  31554 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
edmorley
https://tbpl.mozilla.org/php/getParsedLog.php?id=23767888&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-04 08:34:09
slave: talos-r4-snow-072

08:51:22     INFO -  31574 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
jorendorff
https://tbpl.mozilla.org/php/getParsedLog.php?id=23755221&tree=Try
Rev4 MacOSX Snow Leopard 10.6 try debug test mochitest-other on 2013-06-03 23:09:08
slave: talos-r4-snow-042

23:26:09     INFO -  31574 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23770359&tree=Mozilla-Inbound
Rev4 MacOSX Lion 10.7 mozilla-inbound debug test mochitest-other on 2013-06-04 09:49:21
slave: talos-r4-lion-033

10:08:36     INFO -  31554 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=23771973&tree=Mozilla-Inbound
Windows XP 32-bit mozilla-inbound debug test mochitest-other on 2013-06-04 10:46:00
slave: t-xp32-ix-114

09:58:56     INFO -  32810 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
Created attachment 758102
proposed fix

These failures look like we are getting unexpected nsiconsolemessages being logged while the test runs - even if the test clears the nsiconsoleservice store.

The same problem seems to happen in bug 878578.

This patch changes the two tests to allow for unexpected messages to be received, as long as we also get the messages we want.

Try push: https://tbpl.mozilla.org/?tree=Try&rev=f426cec1eaa2

r=me
KWierso
https://tbpl.mozilla.org/php/getParsedLog.php?id=23782793&tree=Mozilla-Inbound
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-other on 2013-06-04 14:37:35
slave: talos-mtnlion-r5-052

14:51:20     INFO -  31558 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23782793&tree=Mozilla-Inbound
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-other on 2013-06-04 14:37:35
slave: talos-mtnlion-r5-052

14:51:20     INFO -  31558 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23787646&tree=Mozilla-Inbound
Ubuntu VM 12.04 mozilla-inbound debug test mochitest-other on 2013-06-04 16:01:56
slave: tst-linux32-ec2-367

16:21:39     INFO -  32116 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 3, expected 2
darktrojan
https://tbpl.mozilla.org/php/getParsedLog.php?id=23781665&tree=Fx-Team
Ubuntu VM 12.04 x64 fx-team pgo test mochitest-other on 2013-06-04 14:24:09
slave: tst-linux64-ec2-333

14:33:39     INFO -  32107 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 3, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23800150&tree=Mozilla-Inbound
Rev4 MacOSX Lion 10.7 mozilla-inbound debug test mochitest-other on 2013-06-04 20:56:44
slave: talos-r4-lion-078

21:15:02     INFO -  31563 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23792884&tree=Services-Central
Rev4 MacOSX Snow Leopard 10.6 services-central debug test mochitest-other on 2013-06-04 17:51:10
slave: talos-r4-snow-021

18:07:58     INFO -  31574 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23800974&tree=Mozilla-Inbound
Windows 7 32-bit mozilla-inbound debug test mochitest-other on 2013-06-04 21:25:29
slave: t-w732-ix-091

21:40:07     INFO -  32830 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23802491&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-04 22:41:54
slave: talos-r4-snow-052

22:58:44     INFO -  31582 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=23809149&tree=Mozilla-Central
Rev4 MacOSX Snow Leopard 10.6 mozilla-central debug test mochitest-other on 2013-06-05 04:08:07
slave: talos-r4-snow-022

04:25:18     INFO -  31583 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 9, expected 2
edmorley
https://tbpl.mozilla.org/php/getParsedLog.php?id=23809737&tree=Mozilla-Central
Rev4 MacOSX Snow Leopard 10.6 mozilla-central debug test mochitest-other on 2013-06-05 04:34:04
slave: talos-r4-snow-029

04:51:11     INFO -  31613 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
edmorley
https://tbpl.mozilla.org/php/getParsedLog.php?id=23810576&tree=Mozilla-Inbound
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-other on 2013-06-05 04:59:21
slave: talos-mtnlion-r5-067

05:12:58     INFO -  31597 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 5, expected 2
edmorley
https://tbpl.mozilla.org/php/getParsedLog.php?id=23814573&tree=Mozilla-Inbound
Rev4 MacOSX Lion 10.7 mozilla-inbound debug test mochitest-other on 2013-06-05 07:13:51
slave: talos-r4-lion-017

07:33:52     INFO -  31580 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
jorendorff
https://tbpl.mozilla.org/php/getParsedLog.php?id=23814978&tree=Try
Rev4 MacOSX Snow Leopard 10.6 try debug test mochitest-other on 2013-06-05 07:31:59
slave: talos-r4-snow-045

07:49:16     INFO -  31573 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=23816787&tree=Mozilla-Inbound
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-other on 2013-06-05 08:56:51
slave: talos-mtnlion-r5-034

09:10:39     INFO -  31592 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 3, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23817549&tree=Mozilla-Inbound
WINNT 6.2 mozilla-inbound opt test mochitest-other on 2013-06-05 09:28:03
slave: t-w864-ix-118

09:37:50     INFO -  32842 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=23817969&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-05 09:27:02
slave: talos-r4-snow-060

09:44:39     INFO -  31608 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23817969&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-05 09:27:02
slave: talos-r4-snow-060

09:44:39     INFO -  31608 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
rnewman
https://tbpl.mozilla.org/php/getParsedLog.php?id=23818086&tree=Services-Central
Rev4 MacOSX Snow Leopard 10.6 services-central debug test mochitest-other on 2013-06-05 09:30:49
slave: talos-r4-snow-044

09:48:03     INFO -  31573 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=23820703&tree=Fx-Team
Windows 7 32-bit fx-team debug test mochitest-other on 2013-06-05 10:47:52
slave: t-w732-ix-088

11:02:04     INFO -  32826 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23821592&tree=Mozilla-Inbound
WINNT 6.2 mozilla-inbound debug test mochitest-other on 2013-06-05 11:10:45
slave: t-w864-ix-035

11:26:05     INFO -  32859 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
jorendorff
https://tbpl.mozilla.org/php/getParsedLog.php?id=23818996&tree=Try
Rev4 MacOSX Snow Leopard 10.6 try debug test mochitest-other on 2013-06-05 09:57:30
slave: talos-r4-snow-063

10:14:46     INFO -  31613 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
jorendorff
https://tbpl.mozilla.org/php/getParsedLog.php?id=23819127&tree=Try
Rev4 MacOSX Lion 10.7 try debug test mochitest-other on 2013-06-05 09:57:32
slave: talos-r4-lion-042

10:16:54     INFO -  31593 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23823012&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-05 11:46:23
slave: talos-r4-snow-060

12:04:02     INFO -  31613 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23823584&tree=Mozilla-Inbound
Ubuntu VM 12.04 x64 mozilla-inbound opt test mochitest-other on 2013-06-05 12:13:04
slave: tst-linux64-ec2-021

12:23:20     INFO -  32146 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 3, expected 2
ttaubert
https://tbpl.mozilla.org/php/getParsedLog.php?id=23820668&tree=Try
Ubuntu VM 12.04 x64 try opt test mochitest-other on 2013-06-05 10:54:56
slave: tst-linux64-ec2-076

11:04:31     INFO -  32107 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=23828273&tree=Mozilla-Inbound
Rev4 MacOSX Lion 10.7 mozilla-inbound debug test mochitest-other on 2013-06-05 14:09:02
slave: talos-r4-lion-052

14:27:48     INFO -  31593 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23825824&tree=Services-Central
Rev4 MacOSX Snow Leopard 10.6 services-central debug test mochitest-other on 2013-06-05 13:02:00
slave: talos-r4-snow-071

13:19:15     INFO -  31612 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23833066&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-05 15:47:29
slave: talos-r4-snow-054

16:04:14     INFO -  31613 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 8, expected 2
(In reply to Mihai Sucan [:msucan] from comment #59)
> Created attachment 758102
> proposed fix
> 
> These failures look like we are getting unexpected nsiconsolemessages being
> logged while the test runs - even if the test clears the nsiconsoleservice
> store.
> 
> The same problem seems to happen in bug 878578.
> 
> This patch changes the two tests to allow for unexpected messages to be
> received, as long as we also get the messages we want.
> 
> Try push: https://tbpl.mozilla.org/?tree=Try&rev=f426cec1eaa2
> 
> r=me

The try push looks ok to me - happy for this to land? :-)
edmorley
https://tbpl.mozilla.org/php/getParsedLog.php?id=23853744&tree=Mozilla-Inbound
Rev4 MacOSX Snow Leopard 10.6 mozilla-inbound debug test mochitest-other on 2013-06-06 04:03:01
slave: talos-r4-snow-040

04:20:20     INFO -  31622 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 11, expected 2
(In reply to Ed Morley [:edmorley UTC+1] from comment #88)
> The try push looks ok to me - happy for this to land? :-)

Yes!

Landed: https://hg.mozilla.org/integration/mozilla-inbound/rev/151ae3dcc6b0

(sorry, yesterday I was offline)
No problem - thank you for fixing this! :-)
:jonco
https://tbpl.mozilla.org/php/getParsedLog.php?id=23859111&tree=Try
Rev4 MacOSX Snow Leopard 10.6 try debug test mochitest-other on 2013-06-06 07:34:12
slave: talos-r4-snow-078

07:52:23     INFO -  31623 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
https://hg.mozilla.org/mozilla-central/rev/151ae3dcc6b0
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=23874375&tree=UX
Ubuntu VM 12.04 x64 ux pgo test mochitest-other on 2013-06-06 14:30:11
slave: tst-linux64-ec2-110

14:39:22     INFO -  32156 ERROR TEST-UNEXPECTED-FAIL | chrome://mochitests/content/chrome/toolkit/devtools/webconsole/test/test_cached_messages.html | number of cached page errors - got 4, expected 2
