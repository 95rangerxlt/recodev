https://tbpl.mozilla.org/php/getParsedLog.php?id=22033910&tree=Mozilla-Inbound
Rev3 WINNT 5.1 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-19 13:15:38 PDT for push 936accf907a2
slave: talos-r3-xp-067

14:40:23     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | menuitems[0] is not checked
14:40:23  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
(screenshot)
...
14:40:31  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_603750_websocket.js | uncaught exception - ReferenceError: ok is not defined at chrome://mochitests/content/browser/browser/devtools/webconsole/test/head.js:378
14:40:31     INFO -  Stack trace:
14:40:31     INFO -      JS frame :: chrome://mochikit/content/tests/SimpleTest/SimpleTest.js :: simpletestOnerror :: line 1109
14:40:31     INFO -      native frame :: <unknown filename> :: <TOP_LEVEL> :: line 0
14:40:31     INFO -  JavaScript error: chrome://mochitests/content/browser/browser/devtools/webconsole/test/head.js, line 378: ok is not defined

https://tbpl.mozilla.org/php/getParsedLog.php?id=22033910&tree=Mozilla-Inbound
Rev3 WINNT 5.1 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-19 13:15:38 PDT for push 936accf907a2
slave: talos-r3-xp-067

14:40:23     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | menuitems[0] is not checked
14:40:23  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
(screenshot)
...
14:40:31  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_603750_websocket.js | uncaught exception - ReferenceError: ok is not defined at chrome://mochitests/content/browser/browser/devtools/webconsole/test/head.js:378
14:40:31     INFO -  Stack trace:
14:40:31     INFO -      JS frame :: chrome://mochikit/content/tests/SimpleTest/SimpleTest.js :: simpletestOnerror :: line 1109
14:40:31     INFO -      native frame :: <unknown filename> :: <TOP_LEVEL> :: line 0
14:40:31     INFO -  JavaScript error: chrome://mochitests/content/browser/browser/devtools/webconsole/test/head.js, line 378: ok is not defined
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=22084456&tree=Mozilla-Inbound
Rev3 WINNT 5.1 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-22 02:54:08
slave: talos-r3-xp-050

03:48:58  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser_dbg_propertyview-reexpand.js | Test timed out
04:19:31  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
gps
https://tbpl.mozilla.org/php/getParsedLog.php?id=22106018&tree=Services-Central
Rev3 WINNT 5.1 services-central debug test mochitest-browser-chrome on 2013-04-22 14:16:28
slave: talos-r3-xp-063

15:41:30  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
15:41:32  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | uncaught exception - ReferenceError: finish is not defined at chrome://mochitests/content/browser/browser/devtools/webconsole/test/head.js:315
edmorley
https://tbpl.mozilla.org/php/getParsedLog.php?id=22132149&tree=Mozilla-Inbound
Rev3 WINNT 5.1 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-23 02:57:49
slave: talos-r3-xp-114

04:22:26  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
KWierso
https://tbpl.mozilla.org/php/getParsedLog.php?id=22181484&tree=Mozilla-Inbound
Rev3 WINNT 6.1 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-23 23:47:20
slave: talos-r3-w7-050

01:14:58  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
01:15:00  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | uncaught exception - ReferenceError: finish is not defined at chrome://mochitests/content/browser/browser/devtools/webconsole/test/head.js:316
command timed out: 7200 seconds elapsed, attempting to kill
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=22256029&tree=Mozilla-Inbound
Rev3 WINNT 5.1 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-25 14:17:38
slave: talos-r3-xp-066

15:44:14  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
15:44:15  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | uncaught exception - TypeError: menupopups[1].openPopup is not a function at chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js:156
command timed out: 7200 seconds elapsed, attempting to kill
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=22297645&tree=Mozilla-Inbound
Rev3 WINNT 5.1 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-26 12:27:47
slave: talos-r3-xp-074

12:38:38  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/base/content/test/browser_save_link-perwindowpb.js | Test timed out
13:54:43  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
14:35:45  WARNING -  TEST-UNEXPECTED-FAIL | leakcheck | 3638035 bytes leaked (AsyncStatement, AtomImpl, BackstagePass, BodyRule, CalculateFrecencyFunction, ...)
msucan
https://tbpl.mozilla.org/php/getParsedLog.php?id=22384757&tree=Try
Rev3 WINNT 5.1 try debug test mochitest-browser-chrome on 2013-04-29 15:19:20
slave: talos-r3-xp-067

16:14:13  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/debugger/test/browser_dbg_propertyview-reexpand.js | Test timed out
16:45:21  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
16:45:21  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | uncaught exception - TypeError: tabs[(runCount * 2)].linkedBrowser is null at chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js:116
Created attachment 743723
proposed fix

I was able to reproduce these intermittent failures. If I add mozRequestAnimationFrame() failures no longer occur.

Landed in inbound:
https://hg.mozilla.org/integration/mozilla-inbound/rev/c86dd4f23da5
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=22419535&tree=Mozilla-Inbound
Rev3 WINNT 6.1 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-30 08:43:06
slave: talos-r3-w7-019

10:12:34  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=22421107&tree=Mozilla-Inbound
Rev3 WINNT 5.1 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-30 09:56:20
slave: talos-r3-xp-035

11:20:32  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
11:20:33  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | uncaught exception - ReferenceError: finish is not defined at chrome://mochitests/content/browser/browser/devtools/webconsole/test/head.js:315
https://hg.mozilla.org/mozilla-central/rev/c86dd4f23da5
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=22445388&tree=Mozilla-Inbound
Rev3 WINNT 5.1 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-30 18:24:22
slave: talos-r3-xp-036

19:48:46  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
19:48:47  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | uncaught exception - TypeError: menupopups[0].openPopup is not a function at chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js:124
philor
https://tbpl.mozilla.org/php/getParsedLog.php?id=22448898&tree=Mozilla-Inbound
Rev3 WINNT 6.1 mozilla-inbound debug test mochitest-browser-chrome on 2013-04-30 19:21:03
slave: talos-r3-w7-100

20:50:06  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | Test timed out
20:50:07  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/devtools/webconsole/test/browser_webconsole_bug_602572_log_bodies_checkbox.js | uncaught exception - ReferenceError: finish is not defined at chrome://mochitests/content/browser/browser/devtools/webconsole/test/head.js:315
This is an improvement. The two failures are different now. For example, the last timeout was right before finish() was called, and the former failure was invoked before the last openPopup() call.

Will add requestLongerTimeout(2) - it is surprising how opening two web consoles and switching between them two times is soooo slow.
Created attachment 744141
increase timeout

Landed:
https://hg.mozilla.org/integration/mozilla-inbound/rev/90b8801cd9a9
https://hg.mozilla.org/mozilla-central/rev/90b8801cd9a9
