WINNT 6.2 mozilla-inbound pgo test mochitest-browser-chrome-1 on 2014-06-18 04:56:59 PDT for push 9cd95132bc9f

slave: t-w864-ix-100

https://tbpl.mozilla.org/php/getParsedLog.php?id=41956147&tree=Mozilla-Inbound

{
05:08:37     INFO -  TEST-START | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Entering test
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Check Sync button functionality
05:08:37     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | The Sync button was added to the Panel Menu
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Wait for tab event: load
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Console message: [JavaScript Warning: "Unknown pseudo-class or pseudo-element '-webkit-search-cancel-button'.  Ruleset ignored due to bad selector." {file: "chrome://browser/content/aboutaccounts/normalize.css" line: 366 column: 22 source: "input[type="search"]::-webkit-search-cancel-button,"}]
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Console message: [JavaScript Warning: "Error in parsing value for 'min-height'.  Declaration dropped." {file: "chrome://browser/content/aboutaccounts/main.css" line: 125 column: 16 source: "    min-height: none;"}]
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Console message: [JavaScript Warning: "Expected media feature name but found 'min-device-pixel-ratio'." {file: "chrome://browser/content/aboutaccounts/main.css" line: 144 column: 17 source: "only screen and (min-device-pixel-ratio: 2),"}]
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | skipping spurious load event
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Tab event received: load
05:08:37     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Firefox Sync page opened
05:08:37     INFO -  Non-local network connections are disabled and a connection attempt to token.services.mozilla.com (54.200.96.200) was made.  You should only access hostnames available via the test networking proxy (if running mochitests) or from a test-specific httpd.js server (if running xpcshell tests).  Browser services should be disabled or redirected to a local server.TEST-PASS | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | The panel closed
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Leaving test
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Entering test asyncCleanup
05:08:37     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | The panel UI is in default state again.
05:08:38     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Leaving test asyncCleanup
05:08:38     INFO -  TEST-INFO | Main app process: exit status 80000003
05:08:38  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | application terminated with exit code 2147483651
}

WINNT 6.2 mozilla-inbound pgo test mochitest-browser-chrome-1 on 2014-06-18 04:56:59 PDT for push 9cd95132bc9f

slave: t-w864-ix-100

https://tbpl.mozilla.org/php/getParsedLog.php?id=41956147&tree=Mozilla-Inbound

{
05:08:37     INFO -  TEST-START | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Entering test
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Check Sync button functionality
05:08:37     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | The Sync button was added to the Panel Menu
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Wait for tab event: load
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Console message: [JavaScript Warning: "Unknown pseudo-class or pseudo-element '-webkit-search-cancel-button'.  Ruleset ignored due to bad selector." {file: "chrome://browser/content/aboutaccounts/normalize.css" line: 366 column: 22 source: "input[type="search"]::-webkit-search-cancel-button,"}]
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Console message: [JavaScript Warning: "Error in parsing value for 'min-height'.  Declaration dropped." {file: "chrome://browser/content/aboutaccounts/main.css" line: 125 column: 16 source: "    min-height: none;"}]
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Console message: [JavaScript Warning: "Expected media feature name but found 'min-device-pixel-ratio'." {file: "chrome://browser/content/aboutaccounts/main.css" line: 144 column: 17 source: "only screen and (min-device-pixel-ratio: 2),"}]
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | skipping spurious load event
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Tab event received: load
05:08:37     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Firefox Sync page opened
05:08:37     INFO -  Non-local network connections are disabled and a connection attempt to token.services.mozilla.com (54.200.96.200) was made.  You should only access hostnames available via the test networking proxy (if running mochitests) or from a test-specific httpd.js server (if running xpcshell tests).  Browser services should be disabled or redirected to a local server.TEST-PASS | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | The panel closed
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Leaving test
05:08:37     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Entering test asyncCleanup
05:08:37     INFO -  TEST-PASS | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | The panel UI is in default state again.
05:08:38     INFO -  TEST-INFO | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | Leaving test asyncCleanup
05:08:38     INFO -  TEST-INFO | Main app process: exit status 80000003
05:08:38  WARNING -  TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | application terminated with exit code 2147483651
}
https://tbpl.mozilla.org/php/getParsedLog.php?id=41995073&tree=Mozilla-Central#error4
edmorley
https://tbpl.mozilla.org/php/getParsedLog.php?id=42108890&tree=Mozilla-Inbound
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-browser-chrome-1 on 2014-06-19 19:52:48
revision: b4224a22edac
slave: talos-mtnlion-r5-036

TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_946320_tabs_from_other_computers.js | Uncaught exception - Subview (PanelUI-history) did not show within 20 seconds.
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | application terminated with exit code 1
PROCESS-CRASH | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | application crashed [@ nsSocketTransport::InitiateSocket()]
TEST-UNEXPECTED-FAIL | leakcheck | 4856 bytes leaked (AsyncTransactionTrackersHolder, CompositorChild, CondVar, Mutex, PCompositorChild, ...)
Return code: 1
Standard8
https://tbpl.mozilla.org/php/getParsedLog.php?id=42199666&tree=Mozilla-Inbound
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-browser-chrome-1 on 2014-06-21 00:17:49
revision: 2048ba3b8468
slave: talos-mtnlion-r5-042

TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_946320_tabs_from_other_computers.js | Uncaught exception - Subview (PanelUI-history) did not show within 20 seconds.
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | application terminated with exit code 1
PROCESS-CRASH | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | application crashed [@ nsSocketTransport::InitiateSocket()]
TEST-UNEXPECTED-FAIL | leakcheck | 4856 bytes leaked (AsyncTransactionTrackersHolder, CompositorChild, CondVar, Mutex, PCompositorChild, ...)
Return code: 1
RyanVM
https://tbpl.mozilla.org/php/getParsedLog.php?id=42381134&tree=Mozilla-Inbound
Rev5 MacOSX Mountain Lion 10.8 mozilla-inbound debug test mochitest-browser-chrome-1 on 2014-06-24 12:59:33
revision: 6f291b1b47c7
slave: talos-mtnlion-r5-066

TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_946320_tabs_from_other_computers.js | Uncaught exception - Subview (PanelUI-history) did not show within 20 seconds.
TEST-UNEXPECTED-FAIL | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | application terminated with exit code 1
PROCESS-CRASH | chrome://mochitests/content/browser/browser/components/customizableui/test/browser_967000_button_sync.js | application crashed [@ nsSocketTransport::InitiateSocket()]
TEST-UNEXPECTED-FAIL | leakcheck | 4856 bytes leaked (AsyncTransactionTrackersHolder, CompositorChild, CondVar, Mutex, PCompositorChild, ...)
Return code: 1
Gijs, can you suggest somebody to look at this test that's intermittently hitting the network? My guess is it doesn't like the about:accounts tab being loaded?
*sigh* Would have helped if I'd actually put the needinfo? on I meant to.
It's weird that it's intermittent, and also that it's corresponding to a timeout in an earlier test (literally every occurrence so far seems to have that issue). I don't really know what'd be going on. Will leave the needinfo for a bit. Hopefully I will have time to look at this in more detail later today.
Yeah, I still don't really understand why this would be intermittent. I would expect it to either fail completely, or not at all. However, looking at the other aboutAccounts test, it looks like we should set the "identity.fxaccounts.remote.signup.uri" pref to something non-remote, cf. http://mxr.mozilla.org/mozilla-central/source/browser/base/content/test/general/browser_aboutAccounts.js#37
Created attachment 8445771
set sync signup pref for button test,

Tim, does this look right to you?
Marco, can you add this to this iteration?
Would adding the pref to prefs_general.js mean we avoid hitting this again in another test that decides to use about:accounts?
Or to be clearer: Would it be better to add to prefs_general.js, that way we don't have to play whac-a-mole when new tests are added?
(In reply to Ed Morley [:edmorley UTC+0] from comment #12)
> Or to be clearer: Would it be better to add to prefs_general.js, that way we
> don't have to play whac-a-mole when new tests are added?

Yes. I would imagine the other about:accounts referenced URIs should go in there too. Tim would probably have a more complete list than I do!
Comment on attachment 8445771
set sync signup pref for button test,

Review of attachment 8445771:
-----------------------------------------------------------------

Sorry, I don't have a complete list, looking at what the about:accounts tests do seems fine. Having the pref set globally for all tests might indeed make sense, we hit the same problem in bug 1027084 where about:home tries to load snippets.
Added to Iteration 32.2
remote:   https://hg.mozilla.org/integration/fx-team/rev/f57d24c3e843
pref("identity.fxaccounts.auth.uri", "https://api.accounts.firefox.com/v1");
pref("identity.fxaccounts.remote.signup.uri", "https://accounts.firefox.com/signup?service=sync&context=fx_desktop_v1");
pref("identity.fxaccounts.remote.force_auth.uri", "https://accounts.firefox.com/force_auth?service=sync&context=fx_desktop_v1");
pref("identity.fxaccounts.remote.signin.uri", "https://accounts.firefox.com/signin?service=sync&context=fx_desktop_v1");
pref("identity.fxaccounts.settings.uri", "https://accounts.firefox.com/settings");

Where some of these are only in all.js (auth.uri) and some only in firefox.js (the other 4). Which doesn't make any sense to me. rnewman, do you know why?

In any case, I guess we can set all 5 of them to example.com in prefs_general.js... patch + try push coming up...
(In reply to Tim Taubert [:ttaubert] (away July 7th-18th) from comment #14)
> Having the pref set globally for all tests might indeed
> make sense, we hit the same problem in bug 1027084 where about:home tries to
> load snippets.

Filed bug 1030149.
(In reply to Ed Morley [:edmorley UTC+0] from comment #18)
> (In reply to Tim Taubert [:ttaubert] (away July 7th-18th) from comment #14)
> > Having the pref set globally for all tests might indeed
> > make sense, we hit the same problem in bug 1027084 where about:home tries to
> > load snippets.
> 
> Filed bug 1030149.

Then we can close this once this has landed, I think.
https://hg.mozilla.org/mozilla-central/rev/f57d24c3e843
https://hg.mozilla.org/releases/mozilla-aurora/rev/cef7737c5627
https://hg.mozilla.org/releases/mozilla-beta/rev/6ed66a6c932c
(In reply to :Gijs Kruitbosch from comment #17)

> Where some of these are only in all.js (auth.uri) and some only in
> firefox.js (the other 4). Which doesn't make any sense to me. rnewman, do
> you know why?

I don't. They should probably all be in firefox.js until FxA is used in other products.

Conceivably the difference is that one is for the programmatic API, and the others are for content-based UI.
Recent stars in bug 1027181 make it look like this isn't really fixed, at least not when the test before it happens to fail.
