Windows 8 64-bit fx-team debug test mochitest-devtools-chrome-3

https://treeherder.mozilla.org/logviewer.html#?job_id=2003055&repo=fx-team

03:19:07 INFO - 585 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -

Windows 8 64-bit fx-team debug test mochitest-devtools-chrome-3

https://treeherder.mozilla.org/logviewer.html#?job_id=2003055&repo=fx-team

03:19:07 INFO - 585 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2003055
repository: fx-team
start_time: 2015-02-16T03:01:01
who: tomcat[at]mozilla[dot]com
machine: t-w864-ix-164
buildname: Windows 8 64-bit fx-team debug test mochitest-devtools-chrome-3
revision: 4d43899972e7

585 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=1999481
repository: fx-team
start_time: 2015-02-13T22:08:09
who: tomcat[at]mozilla[dot]com
machine: t-w864-ix-108
buildname: Windows 8 64-bit fx-team debug test mochitest-devtools-chrome-3
revision: 09a43afd57b2

585 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=1998453
repository: fx-team
start_time: 2015-02-13T19:48:37
who: tomcat[at]mozilla[dot]com
machine: t-w864-ix-062
buildname: Windows 8 64-bit fx-team debug test mochitest-devtools-chrome-3
revision: 22f0288cde34

585 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=6654729
repository: mozilla-inbound
start_time: 2015-02-16T09:53:02
who: tomcat[at]mozilla[dot]com
machine: t-w864-ix-068
buildname: Windows 8 64-bit mozilla-inbound debug test mochitest-devtools-chrome-3
revision: 49426db6bbef

585 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2006789
repository: fx-team
start_time: 2015-02-16T12:13:48
who: tomcat[at]mozilla[dot]com
machine: t-w864-ix-077
buildname: Windows 8 64-bit fx-team debug test mochitest-devtools-chrome-3
revision: 79fcb3f8f12e

585 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=6712973
repository: mozilla-inbound
start_time: 2015-02-17T19:57:54
who: philringnalda[at]gmail[dot]com
machine: tst-linux64-spot-1198
buildname: Ubuntu ASAN VM 12.04 x64 mozilla-inbound opt test mochitest-devtools-chrome
revision: 83725be2772e

5750 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=6715890
repository: mozilla-inbound
start_time: 2015-02-17T22:27:06
who: philringnalda[at]gmail[dot]com
machine: t-xp32-ix-054
buildname: Windows XP 32-bit mozilla-inbound debug test mochitest-devtools-chrome-3
revision: 946b11555d66

585 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=6719493
repository: mozilla-inbound
start_time: 2015-02-18T02:35:56
who: tomcat[at]mozilla[dot]com
machine: t-w864-ix-079
buildname: Windows 8 64-bit mozilla-inbound pgo test mochitest-devtools-chrome
revision: 36a3cbc746f5

5829 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=try&job_id=5015544
repository: try
start_time: 2015-02-18T04:15:13
who: jcoppeard[at]mozilla[dot]com
machine: t-xp32-ix-104
buildname: Windows XP 32-bit try debug test mochitest-devtools-chrome-3
revision: 6fae8f01b41b

585 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=1370771
repository: b2g-inbound
start_time: 2015-02-18T03:14:50
who: tomcat[at]mozilla[dot]com
machine: t-w732-ix-025
buildname: Windows 7 32-bit b2g-inbound pgo test mochitest-devtools-chrome
revision: 944c1cc9e81a

5850 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2018140
repository: fx-team
start_time: 2015-02-18T06:15:56
who: rvandermeulen[at]mozilla[dot]com
machine: t-w864-ix-060
buildname: Windows 8 64-bit fx-team pgo test mochitest-devtools-chrome
revision: dbed1e3c1a1e

5844 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2024141
repository: fx-team
start_time: 2015-02-18T10:32:14
who: rvandermeulen[at]mozilla[dot]com
machine: t-xp32-ix-018
buildname: Windows XP 32-bit fx-team debug test mochitest-devtools-chrome-3
revision: 2cf0e5bc1473

575 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=6729328
repository: mozilla-inbound
start_time: 2015-02-18T10:47:31
who: rvandermeulen[at]mozilla[dot]com
machine: t-w732-ix-011
buildname: Windows 7 32-bit mozilla-inbound pgo test mochitest-devtools-chrome
revision: acf46fe8b054

5844 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
Sami, is this possibly related to one of the other webconsole tests you fixed recently?
log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2026319
repository: fx-team
start_time: 2015-02-18T13:10:00
who: rvandermeulen[at]mozilla[dot]com
machine: t-xp32-ix-089
buildname: Windows XP 32-bit fx-team debug test mochitest-devtools-chrome-3
revision: f8366cf7e7c8

575 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=fx-team&job_id=2028536
repository: fx-team
start_time: 2015-02-18T15:09:40
who: rvandermeulen[at]mozilla[dot]com
machine: t-xp32-ix-151
buildname: Windows XP 32-bit fx-team debug test mochitest-devtools-chrome-3
revision: c17419e63808

575 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=6747765
repository: mozilla-inbound
start_time: 2015-02-18T16:41:55
who: rvandermeulen[at]mozilla[dot]com
machine: t-w864-ix-129
buildname: Windows 8 64-bit mozilla-inbound pgo test mochitest-devtools-chrome
revision: 34a8eb104adc

5836 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=1373568
repository: b2g-inbound
start_time: 2015-02-18T17:47:10
who: rvandermeulen[at]mozilla[dot]com
machine: t-w864-ix-113
buildname: Windows 8 64-bit b2g-inbound pgo test mochitest-devtools-chrome
revision: 5a8b6218aedb

5840 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
Created attachment 8566407
webconsole-failure.patch

Not related but easy to fix anyways.

The test fails if a script error from browser code is delivered to the console service during the test. The logs for multiple above failures show that following error message is printed during the test:
> Console message: [JavaScript Error: "couldn't look up addon: fx-devtools" {file: "jar:file:///C:/slave/test/build/application/firefox/browser/omni.ja!/components/nsBrowserGlue.js" line: 569}]

The message is from an addon performance monitoring code that detects devtools taking a lot of CPU time (or whatever it's measuring).

This patch makes the test to fail if the sourceFile of the error contains string "webconsole" as I think that was the original purpose of this test. This will match errors coming from browser/devtools/webconsole/*, toolkit/devtools/webconsole/* and toolkit/devtools/server/actors/webconsole.js but not any random error chrome code spews out while that test is running.

Try run: https://treeherder.mozilla.org/#/jobs?repo=try&revision=79bf222dfafe
Comment on attachment 8566407
webconsole-failure.patch

Review of attachment 8566407:
-----------------------------------------------------------------

Sami, you rock!
log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=1374572
repository: b2g-inbound
start_time: 2015-02-18T22:43:41
who: tomcat[at]mozilla[dot]com
machine: talos-linux32-ix-028
buildname: Ubuntu HW 12.04 b2g-inbound pgo talos dromaeojs
revision: df39e86f6f21

PROCESS-CRASH | dromaeo_dom | application crashed [@ mozilla::image::ProgressTracker::FirstObserverIs(mozilla::image::IProgressObserver*)]
Traceback (most recent call last):
Return code: 2
# TBPL FAILURE #
log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=1374652
repository: b2g-inbound
start_time: 2015-02-19T00:22:34
who: tomcat[at]mozilla[dot]com
machine: t-w864-ix-102
buildname: Windows 8 64-bit b2g-inbound pgo test mochitest-devtools-chrome
revision: df39e86f6f21

5837 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=6773869
repository: mozilla-inbound
start_time: 2015-02-19T05:46:35
who: tomcat[at]mozilla[dot]com
machine: t-w864-ix-162
buildname: Windows 8 64-bit mozilla-inbound pgo test mochitest-devtools-chrome
revision: 011fa139e620

5820 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
Ah yeah, that makes perfect sense. Bug 1071880 was backed out for now, but it's good that the test is already fixed for when it re-lands eventually.
https://hg.mozilla.org/integration/fx-team/rev/43b5364feb64
log: https://treeherder.mozilla.org/logviewer.html#?repo=mozilla-inbound&job_id=6779475
repository: mozilla-inbound
start_time: 2015-02-19T08:11:55
who: rvandermeulen[at]mozilla[dot]com
machine: t-w864-ix-033
buildname: Windows 8 64-bit mozilla-inbound pgo test mochitest-devtools-chrome
revision: 6885e993936a

5832 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
https://hg.mozilla.org/mozilla-central/rev/43b5364feb64
log: https://treeherder.mozilla.org/logviewer.html#?repo=b2g-inbound&job_id=1379224
repository: b2g-inbound
start_time: 2015-02-19T20:13:31
who: philringnalda[at]gmail[dot]com
machine: t-w864-ix-137
buildname: Windows 8 64-bit b2g-inbound pgo test mochitest-devtools-chrome
revision: 63d65b4b783a

5823 INFO TEST-UNEXPECTED-FAIL | browser/devtools/webconsole/test/browser_webconsole_bug_597136_network_requests_from_chrome.js | no exception was thrown when sending a network request from a chrome window -
Return code: 1
